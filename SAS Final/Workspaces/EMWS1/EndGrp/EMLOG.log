*------------------------------------------------------------*
User:                Divya
Date:                November 23, 2016
Time:                03:27:47
Site:                70080468
Platform:            X64_8HOME
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Post Grouping Log
Date:                November 23, 2016
Time:                03:27:34
*------------------------------------------------------------*
14736  data _null_;
14737  set EMWS1.Tree5_EMINFO;
14738  where key in('GROUPINFO', 'BOOSTINFO', 'BAGINFO', 'TARGETINFO');
14739  call symput('EMGROUPMODE', strip(key));
14740  call symput('EMGROUPID', strip(data));
14741  run;
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE key in ('BAGINFO', 'BOOSTINFO', 'GROUPINFO', 'TARGETINFO');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14742  data work._targetMeta;
14743  set WORK.M22W4XBN;
14744  where NAME in(
14745  "Contributed_To_Accident"
14746  );
14747  run;
 
NOTE: There were 1 observations read from the data set WORK.M22W4XBN.
      WHERE NAME='Contributed_To_Accident';
NOTE: The data set WORK._TARGETMETA has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
14748  data WORK.M2TWQWGJ;
14749  set WORK.M2TWQWGJ;
14750  where upcase(NAME) in(
14751  "CONTRIBUTED_TO_ACCIDENT"
14752  );
14753  run;
 
NOTE: There were 1 observations read from the data set WORK.M2TWQWGJ.
      WHERE UPCASE(NAME)='CONTRIBUTED_TO_ACCIDENT';
NOTE: The data set WORK.M2TWQWGJ has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14754  %let EMNORLEN = %DMNORLEN;
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN EMWS1 Tree5_TRAIN
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN EMWS1 Tree5_TRAIN
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _INIT >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _term >>
14783  data WORK.EndGrp_EVENT(KEEP=VARIABLE LABEL LEVEL EVENT NUMLEVELS ORDER);
14784  length ORDER $20;
14785  label VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel,  NOQUOTE))" EVENT = "%sysfunc(sasmsg(sashelp.dmine, assmt_event_vlabel, NOQUOTE))" NUMLEVELS = "%sysfunc(sasmsg(sashelp.dmine, rpt_numcat_vlabel, NOQUOTE))" LEVEL =
14786     "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" ORDER = "%sysfunc(sasmsg(sashelp.dmine, meta_order_vlabel, NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
14787  set EMWS1.TREE5_CONTRIBUTED_TO_A_DM( where=(_TYPE_="TARGET"));
14788  NumLevels=2;
14789  select(upcase(ORDER));
14790  when('DESC') ORDER = 'Descending';
14791  when('ASC') ORDER = 'Ascending';
14792  when('FMTDESC') ORDER = 'Formatted Descending';
14793  when('FMTASC') ORDER = 'Formatted Ascending';
14794  otherwise ORDER = 'Descending';
14795  end;
14796  output;
14797  run;
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='TARGET';
NOTE: The data set WORK.ENDGRP_EVENT has 1 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
14798  title9 ' ';
14799  proc print data=WORK.EndGrp_EVENT noobs label;
14800  var VARIABLE EVENT LEVEL NUMLEVELS ORDER LABEL;
14801  title9 ' ';
14802  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_modelEvent_title  , NOQUOTE))";
14803  run;
 
NOTE: There were 1 observations read from the data set WORK.ENDGRP_EVENT.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14804  title10;
 
"No decisions defined for target "Contributed_To_Accident"."
14805  proc print data = EMWS1.Tree5_Contributed_To_A_DM noobs label;
14806  var _type_ variable label;
14807  where _type_ ^in('MATRIX', 'DECISION', 'TRAINPRIOR', 'DATAPRIOR', 'DECPRIOR');
14808  label _TYPE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,     NOQUOTE))" VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
14809  title9 ' ';
14810  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_predDecVars_title  , NOQUOTE))";
14811  run;
 
NOTE: There were 7 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _type_ not in ('DATAPRIOR', 'DECISION', 'DECPRIOR', 'MATRIX', 'TRAINPRIOR');
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14812  title10;
 
PERFORMANCE  DETAILS
15217  %let EMEXCEPTIONSTRING=;
15218  *------------------------------------------------------------*;
15219  * POSTLOOP: EndGrp;
15220  *------------------------------------------------------------*;
15221  %let EM_ACTION = POSTLOOP;
15222  %let syscc = 0;
15223  %macro main;
15224     %if %upcase(&EM_ACTION) = TRAIN %then %do;
15225
15226         filename temp catalog 'sashelp.emutil.endgp_train.source';
15227         %include temp;
15228         filename temp;
15229
15230         %train;
15231
15232     %end;
15233     %else
15234        %if %upcase(&EM_ACTION) = SCORE %then %do;
15235
15236         filename temp catalog 'sashelp.emutil.endgp_score.source';
15237         %include temp;
15238         filename temp;
15239
15240         %score;
15241     %end;
15242     %else
15243     %if %upcase(&EM_ACTION) = POSTLOOP %then %do;
15244
15245         filename temp catalog 'sashelp.emutil.endgp_postloop.source';
15246         %include temp;
15247         filename temp;
15248
15249         %postloop;
15250
15251     %end;
15252
15253     %doendm:
15254  %mend main;
15255
15256  %main;
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMUTIL.ENDGP_POSTLOOP.SOURCE.
15257 +%macro scoreTables(data=, out=, scoreref=, prescore=);
15259 +   %if ("&data" ne "") and (%sysfunc(exist(&data)) or %sysfunc(exist(&data, VIEW))) %then %do;
15260 +       data &out / view=&out;
15261 +          set &data
15264 +          %if "&prescore" = "Y" %then %do;
15265 +              (obs=1)
15266 +          %end;
15268 +          ;
15270 +       %let fexist = %sysfunc(fexist(&scoreref));
15271 +       %if &fexist %then %do;
15272 +          %inc &scoreref;
15273 +       %end;
15275 +       %if "&prescore" eq "Y" %then %do;
15276 +          drop I_: R_:;
15277 +       %end;
15279 +       run;
15280 +   %end;
15282 +%mend scoretables;
15284 +%macro postboostbag(groupid=, type=);
15285 +   %let infoDs = &em_lib..%sysfunc(strip(&groupid))_&type;
15286 +   data _null_;
15287 +      retain index 0;
15288 +      set &infoDs;
15289 +      call symput('targetname', strip(_target_));
15290 +   run;
15292 +   data _null_;
15293 +      set &em_import_data_eminfo;
15294 +      where key in('MODEL', 'DECMETA') and TARGET="&targetname";
15295 +      if key='DECMETA' then call symput('ENDGRP_DECMETA', strip(data));
15296 +      else call symput('MODELID', strip(data));
15297 +   run;
15299 +   %em_getname(key=LOOPFLOWCODE, type=FILE, extension=sas);
15300 +   %em_getname(key=LOOPPUBCODE,  type=FILE, extension=sas);
15302 +   filename loopflow "&em_user_loopflowcode";
15303 +   filename looppub "&em_user_looppubcode";
15305 +   filename emflow "&EM_FILE_EMFLOWSCORECODE";
15306 +   filename empub "&EM_FILE_EMPUBLISHSCORECODE";
15308 +   %em_copyfile(infref=loopflow, outfref=emflow, append=N);
15309 +   %em_copyfile(infref=looppub,  outfref=empub,  append=N);
15311 +   filename loopflow;
15312 +   filename looppub;
15313 +   filename emflow;
15314 +   filename empub;
15316 +   %let EMGROUPASSMT = Y;
15318 +   %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=Y, DECSCORECODE=Y, FITSTATISTICS=N, CLASSIFICATION=Y, RESIDUALS=Y, PREDICTED=Y);
15320 +   %em_getname(key=emoutfit, type=DATA);
15321 +   %em_getname(key=emoutfit_loop, type=DATA);
15323 +   data &em_user_emoutfit;
15324 +      set &em_user_emoutfit_loop end=eof;
15325 +      drop _LOOP_ _WHERE_;
15326 +      if eof then output;
15327 +   run;
15329 +%mend postboostbag;
15331 +%macro postgroup(groupid=, type=);
15332 +   filename emflow "&EM_FILE_EMFLOWSCORECODE";
15333 +   filename empub "&EM_FILE_EMPUBLISHSCORECODE";
15335 +   %let infoDs = &em_lib..%sysfunc(strip(&groupid))_&type;
15336 +   %let _XValidation = 0;
15338 +   data _null_;
15339 +      retain index 0;
15340 +      set &infoDs end=eof;
15341 +      index + 1;
15342 +      call symput('loopwhere'!!strip(put(index, best.)), tranwrd(strip(_wheredesc_), '"', '""'));
15343 +      call symput('looptarget'!!strip(put(index, best.)), strip(_target_));
15344 +      if eof and substr(_WHERE_, 1, 2)='^(' then
15345 +         call symput('_XValidation', '1');
15346 +   run;
15348 +   %let grouptarget=;
15349 +   /* Looping Over Groups Only.  Retrieve targets from EMINFO */
15350 +   %if "&looptarget1" eq "" %then %do;
15351 +      data _null_;
15352 +         set &em_import_data_eminfo;
15353 +         where key in('MODEL');
15354 +         call symput('grouptarget', strip(symget('grouptarget'))!!' '!!strip(target));
15355 +      run;
15356 +   %end;
15358 +   %do j=1 %to &emloopnumber;
15359 +       %let EnsembleIndex=0;
15360 +       data _null_;
15361 +          retain index 0 ensembleIndex 0;
15362 +          set &em_user_path end=eof;
15363 +          where LOOPID=&j;
15364 +          if nodelabel = "&groupid" or index then do;
15365 +             index + 1;
15366 +             call symput('loopnode'!!strip(put(index, best.)),  strip(nodelabel));
15367 +             call symput('loopdesc'!!strip(put(index, best.)),  strip(component));
15368 +             call symput('loopaccum'!!strip(put(index, best.)), strip(accumulatedScoreCode));
15369 +          end;
15370 +          if component='Ensemble' then ensembleIndex = index;
15371 +          if eof then do;
15372 +             call symput('loopcodenum', strip(put(index, best.)));
15373 +             call symput('EnsembleIndex', strip(put(ensembleIndex, best.)));
15374 +          end;
15375 +       run;
15377 +       %do i = 1 %to &loopcodenum;
15378 +           %let fsourceEntry = &em_lib..%sysfunc(strip(&&loopnode&i))_LOOP.EMFLOWCODE_&j..source;
15379 +           %let psourceEntry = &em_lib..%sysfunc(strip(&&loopnode&i))_LOOP.EMPUBLISHCODE_&j..source;
15381 +           %if (&&loopnode&i eq &em_nodeid ) or
15382 +               ( (&&loopnode&i ne &em_nodeid) and (&ensembleIndex = 0) or (&i=1 or &i>&ensembleIndex or &i=&ensembleIndex) ) %then %do;
15384 +               data _null_;
15385 +                  file emflow mod;
15386 +                  put "&em_codebar;";
15387 +                  put "* &&loopnode&i: &&loopdesc&i;" ;
15388 +                  put "* User: &sysuserid;";
15389 +                  put "* Date: &sysdate: &systime;";
15390 +                  %if "&&loopwhere&j" ne "" %then %do;
15391 +                      put "* Group: &&loopwhere&j;";
15392 +                  %end;
15393 +                  %if "&&looptarget&j" ne "" %then %do;
15394 +                       put "* Target: &&looptarget&j;";
15395 +                  %end;
15396 +                  put "&em_codebar ;";
15397 +               run;
15398 +               data _null_;
15399 +                   file empub mod;
15400 +                   put "&em_codebar ;";
15401 +                   put "* &&loopnode&i: &&loopdesc&i;" ;
15402 +                   put "* User: &sysuserid;";
15403 +                   put "* Date: &sysdate: &systime;";
15404 +                   %if "&&loopwhere&j" ne "" %then %do;
15405 +                       put "* Group: &&loopwhere&j;";
15406 +                   %end;
15407 +                   %if "&&looptarget&j" ne "" %then %do;
15408 +                       put "* Target: &&looptarget&j;";
15409 +                   %end;
15410 +                   put "&em_codebar;";
15411 +               run;
15412 +           %end;
15414 +           %if ("&&loopnode&i" ne "&em_nodeid" ) %then %do;
15415 +               %if (&ensembleIndex = 0) or (&i=1 or &i>&ensembleIndex or &i=&ensembleIndex) %then %do;
15416 +                   %if "&&loopnode&i" eq "&groupid" and "&_XValidation" eq "1" %then %do;
15417 +                       filename y catalog "&psourceEntry";
15418 +                       %em_copyfile(infref=y, outfref=emflow, append=Y);
15419 +                       filename y;
15420 +                   %end;
15421 +                   %else %do;
15422 +                       filename x catalog "&fsourceEntry";
15423 +                       %em_copyfile(infref=x, outfref=emflow, append=Y);
15424 +                       filename x;
15425 +                   %end;
15427 +                   filename y catalog "&psourceEntry";
15428 +                   %em_copyfile(infref=y, outfref=empub, append=Y);
15429 +                   filename y;
15430 +               %end;
15431 +           %end;
15432 +           %else %do;
15433 +              %if "&&loopwhere&j" ne "" %then %do;
15434 +                  data _null_;
15435 +                     file emflow mod;
15436 +                     put 'end;';
15437 +                  run;
15438 +                  data _null_;
15439 +                     file empub mod;
15440 +                     put 'end;';
15441 +                  run;
15442 +               %end;
15443 +           %end;
15444 +       %end;
15445 +   %end;
15446 +   filename emflow;
15447 +   filename empub;
15449 +   /* Stratify Model Need to Recompute All Assessment Reports */
15450 +   %if "&grouptarget" eq "" %then %do;
15451 +       %let assessTarget=;
15452 +       %do j=1 %to &emloopnumber;
15453 +           %let targetname = &&looptarget&j;
15454 +           %if ^%index(&assesstarget, &targetname) and ("&targetname" ne "") %then %do;
15455 +               %let assesstarget = &assesstarget &targetname;
15456 +               %let index = 1;
15457 +               %do %while( %scan(%sysfunc(strip(&targetname)), &index) ne %sysfunc(strip(&targetname)));
15458 +                   %let index = %eval(&index + 1);
15459 +               %end;
15460 +               %let targetlevel = %scan(%sysfunc(strip(%em_target_level)), &index ,%str( ));
15462 +               %if "&targetlevel" ne "INTERVAL" %then
15463 +                   %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=Y, DECSCORECODE=Y, FITSTATISTICS=Y, CLASSIFICATION=Y, PREDICTED=Y);
15464 +               %else
15465 +                   %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=Y, DECSCORECODE=Y, FITSTATISTICS=Y, RESIDUALS=Y, PREDICTED=Y);
15466 +           %end;
15467 +       %end;
15468 +   %end;
15469 +   %else %do;
15470 +       %do i=1 %to &em_num_target;
15471 +           %let targetname = %scan(%em_target, &i, %str( )) ;
15472 +           %let targetlevel = %scan(%sysfunc(strip(%em_target_level)), &i ,%str( ));
15474 +           %if %sysfunc(indexw(&grouptarget, &targetname)) %then %do;
15475 +              %if "&targetlevel" ne "INTERVAL" %then
15476 +                  %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=Y, DECSCORECODE=Y, FITSTATISTICS=Y, CLASSIFICATION=Y, PREDICTED=Y);
15477 +              %else
15478 +                 %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=Y, DECSCORECODE=Y, FITSTATISTICS=Y, RESIDUALS=Y, PREDICTED=Y);
15479 +           %end;
15480 +           %else %do;
15481 +               %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=N, DECSCORECODE=N, FITSTATISTICS=N, RESIDUALS=N, PREDICTED=N);
15482 +           %end;
15483 +       %end;
15484 +   %end;
15485 +   %let EMGROUPASSMT = N;
15486 +%mend postgroup;
15488 +%macro posttarget(groupid=, type=);
15489 +   filename emflow "&EM_FILE_EMFLOWSCORECODE";
15490 +   filename empub "&EM_FILE_EMPUBLISHSCORECODE";
15492 +   %let infoDs = &em_lib..%sysfunc(strip(&groupid))_&type;
15493 +   data _null_;
15494 +      retain index 0;
15495 +      set &infoDs end=eof;
15496 +      index + 1;
15497 +      call symput('looptarget'!!strip(put(index, best.)), strip(_target_));
15498 +   run;
15500 +   %do j=1 %to &emloopnumber;
15501 +       %let EnsembleIndex=0;
15502 +       data _null_;
15503 +          retain index 0 ensembleIndex 0;
15504 +          set &em_user_path end=eof;
15505 +          where LOOPID=&j;
15506 +          if nodelabel = "&groupid" or index then do;
15507 +             index + 1;
15508 +             call symput('loopnode'!!strip(put(index, best.)),  strip(nodelabel));
15509 +             call symput('loopdesc'!!strip(put(index, best.)),  strip(component));
15510 +             call symput('loopaccum'!!strip(put(index, best.)), strip(accumulatedScoreCode));
15511 +          end;
15512 +          if component='Ensemble' then ensembleIndex = index;
15513 +          if eof then do;
15514 +             call symput('loopcodenum', strip(put(index, best.)));
15515 +             call symput('EnsembleIndex', strip(put(ensembleIndex, best.)));
15516 +          end;
15517 +       run;
15519 +       %do i = 1 %to &loopcodenum;
15520 +           %let fsourceEntry = &em_lib..%sysfunc(strip(&&loopnode&i))_LOOP.EMFLOWCODE_&j..source;
15521 +           %let psourceEntry = &em_lib..%sysfunc(strip(&&loopnode&i))_LOOP.EMPUBLISHCODE_&j..source;
15523 +           %if (&&loopnode&i ne &em_nodeid ) and
15524 +               ( (&ensembleIndex = 0) or (&i>=&ensembleIndex) ) %then %do;
15525 +               data _null_;
15526 +                  file emflow mod;
15527 +                  put "&em_codebar;";
15528 +                  put "* &&loopnode&i: &&loopdesc&i;" ;
15529 +                  put "* User: &sysuserid;";
15530 +                  put "* Date: &sysdate: &systime;";
15531 +                  put "* Target: &&looptarget&j;";
15532 +                  put "&em_codebar ;";
15533 +               run;
15534 +               data _null_;
15535 +                  file empub mod;
15536 +                  put "&em_codebar ;";
15537 +                  put "* &&loopnode&i: &&loopdesc&i;" ;
15538 +                  put "* User: &sysuserid;";
15539 +                  put "* Date: &sysdate: &systime;";
15540 +                  put "* Target: &&looptarget&j;";
15541 +                  put "&em_codebar;";
15542 +               run;
15544 +               filename x catalog "&fsourceEntry";
15545 +               %em_copyfile(infref=x, outfref=emflow, append=Y);
15546 +               filename x;
15548 +               filename y catalog "&psourceEntry";
15549 +               %em_copyfile(infref=y, outfref=empub, append=Y);
15550 +               filename y;
15551 +           %end;
15552 +       %end;
15553 +   %end;
15554 +   filename emflow;
15555 +   filename empub;
15557 +   %do j=1 %to &emloopnumber;
15558 +       %let targetname = &&looptarget&j;
15559 +       %let k = 1;
15560 +       %do %while( %scan(%sysfunc(strip(&targetname)), &k) ne %sysfunc(strip(&targetname)));
15561 +           %let k = %eval(&k + 1);
15562 +       %end;
15563 +       %let targetlevel = %scan(%sysfunc(strip(%em_target_level)), &k ,%str( ));
15564 +       %if "&targetlevel" ne "INTERVAL" %then
15565 +           %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=N, DECSCORECODE=N, FITSTATISTICS=N, CLASSIFICATION=N, PREDICTED=Y);
15566 +       %else
15567 +           %em_model(DATA=&gptrain, TARGET=&targetname , ASSESS=N, DECSCORECODE=N, FITSTATISTICS=N, RESIDUALS=N, PREDICTED=Y);
15568 +       %let EMGROUPASSMT = N;
15569 +   %end;
15571 +%mend posttarget;
15573 +%macro postloop;
15575 +   %if ^%symexist(em_import_data_eminfo) %then %goto doendpl;
15577 +   %if "&em_import_data_eminfo" eq "" or ^%sysfunc(exist(&em_import_data_eminfo)) %then %do;
15578 +       %let emexceptionstring = nomodeltarget;
15579 +       %goto doendpl;
15580 +   %end;
15582 +   %let targetName=;
15583 +   %let endgrp_decmeta=;
15585 +   data _null_;
15586 +      set &em_import_data_eminfo;
15587 +      where key in('GROUPINFO','BOOSTINFO', 'BAGINFO', 'TARGETINFO', 'INDEXINFO');
15588 +      call symput('GROUPID',   strip(data));
15589 +      call symput('LOOPTYPE', strip(key));
15590 +   run;
15592 +   filename temp catalog 'sashelp.emutil.em_gettrainpath.source';
15593 +   %include temp;
15594 +   filename temp;
15596 +   %em_getname(key=PATH, type=DATA);
15598 +   %if ^%sysfunc(exist(&em_user_path)) %then %goto doendpl;
15600 +   %let groupImportDs = &em_lib..%sysfunc(strip(&groupid))_importset;
15602 +   %let gptrain=;
15603 +   %let gpvalidate=;
15604 +   %let gptest=;
15606 +   data _null_;
15607 +      set &groupImportDs;
15608 +      select(upcase(port));
15609 +          when('DATA')     call symput('gpTrain',    strip(dataset));
15610 +          when('VALIDATE') call symput('gpValidate', strip(dataset));
15611 +          when('TEST')     call symput('gpTest',     strip(dataset));
15612 +       otherwise;
15613 +      end;
15614 +   run;
15615 +   %let gpTrain =&em_lib..%sysfunc(strip(&gpTrain));
15617 +   %if ("&looptype" eq "BOOSTINFO") or ("&looptype" eq "BAGINFO") %then %postboostbag(groupid=&groupid, type=&looptype);
15618 +   %else
15619 +   %if ("&looptype" eq "GROUPINFO") %then %postgroup(groupid=&groupid, type=&looptype);
15620 +   %else
15621 +   %if ("&looptype" eq "TARGETINFO") %then %posttarget(groupid=&groupid, type=&looptype);
15623 +   %let deleteString = &em_nodeid._path;
15625 +   proc sort data=&em_user_path nodupkey;
15626 +      by nodelabel;
15627 +   run;
15628 +   %let loopnodenum=0;
15629 +   data _null_;
15630 +      retain index 0;
15631 +      set &em_user_path end=eof;
15632 +      if nodelabel = "&groupid" or index then do;
15633 +         index + 1;
15634 +         call symput('loopnode'!!strip(put(index, best.)),  strip(nodelabel));
15635 +      end;
15636 +      if eof then do;
15637 +         call symput('loopnodenum', strip(put(index, best.)));
15638 +      end;
15639 +   run;
15640 +   proc datasets lib=&em_lib nolist;
15641 +      delete &deleteString;
15642 +      delete
15643 +      %do i = 1 %to &loopnodenum;
15644 +          %let loopcatalog = %sysfunc(strip(&&loopnode&i))_LOOP;
15645 +          %if %sysfunc(cexist(&em_lib..%sysfunc(strip(&&loopnode&i))_LOOP)) %then %do;
15647 +              &loopcatalog
15648 +          %end;
15649 +          %if &i = &loopnodenum %then %do;
15650 +              / mt=catalog;
15651 +          %end;
15652 +      %end;
15653 +   run;
15654 +   quit;
15656 +   filename emflow "&EM_FILE_EMFLOWSCORECODE" MOD;
15658 +   %if "&gpTrain" ne "" and (("&looptype" eq "BOOSTINFO") or ("&looptype" eq "BAGINFO")) %then %do;
15660 +       %let targetType = ;
15661 +       data _null_;
15662 +          set &endgrp_decmeta;
15663 +          where _TYPE_='TARGET';
15664 +          call symput('TARGETTYPE', strip(level));
15665 +       run;
15667 +       filename empub "&EM_FILE_EMPUBLISHSCORECODE" MOD;
15669 +       %scoreTables(data=&gpTrain,     out=&em_export_train,    scoreref=emflow, prescore=Y);
15671 +       %if &targetType ne 'INTERVAL' %then %do;
15672 +           %makeClassificationVars(target=&target, data=&em_export_train, decmeta=&endgrp_decmeta, publish=Y, fref=empub);
15673 +       %end;
15675 +       %makeResidualVars(target=&targetname, decmeta=&endgrp_decmeta, fref=emflow);
15677 +       %em_model(TARGET=&targetname, ASSESS=Y, DECSCORECODE=Y, FITSTATISTICS=Y, CLASSIFICATION=Y, RESIDUALS=Y, PREDICTED=Y);
15679 +       filename empub;
15681 +   %end;
15683 +   %if "&gpTrain" ne "" %then
15684 +        %scoreTables(data=&gpTrain,     out=&em_export_train,    scoreref=emflow);
15685 +   %if "&gpValidate" ne "" %then
15686 +       %scoreTables(data=&em_lib..%sysfunc(strip(&gpValidate)),  out=&em_export_validate, scoreref=emflow);
15687 +   %if "&gpTest" ne "" %then
15688 +       %scoreTables(data=&em_lib..%sysfunc(strip(&gpTest)),      out=&em_export_test,     scoreref=emflow);
15690 +   filename emflow;
15692 +   %doendpl:
15694 +%mend postloop;
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE key in ('BAGINFO', 'BOOSTINFO', 'GROUPINFO', 'INDEXINFO', 'TARGETINFO');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMUTIL.EM_GETTRAINPATH.SOURCE.
15695 +%macro EM_GETTRAINPATH(NODEID=, OUTPATH=);
15696 +   proc display c=sashelp.emcore.pathscorecode.scl;
15697 +   run;
15698 +%mend EM_GETTRAINPATH;
15699 +
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.
 
NOTE: There were 15 observations read from the data set EMWS1.GRP_IMPORTSET.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 1 observations read from the data set EMWS1.GRP_BAGINFO.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE key in ('DECMETA', 'MODEL') and (TARGET='Contributed_To_Accident');
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: The file EMFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=0,
      Last Modified=23Nov2016:03:27:37,
      Create Time=23Nov2016:03:27:37
 
NOTE: 1523 records were written to the file EMFLOW.
      The minimum record length was 1.
      The maximum record length was 85.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.03 seconds
 
 
 
NOTE: The file EMPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMPUBLISHSCORE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=0,
      Last Modified=23Nov2016:03:27:37,
      Create Time=23Nov2016:03:27:37
 
NOTE: 1274 records were written to the file EMPUB.
      The minimum record length was 1.
      The maximum record length was 85.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
NOTE: Fileref LOOPFLOW has been deassigned.
NOTE: Fileref LOOPPUB has been deassigned.
NOTE: Fileref EMFLOW has been deassigned.
NOTE: Fileref EMPUB has been deassigned.
 
NOTE: The data set WORK.EM_USER_MODEL has 1 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 10 observations read from the data set EMWS1.ENDGRP_EMOUTFIT_LOOP.
NOTE: The data set EMWS1.ENDGRP_EMOUTFIT has 1 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 110 observations read from the data set EMWS1.ENDGRP_PATH.
NOTE: 99 observations with duplicate key values were deleted.
NOTE: The data set EMWS1.ENDGRP_PATH has 11 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 11 observations read from the data set EMWS1.ENDGRP_PATH.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: Deleting EMWS1.ENDGRP_PATH (memtype=DATA).
NOTE: Deleting EMWS1.GRP_LOOP (memtype=CATALOG).
NOTE: Deleting EMWS1.TREE5_LOOP (memtype=CATALOG).
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='TARGET';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: %INCLUDE (level 1) file EMFLOW is file D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas.
15700 +*------------------------------------------------------------*;
15701 +* EndGrp: ;
15702 +* User: Divya;
15703 +* Date: 23NOV16: 03:23;
15704 +*------------------------------------------------------------* ;
15705 +* Ensemble Code;
15706 +*------------------------------------------------------------* ;
15707 +* Bagging: Loop=1;
15708 +* Temporary Variables;
15709 +drop _BagVar1;
15710 +_BagVar1 = 0;
15711 +drop _BagVar2;
15712 +_BagVar2 = 0;
15713 +*------------------------------------------------------------*;
15714 +* Grp: StartGroup;
15715 +* User: Divya;
15716 +* Date: 23NOV16: 03:23;
15717 +* Bagging: Loop=1;
15718 +*------------------------------------------------------------*;
15719 +*------------------------------------------------------------*;
15720 +* Tree5: DecisionTree;
15721 +* User: Divya;
15722 +* Date: 23NOV16: 03:23;
15723 +* Bagging: Loop=1;
15724 +*------------------------------------------------------------*;
15725 +****************************************************************;
15726 +******             DECISION TREE SCORING CODE             ******;
15727 +****************************************************************;
15728 +
15729 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
15730 +LENGTH F_Contributed_To_Accident  $    3;
15731 +LENGTH I_Contributed_To_Accident  $    3;
15732 +LENGTH U_Contributed_To_Accident  $    3;
15733 +LENGTH _WARN_  $    4;
15734 +
15735 +******              LABELS FOR NEW VARIABLES              ******;
15736 +label _NODE_ = 'Node' ;
15737 +label _LEAF_ = 'Leaf' ;
15738 +label P_Contributed_To_AccidentYes =
15739 +'Predicted: Contributed_To_Accident=Yes' ;
15740 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
15741 +label Q_Contributed_To_AccidentYes =
15742 +'Unadjusted P: Contributed_To_Accident=Yes' ;
15743 +label Q_Contributed_To_AccidentNo =
15744 +'Unadjusted P: Contributed_To_Accident=No' ;
15745 +label V_Contributed_To_AccidentYes =
15746 +'Validated: Contributed_To_Accident=Yes' ;
15747 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
15748 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
15749 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
15750 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
15751 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
15752 +label U_Contributed_To_Accident =
15753 +'Unnormalized Into: Contributed_To_Accident' ;
15754 +label _WARN_ = 'Warnings' ;
15755 +
15756 +
15757 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
15758 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
15759 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
15760 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
15761 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
15762 +
15763 +
15764 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
15765 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
15766 +
15767 +******             ASSIGN OBSERVATION TO NODE             ******;
15768 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
15769 + %DMNORMIP( _ARBFMT_12);
15770 +IF _ARBFMT_12 IN ('3' ) THEN DO;
15771 +  _NODE_  =                    3;
15772 +  _LEAF_  =                    4;
15773 +  P_Contributed_To_AccidentYes  =     0.96969696969696;
15774 +  P_Contributed_To_AccidentNo  =     0.03030303030303;
15775 +  Q_Contributed_To_AccidentYes  =     0.96969696969696;
15776 +  Q_Contributed_To_AccidentNo  =     0.03030303030303;
15777 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
15778 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
15779 +  I_Contributed_To_Accident  = 'YES' ;
15780 +  U_Contributed_To_Accident  = 'Yes' ;
15781 +  END;
15782 +ELSE DO;
15783 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
15784 +   %DMNORMIP( _ARBFMT_12);
15785 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
15786 +    _NODE_  =                    5;
15787 +    _LEAF_  =                    3;
15788 +    P_Contributed_To_AccidentYes  =      0.9763779527559;
15789 +    P_Contributed_To_AccidentNo  =     0.02362204724409;
15790 +    Q_Contributed_To_AccidentYes  =      0.9763779527559;
15791 +    Q_Contributed_To_AccidentNo  =     0.02362204724409;
15792 +    V_Contributed_To_AccidentYes  =                    0;
15793 +    V_Contributed_To_AccidentNo  =                    0;
15794 +    I_Contributed_To_Accident  = 'YES' ;
15795 +    U_Contributed_To_Accident  = 'Yes' ;
15796 +    END;
15797 +  ELSE DO;
15798 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
15799 +     %DMNORMIP( _ARBFMT_12);
15800 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
15801 +      _NODE_  =                    7;
15802 +      _LEAF_  =                    2;
15803 +      P_Contributed_To_AccidentYes  =     0.18579234972677;
15804 +      P_Contributed_To_AccidentNo  =     0.81420765027322;
15805 +      Q_Contributed_To_AccidentYes  =     0.18579234972677;
15806 +      Q_Contributed_To_AccidentNo  =     0.81420765027322;
15807 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
15808 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
15809 +      I_Contributed_To_Accident  = 'NO' ;
15810 +      U_Contributed_To_Accident  = 'No' ;
15811 +      END;
15812 +    ELSE DO;
15813 +      _NODE_  =                    6;
15814 +      _LEAF_  =                    1;
15815 +      P_Contributed_To_AccidentYes  =     0.38775510204081;
15816 +      P_Contributed_To_AccidentNo  =     0.61224489795918;
15817 +      Q_Contributed_To_AccidentYes  =     0.38775510204081;
15818 +      Q_Contributed_To_AccidentNo  =     0.61224489795918;
15819 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
15820 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
15821 +      I_Contributed_To_Accident  = 'NO' ;
15822 +      U_Contributed_To_Accident  = 'No' ;
15823 +      END;
15824 +    END;
15825 +  END;
15826 +
15827 +*****  RESIDUALS R_ *************;
15828 +IF  F_Contributed_To_Accident  NE 'YES'
15829 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
15830 +        R_Contributed_To_AccidentYes  = .;
15831 +        R_Contributed_To_AccidentNo  = .;
15832 + END;
15833 + ELSE DO;
15834 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
15835 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
15836 +       SELECT( F_Contributed_To_Accident  );
15837 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
15838 +        R_Contributed_To_AccidentYes  +1;
15839 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
15840 +        R_Contributed_To_AccidentNo  +1;
15841 +       END;
15842 + END;
15843 +
15844 +****************************************************************;
15845 +******          END OF DECISION TREE SCORING CODE         ******;
15846 +****************************************************************;
15847 +
15848 +drop _LEAF_;
15849 +*------------------------------------------------------------*;
15850 +* EndGrp: EndGroup;
15851 +* User: Divya;
15852 +* Date: 23NOV16: 03:23;
15853 +* Bagging: Loop=1;
15854 +*------------------------------------------------------------*;
15855 +*------------------------------------------------------------*;
15856 +* Bagging: Saving Probabilities for Next Iteration;
15857 +*------------------------------------------------------------*;
15858 +_BagVar1 = P_Contributed_To_AccidentYes;
15859 +_BagVar2 = P_Contributed_To_AccidentNo;
15860 +*------------------------------------------------------------*;
15861 +* Grp: StartGroup;
15862 +* User: Divya;
15863 +* Date: 23NOV16: 03:23;
15864 +* Bagging: Loop=2;
15865 +*------------------------------------------------------------*;
15866 +*------------------------------------------------------------*;
15867 +* Tree5: DecisionTree;
15868 +* User: Divya;
15869 +* Date: 23NOV16: 03:23;
15870 +* Bagging: Loop=2;
15871 +*------------------------------------------------------------*;
15872 +****************************************************************;
15873 +******             DECISION TREE SCORING CODE             ******;
15874 +****************************************************************;
15875 +
15876 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
15877 +LENGTH F_Contributed_To_Accident  $    3;
15878 +LENGTH I_Contributed_To_Accident  $    3;
15879 +LENGTH U_Contributed_To_Accident  $    3;
15880 +LENGTH _WARN_  $    4;
15881 +
15882 +******              LABELS FOR NEW VARIABLES              ******;
15883 +label _NODE_ = 'Node' ;
15884 +label _LEAF_ = 'Leaf' ;
15885 +label P_Contributed_To_AccidentYes =
15886 +'Predicted: Contributed_To_Accident=Yes' ;
15887 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
15888 +label Q_Contributed_To_AccidentYes =
15889 +'Unadjusted P: Contributed_To_Accident=Yes' ;
15890 +label Q_Contributed_To_AccidentNo =
15891 +'Unadjusted P: Contributed_To_Accident=No' ;
15892 +label V_Contributed_To_AccidentYes =
15893 +'Validated: Contributed_To_Accident=Yes' ;
15894 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
15895 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
15896 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
15897 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
15898 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
15899 +label U_Contributed_To_Accident =
15900 +'Unnormalized Into: Contributed_To_Accident' ;
15901 +label _WARN_ = 'Warnings' ;
15902 +
15903 +
15904 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
15905 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
15906 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
15907 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
15908 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
15909 +
15910 +
15911 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
15912 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
15913 +
15914 +******             ASSIGN OBSERVATION TO NODE             ******;
15915 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
15916 + %DMNORMIP( _ARBFMT_12);
15917 +IF _ARBFMT_12 IN ('3' ) THEN DO;
15918 +  _NODE_  =                    3;
15919 +  _LEAF_  =                    4;
15920 +  P_Contributed_To_AccidentYes  =     0.98561151079136;
15921 +  P_Contributed_To_AccidentNo  =     0.01438848920863;
15922 +  Q_Contributed_To_AccidentYes  =     0.98561151079136;
15923 +  Q_Contributed_To_AccidentNo  =     0.01438848920863;
15924 +  V_Contributed_To_AccidentYes  =                    0;
15925 +  V_Contributed_To_AccidentNo  =                    0;
15926 +  I_Contributed_To_Accident  = 'YES' ;
15927 +  U_Contributed_To_Accident  = 'Yes' ;
15928 +  END;
15929 +ELSE DO;
15930 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
15931 +   %DMNORMIP( _ARBFMT_12);
15932 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
15933 +    _NODE_  =                    5;
15934 +    _LEAF_  =                    3;
15935 +    P_Contributed_To_AccidentYes  =     0.93421052631578;
15936 +    P_Contributed_To_AccidentNo  =     0.06578947368421;
15937 +    Q_Contributed_To_AccidentYes  =     0.93421052631578;
15938 +    Q_Contributed_To_AccidentNo  =     0.06578947368421;
15939 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
15940 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
15941 +    I_Contributed_To_Accident  = 'YES' ;
15942 +    U_Contributed_To_Accident  = 'Yes' ;
15943 +    END;
15944 +  ELSE DO;
15945 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
15946 +     %DMNORMIP( _ARBFMT_12);
15947 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
15948 +      _NODE_  =                    7;
15949 +      _LEAF_  =                    2;
15950 +      P_Contributed_To_AccidentYes  =     0.15028901734104;
15951 +      P_Contributed_To_AccidentNo  =     0.84971098265895;
15952 +      Q_Contributed_To_AccidentYes  =     0.15028901734104;
15953 +      Q_Contributed_To_AccidentNo  =     0.84971098265895;
15954 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
15955 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
15956 +      I_Contributed_To_Accident  = 'NO' ;
15957 +      U_Contributed_To_Accident  = 'No' ;
15958 +      END;
15959 +    ELSE DO;
15960 +      _NODE_  =                    6;
15961 +      _LEAF_  =                    1;
15962 +      P_Contributed_To_AccidentYes  =     0.34456928838951;
15963 +      P_Contributed_To_AccidentNo  =     0.65543071161048;
15964 +      Q_Contributed_To_AccidentYes  =     0.34456928838951;
15965 +      Q_Contributed_To_AccidentNo  =     0.65543071161048;
15966 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
15967 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
15968 +      I_Contributed_To_Accident  = 'NO' ;
15969 +      U_Contributed_To_Accident  = 'No' ;
15970 +      END;
15971 +    END;
15972 +  END;
15973 +
15974 +*****  RESIDUALS R_ *************;
15975 +IF  F_Contributed_To_Accident  NE 'YES'
15976 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
15977 +        R_Contributed_To_AccidentYes  = .;
15978 +        R_Contributed_To_AccidentNo  = .;
15979 + END;
15980 + ELSE DO;
15981 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
15982 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
15983 +       SELECT( F_Contributed_To_Accident  );
15984 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
15985 +        R_Contributed_To_AccidentYes  +1;
15986 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
15987 +        R_Contributed_To_AccidentNo  +1;
15988 +       END;
15989 + END;
15990 +
15991 +****************************************************************;
15992 +******          END OF DECISION TREE SCORING CODE         ******;
15993 +****************************************************************;
15994 +
15995 +drop _LEAF_;
15996 +*------------------------------------------------------------*;
15997 +* EndGrp: EndGroup;
15998 +* User: Divya;
15999 +* Date: 23NOV16: 03:23;
16000 +* Bagging: Loop=2;
16001 +*------------------------------------------------------------*;
16002 +*------------------------------------------------------------*;
16003 +* Bagging: accumulate probabilities for iteration: 2;
16004 +*------------------------------------------------------------*;
16005 +P_Contributed_To_AccidentYes = _BagVar1*(1/2) + P_Contributed_To_AccidentYes*(1/2);
16006 +P_Contributed_To_AccidentNo = _BagVar2*(1/2) + P_Contributed_To_AccidentNo*(1/2);
16007 +*------------------------------------------------------------*;
16008 +* Bagging: Saving Probabilities for Next Iteration;
16009 +*------------------------------------------------------------*;
16010 +_BagVar1 = P_Contributed_To_AccidentYes;
16011 +_BagVar2 = P_Contributed_To_AccidentNo;
16012 +*------------------------------------------------------------*;
16013 +* Grp: StartGroup;
16014 +* User: Divya;
16015 +* Date: 23NOV16: 03:24;
16016 +* Bagging: Loop=3;
16017 +*------------------------------------------------------------*;
16018 +*------------------------------------------------------------*;
16019 +* Tree5: DecisionTree;
16020 +* User: Divya;
16021 +* Date: 23NOV16: 03:24;
16022 +* Bagging: Loop=3;
16023 +*------------------------------------------------------------*;
16024 +****************************************************************;
16025 +******             DECISION TREE SCORING CODE             ******;
16026 +****************************************************************;
16027 +
16028 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16029 +LENGTH F_Contributed_To_Accident  $    3;
16030 +LENGTH I_Contributed_To_Accident  $    3;
16031 +LENGTH U_Contributed_To_Accident  $    3;
16032 +LENGTH _WARN_  $    4;
16033 +
16034 +******              LABELS FOR NEW VARIABLES              ******;
16035 +label _NODE_ = 'Node' ;
16036 +label _LEAF_ = 'Leaf' ;
16037 +label P_Contributed_To_AccidentYes =
16038 +'Predicted: Contributed_To_Accident=Yes' ;
16039 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16040 +label Q_Contributed_To_AccidentYes =
16041 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16042 +label Q_Contributed_To_AccidentNo =
16043 +'Unadjusted P: Contributed_To_Accident=No' ;
16044 +label V_Contributed_To_AccidentYes =
16045 +'Validated: Contributed_To_Accident=Yes' ;
16046 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16047 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16048 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16049 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16050 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16051 +label U_Contributed_To_Accident =
16052 +'Unnormalized Into: Contributed_To_Accident' ;
16053 +label _WARN_ = 'Warnings' ;
16054 +
16055 +
16056 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16057 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16058 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16059 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16060 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16061 +
16062 +
16063 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16064 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16065 +
16066 +******             ASSIGN OBSERVATION TO NODE             ******;
16067 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16068 + %DMNORMIP( _ARBFMT_12);
16069 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16070 +  _NODE_  =                    3;
16071 +  _LEAF_  =                    4;
16072 +  P_Contributed_To_AccidentYes  =     0.97902097902097;
16073 +  P_Contributed_To_AccidentNo  =     0.02097902097902;
16074 +  Q_Contributed_To_AccidentYes  =     0.97902097902097;
16075 +  Q_Contributed_To_AccidentNo  =     0.02097902097902;
16076 +  V_Contributed_To_AccidentYes  =                    0;
16077 +  V_Contributed_To_AccidentNo  =                    0;
16078 +  I_Contributed_To_Accident  = 'YES' ;
16079 +  U_Contributed_To_Accident  = 'Yes' ;
16080 +  END;
16081 +ELSE DO;
16082 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16083 +   %DMNORMIP( _ARBFMT_12);
16084 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16085 +    _NODE_  =                    5;
16086 +    _LEAF_  =                    3;
16087 +    P_Contributed_To_AccidentYes  =     0.94409937888198;
16088 +    P_Contributed_To_AccidentNo  =     0.05590062111801;
16089 +    Q_Contributed_To_AccidentYes  =     0.94409937888198;
16090 +    Q_Contributed_To_AccidentNo  =     0.05590062111801;
16091 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
16092 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
16093 +    I_Contributed_To_Accident  = 'YES' ;
16094 +    U_Contributed_To_Accident  = 'Yes' ;
16095 +    END;
16096 +  ELSE DO;
16097 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16098 +     %DMNORMIP( _ARBFMT_12);
16099 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16100 +      _NODE_  =                    7;
16101 +      _LEAF_  =                    2;
16102 +      P_Contributed_To_AccidentYes  =     0.18407960199004;
16103 +      P_Contributed_To_AccidentNo  =     0.81592039800995;
16104 +      Q_Contributed_To_AccidentYes  =     0.18407960199004;
16105 +      Q_Contributed_To_AccidentNo  =     0.81592039800995;
16106 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16107 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16108 +      I_Contributed_To_Accident  = 'NO' ;
16109 +      U_Contributed_To_Accident  = 'No' ;
16110 +      END;
16111 +    ELSE DO;
16112 +      _NODE_  =                    6;
16113 +      _LEAF_  =                    1;
16114 +      P_Contributed_To_AccidentYes  =     0.35091277890466;
16115 +      P_Contributed_To_AccidentNo  =     0.64908722109533;
16116 +      Q_Contributed_To_AccidentYes  =     0.35091277890466;
16117 +      Q_Contributed_To_AccidentNo  =     0.64908722109533;
16118 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16119 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16120 +      I_Contributed_To_Accident  = 'NO' ;
16121 +      U_Contributed_To_Accident  = 'No' ;
16122 +      END;
16123 +    END;
16124 +  END;
16125 +
16126 +*****  RESIDUALS R_ *************;
16127 +IF  F_Contributed_To_Accident  NE 'YES'
16128 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16129 +        R_Contributed_To_AccidentYes  = .;
16130 +        R_Contributed_To_AccidentNo  = .;
16131 + END;
16132 + ELSE DO;
16133 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16134 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16135 +       SELECT( F_Contributed_To_Accident  );
16136 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16137 +        R_Contributed_To_AccidentYes  +1;
16138 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16139 +        R_Contributed_To_AccidentNo  +1;
16140 +       END;
16141 + END;
16142 +
16143 +****************************************************************;
16144 +******          END OF DECISION TREE SCORING CODE         ******;
16145 +****************************************************************;
16146 +
16147 +drop _LEAF_;
16148 +*------------------------------------------------------------*;
16149 +* EndGrp: EndGroup;
16150 +* User: Divya;
16151 +* Date: 23NOV16: 03:24;
16152 +* Bagging: Loop=3;
16153 +*------------------------------------------------------------*;
16154 +*------------------------------------------------------------*;
16155 +* Bagging: accumulate probabilities for iteration: 3;
16156 +*------------------------------------------------------------*;
16157 +P_Contributed_To_AccidentYes = _BagVar1*(2/3) + P_Contributed_To_AccidentYes*(1/3);
16158 +P_Contributed_To_AccidentNo = _BagVar2*(2/3) + P_Contributed_To_AccidentNo*(1/3);
16159 +*------------------------------------------------------------*;
16160 +* Bagging: Saving Probabilities for Next Iteration;
16161 +*------------------------------------------------------------*;
16162 +_BagVar1 = P_Contributed_To_AccidentYes;
16163 +_BagVar2 = P_Contributed_To_AccidentNo;
16164 +*------------------------------------------------------------*;
16165 +* Grp: StartGroup;
16166 +* User: Divya;
16167 +* Date: 23NOV16: 03:24;
16168 +* Bagging: Loop=4;
16169 +*------------------------------------------------------------*;
16170 +*------------------------------------------------------------*;
16171 +* Tree5: DecisionTree;
16172 +* User: Divya;
16173 +* Date: 23NOV16: 03:24;
16174 +* Bagging: Loop=4;
16175 +*------------------------------------------------------------*;
16176 +****************************************************************;
16177 +******             DECISION TREE SCORING CODE             ******;
16178 +****************************************************************;
16179 +
16180 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16181 +LENGTH F_Contributed_To_Accident  $    3;
16182 +LENGTH I_Contributed_To_Accident  $    3;
16183 +LENGTH U_Contributed_To_Accident  $    3;
16184 +LENGTH _WARN_  $    4;
16185 +
16186 +******              LABELS FOR NEW VARIABLES              ******;
16187 +label _NODE_ = 'Node' ;
16188 +label _LEAF_ = 'Leaf' ;
16189 +label P_Contributed_To_AccidentYes =
16190 +'Predicted: Contributed_To_Accident=Yes' ;
16191 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16192 +label Q_Contributed_To_AccidentYes =
16193 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16194 +label Q_Contributed_To_AccidentNo =
16195 +'Unadjusted P: Contributed_To_Accident=No' ;
16196 +label V_Contributed_To_AccidentYes =
16197 +'Validated: Contributed_To_Accident=Yes' ;
16198 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16199 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16200 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16201 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16202 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16203 +label U_Contributed_To_Accident =
16204 +'Unnormalized Into: Contributed_To_Accident' ;
16205 +label _WARN_ = 'Warnings' ;
16206 +
16207 +
16208 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16209 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16210 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16211 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16212 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16213 +
16214 +
16215 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16216 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16217 +
16218 +******             ASSIGN OBSERVATION TO NODE             ******;
16219 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16220 + %DMNORMIP( _ARBFMT_12);
16221 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16222 +  _NODE_  =                    3;
16223 +  _LEAF_  =                    4;
16224 +  P_Contributed_To_AccidentYes  =     0.93491124260355;
16225 +  P_Contributed_To_AccidentNo  =     0.06508875739644;
16226 +  Q_Contributed_To_AccidentYes  =     0.93491124260355;
16227 +  Q_Contributed_To_AccidentNo  =     0.06508875739644;
16228 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16229 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16230 +  I_Contributed_To_Accident  = 'YES' ;
16231 +  U_Contributed_To_Accident  = 'Yes' ;
16232 +  END;
16233 +ELSE DO;
16234 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16235 +   %DMNORMIP( _ARBFMT_12);
16236 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16237 +    _NODE_  =                    5;
16238 +    _LEAF_  =                    3;
16239 +    P_Contributed_To_AccidentYes  =     0.94776119402985;
16240 +    P_Contributed_To_AccidentNo  =     0.05223880597014;
16241 +    Q_Contributed_To_AccidentYes  =     0.94776119402985;
16242 +    Q_Contributed_To_AccidentNo  =     0.05223880597014;
16243 +    V_Contributed_To_AccidentYes  =                    0;
16244 +    V_Contributed_To_AccidentNo  =                    0;
16245 +    I_Contributed_To_Accident  = 'YES' ;
16246 +    U_Contributed_To_Accident  = 'Yes' ;
16247 +    END;
16248 +  ELSE DO;
16249 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16250 +     %DMNORMIP( _ARBFMT_12);
16251 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16252 +      _NODE_  =                    7;
16253 +      _LEAF_  =                    2;
16254 +      P_Contributed_To_AccidentYes  =     0.13333333333333;
16255 +      P_Contributed_To_AccidentNo  =     0.86666666666666;
16256 +      Q_Contributed_To_AccidentYes  =     0.13333333333333;
16257 +      Q_Contributed_To_AccidentNo  =     0.86666666666666;
16258 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16259 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16260 +      I_Contributed_To_Accident  = 'NO' ;
16261 +      U_Contributed_To_Accident  = 'No' ;
16262 +      END;
16263 +    ELSE DO;
16264 +      _NODE_  =                    6;
16265 +      _LEAF_  =                    1;
16266 +      P_Contributed_To_AccidentYes  =     0.37358490566037;
16267 +      P_Contributed_To_AccidentNo  =     0.62641509433962;
16268 +      Q_Contributed_To_AccidentYes  =     0.37358490566037;
16269 +      Q_Contributed_To_AccidentNo  =     0.62641509433962;
16270 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16271 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16272 +      I_Contributed_To_Accident  = 'NO' ;
16273 +      U_Contributed_To_Accident  = 'No' ;
16274 +      END;
16275 +    END;
16276 +  END;
16277 +
16278 +*****  RESIDUALS R_ *************;
16279 +IF  F_Contributed_To_Accident  NE 'YES'
16280 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16281 +        R_Contributed_To_AccidentYes  = .;
16282 +        R_Contributed_To_AccidentNo  = .;
16283 + END;
16284 + ELSE DO;
16285 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16286 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16287 +       SELECT( F_Contributed_To_Accident  );
16288 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16289 +        R_Contributed_To_AccidentYes  +1;
16290 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16291 +        R_Contributed_To_AccidentNo  +1;
16292 +       END;
16293 + END;
16294 +
16295 +****************************************************************;
16296 +******          END OF DECISION TREE SCORING CODE         ******;
16297 +****************************************************************;
16298 +
16299 +drop _LEAF_;
16300 +*------------------------------------------------------------*;
16301 +* EndGrp: EndGroup;
16302 +* User: Divya;
16303 +* Date: 23NOV16: 03:24;
16304 +* Bagging: Loop=4;
16305 +*------------------------------------------------------------*;
16306 +*------------------------------------------------------------*;
16307 +* Bagging: accumulate probabilities for iteration: 4;
16308 +*------------------------------------------------------------*;
16309 +P_Contributed_To_AccidentYes = _BagVar1*(3/4) + P_Contributed_To_AccidentYes*(1/4);
16310 +P_Contributed_To_AccidentNo = _BagVar2*(3/4) + P_Contributed_To_AccidentNo*(1/4);
16311 +*------------------------------------------------------------*;
16312 +* Bagging: Saving Probabilities for Next Iteration;
16313 +*------------------------------------------------------------*;
16314 +_BagVar1 = P_Contributed_To_AccidentYes;
16315 +_BagVar2 = P_Contributed_To_AccidentNo;
16316 +*------------------------------------------------------------*;
16317 +* Grp: StartGroup;
16318 +* User: Divya;
16319 +* Date: 23NOV16: 03:25;
16320 +* Bagging: Loop=5;
16321 +*------------------------------------------------------------*;
16322 +*------------------------------------------------------------*;
16323 +* Tree5: DecisionTree;
16324 +* User: Divya;
16325 +* Date: 23NOV16: 03:25;
16326 +* Bagging: Loop=5;
16327 +*------------------------------------------------------------*;
16328 +****************************************************************;
16329 +******             DECISION TREE SCORING CODE             ******;
16330 +****************************************************************;
16331 +
16332 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16333 +LENGTH F_Contributed_To_Accident  $    3;
16334 +LENGTH I_Contributed_To_Accident  $    3;
16335 +LENGTH U_Contributed_To_Accident  $    3;
16336 +LENGTH _WARN_  $    4;
16337 +
16338 +******              LABELS FOR NEW VARIABLES              ******;
16339 +label _NODE_ = 'Node' ;
16340 +label _LEAF_ = 'Leaf' ;
16341 +label P_Contributed_To_AccidentYes =
16342 +'Predicted: Contributed_To_Accident=Yes' ;
16343 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16344 +label Q_Contributed_To_AccidentYes =
16345 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16346 +label Q_Contributed_To_AccidentNo =
16347 +'Unadjusted P: Contributed_To_Accident=No' ;
16348 +label V_Contributed_To_AccidentYes =
16349 +'Validated: Contributed_To_Accident=Yes' ;
16350 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16351 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16352 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16353 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16354 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16355 +label U_Contributed_To_Accident =
16356 +'Unnormalized Into: Contributed_To_Accident' ;
16357 +label _WARN_ = 'Warnings' ;
16358 +
16359 +
16360 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16361 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16362 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16363 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16364 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16365 +
16366 +
16367 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16368 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16369 +
16370 +******             ASSIGN OBSERVATION TO NODE             ******;
16371 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16372 + %DMNORMIP( _ARBFMT_12);
16373 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16374 +  _NODE_  =                    3;
16375 +  _LEAF_  =                    4;
16376 +  P_Contributed_To_AccidentYes  =      0.9217877094972;
16377 +  P_Contributed_To_AccidentNo  =     0.07821229050279;
16378 +  Q_Contributed_To_AccidentYes  =      0.9217877094972;
16379 +  Q_Contributed_To_AccidentNo  =     0.07821229050279;
16380 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16381 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16382 +  I_Contributed_To_Accident  = 'YES' ;
16383 +  U_Contributed_To_Accident  = 'Yes' ;
16384 +  END;
16385 +ELSE DO;
16386 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16387 +   %DMNORMIP( _ARBFMT_12);
16388 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16389 +    _NODE_  =                    5;
16390 +    _LEAF_  =                    3;
16391 +    P_Contributed_To_AccidentYes  =                    1;
16392 +    P_Contributed_To_AccidentNo  =                    0;
16393 +    Q_Contributed_To_AccidentYes  =                    1;
16394 +    Q_Contributed_To_AccidentNo  =                    0;
16395 +    V_Contributed_To_AccidentYes  =                    0;
16396 +    V_Contributed_To_AccidentNo  =                    0;
16397 +    I_Contributed_To_Accident  = 'YES' ;
16398 +    U_Contributed_To_Accident  = 'Yes' ;
16399 +    END;
16400 +  ELSE DO;
16401 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16402 +     %DMNORMIP( _ARBFMT_12);
16403 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16404 +      _NODE_  =                    7;
16405 +      _LEAF_  =                    2;
16406 +      P_Contributed_To_AccidentYes  =     0.13089005235602;
16407 +      P_Contributed_To_AccidentNo  =     0.86910994764397;
16408 +      Q_Contributed_To_AccidentYes  =     0.13089005235602;
16409 +      Q_Contributed_To_AccidentNo  =     0.86910994764397;
16410 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16411 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16412 +      I_Contributed_To_Accident  = 'NO' ;
16413 +      U_Contributed_To_Accident  = 'No' ;
16414 +      END;
16415 +    ELSE DO;
16416 +      _NODE_  =                    6;
16417 +      _LEAF_  =                    1;
16418 +      P_Contributed_To_AccidentYes  =          0.322265625;
16419 +      P_Contributed_To_AccidentNo  =          0.677734375;
16420 +      Q_Contributed_To_AccidentYes  =          0.322265625;
16421 +      Q_Contributed_To_AccidentNo  =          0.677734375;
16422 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16423 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16424 +      I_Contributed_To_Accident  = 'NO' ;
16425 +      U_Contributed_To_Accident  = 'No' ;
16426 +      END;
16427 +    END;
16428 +  END;
16429 +
16430 +*****  RESIDUALS R_ *************;
16431 +IF  F_Contributed_To_Accident  NE 'YES'
16432 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16433 +        R_Contributed_To_AccidentYes  = .;
16434 +        R_Contributed_To_AccidentNo  = .;
16435 + END;
16436 + ELSE DO;
16437 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16438 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16439 +       SELECT( F_Contributed_To_Accident  );
16440 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16441 +        R_Contributed_To_AccidentYes  +1;
16442 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16443 +        R_Contributed_To_AccidentNo  +1;
16444 +       END;
16445 + END;
16446 +
16447 +****************************************************************;
16448 +******          END OF DECISION TREE SCORING CODE         ******;
16449 +****************************************************************;
16450 +
16451 +drop _LEAF_;
16452 +*------------------------------------------------------------*;
16453 +* EndGrp: EndGroup;
16454 +* User: Divya;
16455 +* Date: 23NOV16: 03:25;
16456 +* Bagging: Loop=5;
16457 +*------------------------------------------------------------*;
16458 +*------------------------------------------------------------*;
16459 +* Bagging: accumulate probabilities for iteration: 5;
16460 +*------------------------------------------------------------*;
16461 +P_Contributed_To_AccidentYes = _BagVar1*(4/5) + P_Contributed_To_AccidentYes*(1/5);
16462 +P_Contributed_To_AccidentNo = _BagVar2*(4/5) + P_Contributed_To_AccidentNo*(1/5);
16463 +*------------------------------------------------------------*;
16464 +* Bagging: Saving Probabilities for Next Iteration;
16465 +*------------------------------------------------------------*;
16466 +_BagVar1 = P_Contributed_To_AccidentYes;
16467 +_BagVar2 = P_Contributed_To_AccidentNo;
16468 +*------------------------------------------------------------*;
16469 +* Grp: StartGroup;
16470 +* User: Divya;
16471 +* Date: 23NOV16: 03:25;
16472 +* Bagging: Loop=6;
16473 +*------------------------------------------------------------*;
16474 +*------------------------------------------------------------*;
16475 +* Tree5: DecisionTree;
16476 +* User: Divya;
16477 +* Date: 23NOV16: 03:25;
16478 +* Bagging: Loop=6;
16479 +*------------------------------------------------------------*;
16480 +****************************************************************;
16481 +******             DECISION TREE SCORING CODE             ******;
16482 +****************************************************************;
16483 +
16484 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16485 +LENGTH F_Contributed_To_Accident  $    3;
16486 +LENGTH I_Contributed_To_Accident  $    3;
16487 +LENGTH U_Contributed_To_Accident  $    3;
16488 +LENGTH _WARN_  $    4;
16489 +
16490 +******              LABELS FOR NEW VARIABLES              ******;
16491 +label _NODE_ = 'Node' ;
16492 +label _LEAF_ = 'Leaf' ;
16493 +label P_Contributed_To_AccidentYes =
16494 +'Predicted: Contributed_To_Accident=Yes' ;
16495 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16496 +label Q_Contributed_To_AccidentYes =
16497 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16498 +label Q_Contributed_To_AccidentNo =
16499 +'Unadjusted P: Contributed_To_Accident=No' ;
16500 +label V_Contributed_To_AccidentYes =
16501 +'Validated: Contributed_To_Accident=Yes' ;
16502 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16503 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16504 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16505 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16506 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16507 +label U_Contributed_To_Accident =
16508 +'Unnormalized Into: Contributed_To_Accident' ;
16509 +label _WARN_ = 'Warnings' ;
16510 +
16511 +
16512 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16513 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16514 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16515 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16516 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16517 +
16518 +
16519 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16520 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16521 +
16522 +******             ASSIGN OBSERVATION TO NODE             ******;
16523 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16524 + %DMNORMIP( _ARBFMT_12);
16525 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16526 +  _NODE_  =                    3;
16527 +  _LEAF_  =                    4;
16528 +  P_Contributed_To_AccidentYes  =     0.94943820224719;
16529 +  P_Contributed_To_AccidentNo  =      0.0505617977528;
16530 +  Q_Contributed_To_AccidentYes  =     0.94943820224719;
16531 +  Q_Contributed_To_AccidentNo  =      0.0505617977528;
16532 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16533 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16534 +  I_Contributed_To_Accident  = 'YES' ;
16535 +  U_Contributed_To_Accident  = 'Yes' ;
16536 +  END;
16537 +ELSE DO;
16538 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16539 +   %DMNORMIP( _ARBFMT_12);
16540 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16541 +    _NODE_  =                    5;
16542 +    _LEAF_  =                    3;
16543 +    P_Contributed_To_AccidentYes  =                0.952;
16544 +    P_Contributed_To_AccidentNo  =                0.048;
16545 +    Q_Contributed_To_AccidentYes  =                0.952;
16546 +    Q_Contributed_To_AccidentNo  =                0.048;
16547 +    V_Contributed_To_AccidentYes  =                    0;
16548 +    V_Contributed_To_AccidentNo  =                    0;
16549 +    I_Contributed_To_Accident  = 'YES' ;
16550 +    U_Contributed_To_Accident  = 'Yes' ;
16551 +    END;
16552 +  ELSE DO;
16553 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16554 +     %DMNORMIP( _ARBFMT_12);
16555 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16556 +      _NODE_  =                    7;
16557 +      _LEAF_  =                    2;
16558 +      P_Contributed_To_AccidentYes  =     0.13775510204081;
16559 +      P_Contributed_To_AccidentNo  =     0.86224489795918;
16560 +      Q_Contributed_To_AccidentYes  =     0.13775510204081;
16561 +      Q_Contributed_To_AccidentNo  =     0.86224489795918;
16562 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16563 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16564 +      I_Contributed_To_Accident  = 'NO' ;
16565 +      U_Contributed_To_Accident  = 'No' ;
16566 +      END;
16567 +    ELSE DO;
16568 +      _NODE_  =                    6;
16569 +      _LEAF_  =                    1;
16570 +      P_Contributed_To_AccidentYes  =     0.34068136272545;
16571 +      P_Contributed_To_AccidentNo  =     0.65931863727454;
16572 +      Q_Contributed_To_AccidentYes  =     0.34068136272545;
16573 +      Q_Contributed_To_AccidentNo  =     0.65931863727454;
16574 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16575 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16576 +      I_Contributed_To_Accident  = 'NO' ;
16577 +      U_Contributed_To_Accident  = 'No' ;
16578 +      END;
16579 +    END;
16580 +  END;
16581 +
16582 +*****  RESIDUALS R_ *************;
16583 +IF  F_Contributed_To_Accident  NE 'YES'
16584 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16585 +        R_Contributed_To_AccidentYes  = .;
16586 +        R_Contributed_To_AccidentNo  = .;
16587 + END;
16588 + ELSE DO;
16589 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16590 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16591 +       SELECT( F_Contributed_To_Accident  );
16592 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16593 +        R_Contributed_To_AccidentYes  +1;
16594 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16595 +        R_Contributed_To_AccidentNo  +1;
16596 +       END;
16597 + END;
16598 +
16599 +****************************************************************;
16600 +******          END OF DECISION TREE SCORING CODE         ******;
16601 +****************************************************************;
16602 +
16603 +drop _LEAF_;
16604 +*------------------------------------------------------------*;
16605 +* EndGrp: EndGroup;
16606 +* User: Divya;
16607 +* Date: 23NOV16: 03:25;
16608 +* Bagging: Loop=6;
16609 +*------------------------------------------------------------*;
16610 +*------------------------------------------------------------*;
16611 +* Bagging: accumulate probabilities for iteration: 6;
16612 +*------------------------------------------------------------*;
16613 +P_Contributed_To_AccidentYes = _BagVar1*(5/6) + P_Contributed_To_AccidentYes*(1/6);
16614 +P_Contributed_To_AccidentNo = _BagVar2*(5/6) + P_Contributed_To_AccidentNo*(1/6);
16615 +*------------------------------------------------------------*;
16616 +* Bagging: Saving Probabilities for Next Iteration;
16617 +*------------------------------------------------------------*;
16618 +_BagVar1 = P_Contributed_To_AccidentYes;
16619 +_BagVar2 = P_Contributed_To_AccidentNo;
16620 +*------------------------------------------------------------*;
16621 +* Grp: StartGroup;
16622 +* User: Divya;
16623 +* Date: 23NOV16: 03:25;
16624 +* Bagging: Loop=7;
16625 +*------------------------------------------------------------*;
16626 +*------------------------------------------------------------*;
16627 +* Tree5: DecisionTree;
16628 +* User: Divya;
16629 +* Date: 23NOV16: 03:25;
16630 +* Bagging: Loop=7;
16631 +*------------------------------------------------------------*;
16632 +****************************************************************;
16633 +******             DECISION TREE SCORING CODE             ******;
16634 +****************************************************************;
16635 +
16636 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16637 +LENGTH F_Contributed_To_Accident  $    3;
16638 +LENGTH I_Contributed_To_Accident  $    3;
16639 +LENGTH U_Contributed_To_Accident  $    3;
16640 +LENGTH _WARN_  $    4;
16641 +
16642 +******              LABELS FOR NEW VARIABLES              ******;
16643 +label _NODE_ = 'Node' ;
16644 +label _LEAF_ = 'Leaf' ;
16645 +label P_Contributed_To_AccidentYes =
16646 +'Predicted: Contributed_To_Accident=Yes' ;
16647 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16648 +label Q_Contributed_To_AccidentYes =
16649 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16650 +label Q_Contributed_To_AccidentNo =
16651 +'Unadjusted P: Contributed_To_Accident=No' ;
16652 +label V_Contributed_To_AccidentYes =
16653 +'Validated: Contributed_To_Accident=Yes' ;
16654 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16655 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16656 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16657 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16658 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16659 +label U_Contributed_To_Accident =
16660 +'Unnormalized Into: Contributed_To_Accident' ;
16661 +label _WARN_ = 'Warnings' ;
16662 +
16663 +
16664 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16665 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16666 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16667 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16668 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16669 +
16670 +
16671 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16672 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16673 +
16674 +******             ASSIGN OBSERVATION TO NODE             ******;
16675 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16676 + %DMNORMIP( _ARBFMT_12);
16677 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16678 +  _NODE_  =                    3;
16679 +  _LEAF_  =                    4;
16680 +  P_Contributed_To_AccidentYes  =     0.96534653465346;
16681 +  P_Contributed_To_AccidentNo  =     0.03465346534653;
16682 +  Q_Contributed_To_AccidentYes  =     0.96534653465346;
16683 +  Q_Contributed_To_AccidentNo  =     0.03465346534653;
16684 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16685 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16686 +  I_Contributed_To_Accident  = 'YES' ;
16687 +  U_Contributed_To_Accident  = 'Yes' ;
16688 +  END;
16689 +ELSE DO;
16690 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16691 +   %DMNORMIP( _ARBFMT_12);
16692 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16693 +    _NODE_  =                    5;
16694 +    _LEAF_  =                    3;
16695 +    P_Contributed_To_AccidentYes  =     0.97872340425531;
16696 +    P_Contributed_To_AccidentNo  =     0.02127659574468;
16697 +    Q_Contributed_To_AccidentYes  =     0.97872340425531;
16698 +    Q_Contributed_To_AccidentNo  =     0.02127659574468;
16699 +    V_Contributed_To_AccidentYes  =                    0;
16700 +    V_Contributed_To_AccidentNo  =                    0;
16701 +    I_Contributed_To_Accident  = 'YES' ;
16702 +    U_Contributed_To_Accident  = 'Yes' ;
16703 +    END;
16704 +  ELSE DO;
16705 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16706 +     %DMNORMIP( _ARBFMT_12);
16707 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16708 +      _NODE_  =                    7;
16709 +      _LEAF_  =                    2;
16710 +      P_Contributed_To_AccidentYes  =     0.16216216216216;
16711 +      P_Contributed_To_AccidentNo  =     0.83783783783783;
16712 +      Q_Contributed_To_AccidentYes  =     0.16216216216216;
16713 +      Q_Contributed_To_AccidentNo  =     0.83783783783783;
16714 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16715 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16716 +      I_Contributed_To_Accident  = 'NO' ;
16717 +      U_Contributed_To_Accident  = 'No' ;
16718 +      END;
16719 +    ELSE DO;
16720 +      _NODE_  =                    6;
16721 +      _LEAF_  =                    1;
16722 +      P_Contributed_To_AccidentYes  =     0.36382978723404;
16723 +      P_Contributed_To_AccidentNo  =     0.63617021276595;
16724 +      Q_Contributed_To_AccidentYes  =     0.36382978723404;
16725 +      Q_Contributed_To_AccidentNo  =     0.63617021276595;
16726 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16727 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16728 +      I_Contributed_To_Accident  = 'NO' ;
16729 +      U_Contributed_To_Accident  = 'No' ;
16730 +      END;
16731 +    END;
16732 +  END;
16733 +
16734 +*****  RESIDUALS R_ *************;
16735 +IF  F_Contributed_To_Accident  NE 'YES'
16736 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16737 +        R_Contributed_To_AccidentYes  = .;
16738 +        R_Contributed_To_AccidentNo  = .;
16739 + END;
16740 + ELSE DO;
16741 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16742 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16743 +       SELECT( F_Contributed_To_Accident  );
16744 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16745 +        R_Contributed_To_AccidentYes  +1;
16746 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16747 +        R_Contributed_To_AccidentNo  +1;
16748 +       END;
16749 + END;
16750 +
16751 +****************************************************************;
16752 +******          END OF DECISION TREE SCORING CODE         ******;
16753 +****************************************************************;
16754 +
16755 +drop _LEAF_;
16756 +*------------------------------------------------------------*;
16757 +* EndGrp: EndGroup;
16758 +* User: Divya;
16759 +* Date: 23NOV16: 03:25;
16760 +* Bagging: Loop=7;
16761 +*------------------------------------------------------------*;
16762 +*------------------------------------------------------------*;
16763 +* Bagging: accumulate probabilities for iteration: 7;
16764 +*------------------------------------------------------------*;
16765 +P_Contributed_To_AccidentYes = _BagVar1*(6/7) + P_Contributed_To_AccidentYes*(1/7);
16766 +P_Contributed_To_AccidentNo = _BagVar2*(6/7) + P_Contributed_To_AccidentNo*(1/7);
16767 +*------------------------------------------------------------*;
16768 +* Bagging: Saving Probabilities for Next Iteration;
16769 +*------------------------------------------------------------*;
16770 +_BagVar1 = P_Contributed_To_AccidentYes;
16771 +_BagVar2 = P_Contributed_To_AccidentNo;
16772 +*------------------------------------------------------------*;
16773 +* Grp: StartGroup;
16774 +* User: Divya;
16775 +* Date: 23NOV16: 03:26;
16776 +* Bagging: Loop=8;
16777 +*------------------------------------------------------------*;
16778 +*------------------------------------------------------------*;
16779 +* Tree5: DecisionTree;
16780 +* User: Divya;
16781 +* Date: 23NOV16: 03:26;
16782 +* Bagging: Loop=8;
16783 +*------------------------------------------------------------*;
16784 +****************************************************************;
16785 +******             DECISION TREE SCORING CODE             ******;
16786 +****************************************************************;
16787 +
16788 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16789 +LENGTH F_Contributed_To_Accident  $    3;
16790 +LENGTH I_Contributed_To_Accident  $    3;
16791 +LENGTH U_Contributed_To_Accident  $    3;
16792 +LENGTH _WARN_  $    4;
16793 +
16794 +******              LABELS FOR NEW VARIABLES              ******;
16795 +label _NODE_ = 'Node' ;
16796 +label _LEAF_ = 'Leaf' ;
16797 +label P_Contributed_To_AccidentYes =
16798 +'Predicted: Contributed_To_Accident=Yes' ;
16799 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16800 +label Q_Contributed_To_AccidentYes =
16801 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16802 +label Q_Contributed_To_AccidentNo =
16803 +'Unadjusted P: Contributed_To_Accident=No' ;
16804 +label V_Contributed_To_AccidentYes =
16805 +'Validated: Contributed_To_Accident=Yes' ;
16806 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16807 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16808 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16809 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16810 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16811 +label U_Contributed_To_Accident =
16812 +'Unnormalized Into: Contributed_To_Accident' ;
16813 +label _WARN_ = 'Warnings' ;
16814 +
16815 +
16816 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16817 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16818 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16819 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16820 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16821 +
16822 +
16823 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16824 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16825 +
16826 +******             ASSIGN OBSERVATION TO NODE             ******;
16827 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16828 + %DMNORMIP( _ARBFMT_12);
16829 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16830 +  _NODE_  =                    3;
16831 +  _LEAF_  =                    4;
16832 +  P_Contributed_To_AccidentYes  =     0.96511627906976;
16833 +  P_Contributed_To_AccidentNo  =     0.03488372093023;
16834 +  Q_Contributed_To_AccidentYes  =     0.96511627906976;
16835 +  Q_Contributed_To_AccidentNo  =     0.03488372093023;
16836 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16837 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16838 +  I_Contributed_To_Accident  = 'YES' ;
16839 +  U_Contributed_To_Accident  = 'Yes' ;
16840 +  END;
16841 +ELSE DO;
16842 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16843 +   %DMNORMIP( _ARBFMT_12);
16844 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16845 +    _NODE_  =                    5;
16846 +    _LEAF_  =                    3;
16847 +    P_Contributed_To_AccidentYes  =     0.97826086956521;
16848 +    P_Contributed_To_AccidentNo  =     0.02173913043478;
16849 +    Q_Contributed_To_AccidentYes  =     0.97826086956521;
16850 +    Q_Contributed_To_AccidentNo  =     0.02173913043478;
16851 +    V_Contributed_To_AccidentYes  =                    0;
16852 +    V_Contributed_To_AccidentNo  =                    0;
16853 +    I_Contributed_To_Accident  = 'YES' ;
16854 +    U_Contributed_To_Accident  = 'Yes' ;
16855 +    END;
16856 +  ELSE DO;
16857 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16858 +     %DMNORMIP( _ARBFMT_12);
16859 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16860 +      _NODE_  =                    9;
16861 +      _LEAF_  =                    2;
16862 +      P_Contributed_To_AccidentYes  =     0.18539325842696;
16863 +      P_Contributed_To_AccidentNo  =     0.81460674157303;
16864 +      Q_Contributed_To_AccidentYes  =     0.18539325842696;
16865 +      Q_Contributed_To_AccidentNo  =     0.81460674157303;
16866 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16867 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16868 +      I_Contributed_To_Accident  = 'NO' ;
16869 +      U_Contributed_To_Accident  = 'No' ;
16870 +      END;
16871 +    ELSE DO;
16872 +      _NODE_  =                    8;
16873 +      _LEAF_  =                    1;
16874 +      P_Contributed_To_AccidentYes  =     0.32941176470588;
16875 +      P_Contributed_To_AccidentNo  =     0.67058823529411;
16876 +      Q_Contributed_To_AccidentYes  =     0.32941176470588;
16877 +      Q_Contributed_To_AccidentNo  =     0.67058823529411;
16878 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16879 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16880 +      I_Contributed_To_Accident  = 'NO' ;
16881 +      U_Contributed_To_Accident  = 'No' ;
16882 +      END;
16883 +    END;
16884 +  END;
16885 +
16886 +*****  RESIDUALS R_ *************;
16887 +IF  F_Contributed_To_Accident  NE 'YES'
16888 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16889 +        R_Contributed_To_AccidentYes  = .;
16890 +        R_Contributed_To_AccidentNo  = .;
16891 + END;
16892 + ELSE DO;
16893 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16894 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16895 +       SELECT( F_Contributed_To_Accident  );
16896 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16897 +        R_Contributed_To_AccidentYes  +1;
16898 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16899 +        R_Contributed_To_AccidentNo  +1;
16900 +       END;
16901 + END;
16902 +
16903 +****************************************************************;
16904 +******          END OF DECISION TREE SCORING CODE         ******;
16905 +****************************************************************;
16906 +
16907 +drop _LEAF_;
16908 +*------------------------------------------------------------*;
16909 +* EndGrp: EndGroup;
16910 +* User: Divya;
16911 +* Date: 23NOV16: 03:26;
16912 +* Bagging: Loop=8;
16913 +*------------------------------------------------------------*;
16914 +*------------------------------------------------------------*;
16915 +* Bagging: accumulate probabilities for iteration: 8;
16916 +*------------------------------------------------------------*;
16917 +P_Contributed_To_AccidentYes = _BagVar1*(7/8) + P_Contributed_To_AccidentYes*(1/8);
16918 +P_Contributed_To_AccidentNo = _BagVar2*(7/8) + P_Contributed_To_AccidentNo*(1/8);
16919 +*------------------------------------------------------------*;
16920 +* Bagging: Saving Probabilities for Next Iteration;
16921 +*------------------------------------------------------------*;
16922 +_BagVar1 = P_Contributed_To_AccidentYes;
16923 +_BagVar2 = P_Contributed_To_AccidentNo;
16924 +*------------------------------------------------------------*;
16925 +* Grp: StartGroup;
16926 +* User: Divya;
16927 +* Date: 23NOV16: 03:26;
16928 +* Bagging: Loop=9;
16929 +*------------------------------------------------------------*;
16930 +*------------------------------------------------------------*;
16931 +* Tree5: DecisionTree;
16932 +* User: Divya;
16933 +* Date: 23NOV16: 03:26;
16934 +* Bagging: Loop=9;
16935 +*------------------------------------------------------------*;
16936 +****************************************************************;
16937 +******             DECISION TREE SCORING CODE             ******;
16938 +****************************************************************;
16939 +
16940 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16941 +LENGTH F_Contributed_To_Accident  $    3;
16942 +LENGTH I_Contributed_To_Accident  $    3;
16943 +LENGTH U_Contributed_To_Accident  $    3;
16944 +LENGTH _WARN_  $    4;
16945 +
16946 +******              LABELS FOR NEW VARIABLES              ******;
16947 +label _NODE_ = 'Node' ;
16948 +label _LEAF_ = 'Leaf' ;
16949 +label P_Contributed_To_AccidentYes =
16950 +'Predicted: Contributed_To_Accident=Yes' ;
16951 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16952 +label Q_Contributed_To_AccidentYes =
16953 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16954 +label Q_Contributed_To_AccidentNo =
16955 +'Unadjusted P: Contributed_To_Accident=No' ;
16956 +label V_Contributed_To_AccidentYes =
16957 +'Validated: Contributed_To_Accident=Yes' ;
16958 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16959 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16960 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16961 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16962 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16963 +label U_Contributed_To_Accident =
16964 +'Unnormalized Into: Contributed_To_Accident' ;
16965 +label _WARN_ = 'Warnings' ;
16966 +
16967 +
16968 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16969 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16970 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16971 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16972 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16973 +
16974 +
16975 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16976 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16977 +
16978 +******             ASSIGN OBSERVATION TO NODE             ******;
16979 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16980 + %DMNORMIP( _ARBFMT_12);
16981 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16982 +  _NODE_  =                    3;
16983 +  _LEAF_  =                    4;
16984 +  P_Contributed_To_AccidentYes  =     0.96174863387978;
16985 +  P_Contributed_To_AccidentNo  =     0.03825136612021;
16986 +  Q_Contributed_To_AccidentYes  =     0.96174863387978;
16987 +  Q_Contributed_To_AccidentNo  =     0.03825136612021;
16988 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16989 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16990 +  I_Contributed_To_Accident  = 'YES' ;
16991 +  U_Contributed_To_Accident  = 'Yes' ;
16992 +  END;
16993 +ELSE DO;
16994 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16995 +   %DMNORMIP( _ARBFMT_12);
16996 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16997 +    _NODE_  =                    5;
16998 +    _LEAF_  =                    3;
16999 +    P_Contributed_To_AccidentYes  =     0.97391304347826;
17000 +    P_Contributed_To_AccidentNo  =     0.02608695652173;
17001 +    Q_Contributed_To_AccidentYes  =     0.97391304347826;
17002 +    Q_Contributed_To_AccidentNo  =     0.02608695652173;
17003 +    V_Contributed_To_AccidentYes  =                    0;
17004 +    V_Contributed_To_AccidentNo  =                    0;
17005 +    I_Contributed_To_Accident  = 'YES' ;
17006 +    U_Contributed_To_Accident  = 'Yes' ;
17007 +    END;
17008 +  ELSE DO;
17009 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17010 +     %DMNORMIP( _ARBFMT_12);
17011 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17012 +      _NODE_  =                    7;
17013 +      _LEAF_  =                    2;
17014 +      P_Contributed_To_AccidentYes  =     0.15463917525773;
17015 +      P_Contributed_To_AccidentNo  =     0.84536082474226;
17016 +      Q_Contributed_To_AccidentYes  =     0.15463917525773;
17017 +      Q_Contributed_To_AccidentNo  =     0.84536082474226;
17018 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17019 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17020 +      I_Contributed_To_Accident  = 'NO' ;
17021 +      U_Contributed_To_Accident  = 'No' ;
17022 +      END;
17023 +    ELSE DO;
17024 +      _NODE_  =                    6;
17025 +      _LEAF_  =                    1;
17026 +      P_Contributed_To_AccidentYes  =     0.35770750988142;
17027 +      P_Contributed_To_AccidentNo  =     0.64229249011857;
17028 +      Q_Contributed_To_AccidentYes  =     0.35770750988142;
17029 +      Q_Contributed_To_AccidentNo  =     0.64229249011857;
17030 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17031 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17032 +      I_Contributed_To_Accident  = 'NO' ;
17033 +      U_Contributed_To_Accident  = 'No' ;
17034 +      END;
17035 +    END;
17036 +  END;
17037 +
17038 +*****  RESIDUALS R_ *************;
17039 +IF  F_Contributed_To_Accident  NE 'YES'
17040 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17041 +        R_Contributed_To_AccidentYes  = .;
17042 +        R_Contributed_To_AccidentNo  = .;
17043 + END;
17044 + ELSE DO;
17045 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17046 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17047 +       SELECT( F_Contributed_To_Accident  );
17048 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17049 +        R_Contributed_To_AccidentYes  +1;
17050 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17051 +        R_Contributed_To_AccidentNo  +1;
17052 +       END;
17053 + END;
17054 +
17055 +****************************************************************;
17056 +******          END OF DECISION TREE SCORING CODE         ******;
17057 +****************************************************************;
17058 +
17059 +drop _LEAF_;
17060 +*------------------------------------------------------------*;
17061 +* EndGrp: EndGroup;
17062 +* User: Divya;
17063 +* Date: 23NOV16: 03:26;
17064 +* Bagging: Loop=9;
17065 +*------------------------------------------------------------*;
17066 +*------------------------------------------------------------*;
17067 +* Bagging: accumulate probabilities for iteration: 9;
17068 +*------------------------------------------------------------*;
17069 +P_Contributed_To_AccidentYes = _BagVar1*(8/9) + P_Contributed_To_AccidentYes*(1/9);
17070 +P_Contributed_To_AccidentNo = _BagVar2*(8/9) + P_Contributed_To_AccidentNo*(1/9);
17071 +*------------------------------------------------------------*;
17072 +* Bagging: Saving Probabilities for Next Iteration;
17073 +*------------------------------------------------------------*;
17074 +_BagVar1 = P_Contributed_To_AccidentYes;
17075 +_BagVar2 = P_Contributed_To_AccidentNo;
17076 +*------------------------------------------------------------*;
17077 +* Grp: StartGroup;
17078 +* User: Divya;
17079 +* Date: 23NOV16: 03:27;
17080 +* Bagging: Loop=10;
17081 +*------------------------------------------------------------*;
17082 +*------------------------------------------------------------*;
17083 +* Tree5: DecisionTree;
17084 +* User: Divya;
17085 +* Date: 23NOV16: 03:27;
17086 +* Bagging: Loop=10;
17087 +*------------------------------------------------------------*;
17088 +****************************************************************;
17089 +******             DECISION TREE SCORING CODE             ******;
17090 +****************************************************************;
17091 +
17092 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17093 +LENGTH F_Contributed_To_Accident  $    3;
17094 +LENGTH I_Contributed_To_Accident  $    3;
17095 +LENGTH U_Contributed_To_Accident  $    3;
17096 +LENGTH _WARN_  $    4;
17097 +
17098 +******              LABELS FOR NEW VARIABLES              ******;
17099 +label _NODE_ = 'Node' ;
17100 +label _LEAF_ = 'Leaf' ;
17101 +label P_Contributed_To_AccidentYes =
17102 +'Predicted: Contributed_To_Accident=Yes' ;
17103 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17104 +label Q_Contributed_To_AccidentYes =
17105 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17106 +label Q_Contributed_To_AccidentNo =
17107 +'Unadjusted P: Contributed_To_Accident=No' ;
17108 +label V_Contributed_To_AccidentYes =
17109 +'Validated: Contributed_To_Accident=Yes' ;
17110 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17111 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17112 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17113 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17114 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17115 +label U_Contributed_To_Accident =
17116 +'Unnormalized Into: Contributed_To_Accident' ;
17117 +label _WARN_ = 'Warnings' ;
17118 +
17119 +
17120 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17121 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17122 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17123 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17124 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17125 +
17126 +
17127 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17128 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17129 +
17130 +******             ASSIGN OBSERVATION TO NODE             ******;
17131 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17132 + %DMNORMIP( _ARBFMT_12);
17133 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17134 +  _NODE_  =                    3;
17135 +  _LEAF_  =                    4;
17136 +  P_Contributed_To_AccidentYes  =                 0.92;
17137 +  P_Contributed_To_AccidentNo  =                 0.08;
17138 +  Q_Contributed_To_AccidentYes  =                 0.92;
17139 +  Q_Contributed_To_AccidentNo  =                 0.08;
17140 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
17141 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
17142 +  I_Contributed_To_Accident  = 'YES' ;
17143 +  U_Contributed_To_Accident  = 'Yes' ;
17144 +  END;
17145 +ELSE DO;
17146 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17147 +   %DMNORMIP( _ARBFMT_12);
17148 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17149 +    _NODE_  =                    5;
17150 +    _LEAF_  =                    3;
17151 +    P_Contributed_To_AccidentYes  =     0.96638655462184;
17152 +    P_Contributed_To_AccidentNo  =     0.03361344537815;
17153 +    Q_Contributed_To_AccidentYes  =     0.96638655462184;
17154 +    Q_Contributed_To_AccidentNo  =     0.03361344537815;
17155 +    V_Contributed_To_AccidentYes  =                    0;
17156 +    V_Contributed_To_AccidentNo  =                    0;
17157 +    I_Contributed_To_Accident  = 'YES' ;
17158 +    U_Contributed_To_Accident  = 'Yes' ;
17159 +    END;
17160 +  ELSE DO;
17161 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17162 +     %DMNORMIP( _ARBFMT_12);
17163 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17164 +      _NODE_  =                    7;
17165 +      _LEAF_  =                    2;
17166 +      P_Contributed_To_AccidentYes  =     0.18357487922705;
17167 +      P_Contributed_To_AccidentNo  =     0.81642512077294;
17168 +      Q_Contributed_To_AccidentYes  =     0.18357487922705;
17169 +      Q_Contributed_To_AccidentNo  =     0.81642512077294;
17170 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17171 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17172 +      I_Contributed_To_Accident  = 'NO' ;
17173 +      U_Contributed_To_Accident  = 'No' ;
17174 +      END;
17175 +    ELSE DO;
17176 +      _NODE_  =                    6;
17177 +      _LEAF_  =                    1;
17178 +      P_Contributed_To_AccidentYes  =     0.36228813559322;
17179 +      P_Contributed_To_AccidentNo  =     0.63771186440677;
17180 +      Q_Contributed_To_AccidentYes  =     0.36228813559322;
17181 +      Q_Contributed_To_AccidentNo  =     0.63771186440677;
17182 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17183 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17184 +      I_Contributed_To_Accident  = 'NO' ;
17185 +      U_Contributed_To_Accident  = 'No' ;
17186 +      END;
17187 +    END;
17188 +  END;
17189 +
17190 +*****  RESIDUALS R_ *************;
17191 +IF  F_Contributed_To_Accident  NE 'YES'
17192 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17193 +        R_Contributed_To_AccidentYes  = .;
17194 +        R_Contributed_To_AccidentNo  = .;
17195 + END;
17196 + ELSE DO;
17197 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17198 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17199 +       SELECT( F_Contributed_To_Accident  );
17200 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17201 +        R_Contributed_To_AccidentYes  +1;
17202 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17203 +        R_Contributed_To_AccidentNo  +1;
17204 +       END;
17205 + END;
17206 +
17207 +****************************************************************;
17208 +******          END OF DECISION TREE SCORING CODE         ******;
17209 +****************************************************************;
17210 +
17211 +drop _LEAF_;
17212 +*------------------------------------------------------------*;
17213 +* EndGrp: EndGroup;
17214 +* User: Divya;
17215 +* Date: 23NOV16: 03:27;
17216 +* Bagging: Loop=10;
17217 +*------------------------------------------------------------*;
17218 +*------------------------------------------------------------*;
17219 +* Bagging: accumulate final probabilities;
17220 +*------------------------------------------------------------*;
17221 +P_Contributed_To_AccidentYes = _BagVar1*(9/10) + P_Contributed_To_AccidentYes*(1/10);
17222 +P_Contributed_To_AccidentNo = _BagVar2*(9/10) + P_Contributed_To_AccidentNo*(1/10);
NOTE: %INCLUDE (level 1) ending.
 
NOTE: DATA STEP view saved on file EMWS1.ENDGRP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.STAT2_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_ in ('FROM', 'TARGET');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='RESIDUAL';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file EMFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=64912,
      Last Modified=23Nov2016:03:27:37,
      Create Time=23Nov2016:03:27:37
 
NOTE: 23 records were written to the file EMFLOW.
      The minimum record length was 3.
      The maximum record length was 75.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 1 observations read from the data set WORK.EM_USER_MODEL.
NOTE: The data set WORK.EM_USER_MODEL has 2 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: Fileref EMPUB has been deassigned.
NOTE: %INCLUDE (level 1) file EMFLOW is file D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas.
17223 +*------------------------------------------------------------*;
17224 +* EndGrp: ;
17225 +* User: Divya;
17226 +* Date: 23NOV16: 03:23;
17227 +*------------------------------------------------------------* ;
17228 +* Ensemble Code;
17229 +*------------------------------------------------------------* ;
17230 +* Bagging: Loop=1;
17231 +* Temporary Variables;
17232 +drop _BagVar1;
17233 +_BagVar1 = 0;
17234 +drop _BagVar2;
17235 +_BagVar2 = 0;
17236 +*------------------------------------------------------------*;
17237 +* Grp: StartGroup;
17238 +* User: Divya;
17239 +* Date: 23NOV16: 03:23;
17240 +* Bagging: Loop=1;
17241 +*------------------------------------------------------------*;
17242 +*------------------------------------------------------------*;
17243 +* Tree5: DecisionTree;
17244 +* User: Divya;
17245 +* Date: 23NOV16: 03:23;
17246 +* Bagging: Loop=1;
17247 +*------------------------------------------------------------*;
17248 +****************************************************************;
17249 +******             DECISION TREE SCORING CODE             ******;
17250 +****************************************************************;
17251 +
17252 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17253 +LENGTH F_Contributed_To_Accident  $    3;
17254 +LENGTH I_Contributed_To_Accident  $    3;
17255 +LENGTH U_Contributed_To_Accident  $    3;
17256 +LENGTH _WARN_  $    4;
17257 +
17258 +******              LABELS FOR NEW VARIABLES              ******;
17259 +label _NODE_ = 'Node' ;
17260 +label _LEAF_ = 'Leaf' ;
17261 +label P_Contributed_To_AccidentYes =
17262 +'Predicted: Contributed_To_Accident=Yes' ;
17263 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17264 +label Q_Contributed_To_AccidentYes =
17265 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17266 +label Q_Contributed_To_AccidentNo =
17267 +'Unadjusted P: Contributed_To_Accident=No' ;
17268 +label V_Contributed_To_AccidentYes =
17269 +'Validated: Contributed_To_Accident=Yes' ;
17270 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17271 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17272 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17273 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17274 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17275 +label U_Contributed_To_Accident =
17276 +'Unnormalized Into: Contributed_To_Accident' ;
17277 +label _WARN_ = 'Warnings' ;
17278 +
17279 +
17280 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17281 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17282 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17283 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17284 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17285 +
17286 +
17287 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17288 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17289 +
17290 +******             ASSIGN OBSERVATION TO NODE             ******;
17291 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17292 + %DMNORMIP( _ARBFMT_12);
17293 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17294 +  _NODE_  =                    3;
17295 +  _LEAF_  =                    4;
17296 +  P_Contributed_To_AccidentYes  =     0.96969696969696;
17297 +  P_Contributed_To_AccidentNo  =     0.03030303030303;
17298 +  Q_Contributed_To_AccidentYes  =     0.96969696969696;
17299 +  Q_Contributed_To_AccidentNo  =     0.03030303030303;
17300 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
17301 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
17302 +  I_Contributed_To_Accident  = 'YES' ;
17303 +  U_Contributed_To_Accident  = 'Yes' ;
17304 +  END;
17305 +ELSE DO;
17306 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17307 +   %DMNORMIP( _ARBFMT_12);
17308 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17309 +    _NODE_  =                    5;
17310 +    _LEAF_  =                    3;
17311 +    P_Contributed_To_AccidentYes  =      0.9763779527559;
17312 +    P_Contributed_To_AccidentNo  =     0.02362204724409;
17313 +    Q_Contributed_To_AccidentYes  =      0.9763779527559;
17314 +    Q_Contributed_To_AccidentNo  =     0.02362204724409;
17315 +    V_Contributed_To_AccidentYes  =                    0;
17316 +    V_Contributed_To_AccidentNo  =                    0;
17317 +    I_Contributed_To_Accident  = 'YES' ;
17318 +    U_Contributed_To_Accident  = 'Yes' ;
17319 +    END;
17320 +  ELSE DO;
17321 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17322 +     %DMNORMIP( _ARBFMT_12);
17323 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17324 +      _NODE_  =                    7;
17325 +      _LEAF_  =                    2;
17326 +      P_Contributed_To_AccidentYes  =     0.18579234972677;
17327 +      P_Contributed_To_AccidentNo  =     0.81420765027322;
17328 +      Q_Contributed_To_AccidentYes  =     0.18579234972677;
17329 +      Q_Contributed_To_AccidentNo  =     0.81420765027322;
17330 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17331 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17332 +      I_Contributed_To_Accident  = 'NO' ;
17333 +      U_Contributed_To_Accident  = 'No' ;
17334 +      END;
17335 +    ELSE DO;
17336 +      _NODE_  =                    6;
17337 +      _LEAF_  =                    1;
17338 +      P_Contributed_To_AccidentYes  =     0.38775510204081;
17339 +      P_Contributed_To_AccidentNo  =     0.61224489795918;
17340 +      Q_Contributed_To_AccidentYes  =     0.38775510204081;
17341 +      Q_Contributed_To_AccidentNo  =     0.61224489795918;
17342 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17343 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17344 +      I_Contributed_To_Accident  = 'NO' ;
17345 +      U_Contributed_To_Accident  = 'No' ;
17346 +      END;
17347 +    END;
17348 +  END;
17349 +
17350 +*****  RESIDUALS R_ *************;
17351 +IF  F_Contributed_To_Accident  NE 'YES'
17352 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17353 +        R_Contributed_To_AccidentYes  = .;
17354 +        R_Contributed_To_AccidentNo  = .;
17355 + END;
17356 + ELSE DO;
17357 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17358 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17359 +       SELECT( F_Contributed_To_Accident  );
17360 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17361 +        R_Contributed_To_AccidentYes  +1;
17362 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17363 +        R_Contributed_To_AccidentNo  +1;
17364 +       END;
17365 + END;
17366 +
17367 +****************************************************************;
17368 +******          END OF DECISION TREE SCORING CODE         ******;
17369 +****************************************************************;
17370 +
17371 +drop _LEAF_;
17372 +*------------------------------------------------------------*;
17373 +* EndGrp: EndGroup;
17374 +* User: Divya;
17375 +* Date: 23NOV16: 03:23;
17376 +* Bagging: Loop=1;
17377 +*------------------------------------------------------------*;
17378 +*------------------------------------------------------------*;
17379 +* Bagging: Saving Probabilities for Next Iteration;
17380 +*------------------------------------------------------------*;
17381 +_BagVar1 = P_Contributed_To_AccidentYes;
17382 +_BagVar2 = P_Contributed_To_AccidentNo;
17383 +*------------------------------------------------------------*;
17384 +* Grp: StartGroup;
17385 +* User: Divya;
17386 +* Date: 23NOV16: 03:23;
17387 +* Bagging: Loop=2;
17388 +*------------------------------------------------------------*;
17389 +*------------------------------------------------------------*;
17390 +* Tree5: DecisionTree;
17391 +* User: Divya;
17392 +* Date: 23NOV16: 03:23;
17393 +* Bagging: Loop=2;
17394 +*------------------------------------------------------------*;
17395 +****************************************************************;
17396 +******             DECISION TREE SCORING CODE             ******;
17397 +****************************************************************;
17398 +
17399 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17400 +LENGTH F_Contributed_To_Accident  $    3;
17401 +LENGTH I_Contributed_To_Accident  $    3;
17402 +LENGTH U_Contributed_To_Accident  $    3;
17403 +LENGTH _WARN_  $    4;
17404 +
17405 +******              LABELS FOR NEW VARIABLES              ******;
17406 +label _NODE_ = 'Node' ;
17407 +label _LEAF_ = 'Leaf' ;
17408 +label P_Contributed_To_AccidentYes =
17409 +'Predicted: Contributed_To_Accident=Yes' ;
17410 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17411 +label Q_Contributed_To_AccidentYes =
17412 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17413 +label Q_Contributed_To_AccidentNo =
17414 +'Unadjusted P: Contributed_To_Accident=No' ;
17415 +label V_Contributed_To_AccidentYes =
17416 +'Validated: Contributed_To_Accident=Yes' ;
17417 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17418 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17419 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17420 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17421 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17422 +label U_Contributed_To_Accident =
17423 +'Unnormalized Into: Contributed_To_Accident' ;
17424 +label _WARN_ = 'Warnings' ;
17425 +
17426 +
17427 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17428 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17429 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17430 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17431 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17432 +
17433 +
17434 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17435 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17436 +
17437 +******             ASSIGN OBSERVATION TO NODE             ******;
17438 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17439 + %DMNORMIP( _ARBFMT_12);
17440 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17441 +  _NODE_  =                    3;
17442 +  _LEAF_  =                    4;
17443 +  P_Contributed_To_AccidentYes  =     0.98561151079136;
17444 +  P_Contributed_To_AccidentNo  =     0.01438848920863;
17445 +  Q_Contributed_To_AccidentYes  =     0.98561151079136;
17446 +  Q_Contributed_To_AccidentNo  =     0.01438848920863;
17447 +  V_Contributed_To_AccidentYes  =                    0;
17448 +  V_Contributed_To_AccidentNo  =                    0;
17449 +  I_Contributed_To_Accident  = 'YES' ;
17450 +  U_Contributed_To_Accident  = 'Yes' ;
17451 +  END;
17452 +ELSE DO;
17453 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17454 +   %DMNORMIP( _ARBFMT_12);
17455 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17456 +    _NODE_  =                    5;
17457 +    _LEAF_  =                    3;
17458 +    P_Contributed_To_AccidentYes  =     0.93421052631578;
17459 +    P_Contributed_To_AccidentNo  =     0.06578947368421;
17460 +    Q_Contributed_To_AccidentYes  =     0.93421052631578;
17461 +    Q_Contributed_To_AccidentNo  =     0.06578947368421;
17462 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
17463 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
17464 +    I_Contributed_To_Accident  = 'YES' ;
17465 +    U_Contributed_To_Accident  = 'Yes' ;
17466 +    END;
17467 +  ELSE DO;
17468 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17469 +     %DMNORMIP( _ARBFMT_12);
17470 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17471 +      _NODE_  =                    7;
17472 +      _LEAF_  =                    2;
17473 +      P_Contributed_To_AccidentYes  =     0.15028901734104;
17474 +      P_Contributed_To_AccidentNo  =     0.84971098265895;
17475 +      Q_Contributed_To_AccidentYes  =     0.15028901734104;
17476 +      Q_Contributed_To_AccidentNo  =     0.84971098265895;
17477 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17478 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17479 +      I_Contributed_To_Accident  = 'NO' ;
17480 +      U_Contributed_To_Accident  = 'No' ;
17481 +      END;
17482 +    ELSE DO;
17483 +      _NODE_  =                    6;
17484 +      _LEAF_  =                    1;
17485 +      P_Contributed_To_AccidentYes  =     0.34456928838951;
17486 +      P_Contributed_To_AccidentNo  =     0.65543071161048;
17487 +      Q_Contributed_To_AccidentYes  =     0.34456928838951;
17488 +      Q_Contributed_To_AccidentNo  =     0.65543071161048;
17489 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17490 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17491 +      I_Contributed_To_Accident  = 'NO' ;
17492 +      U_Contributed_To_Accident  = 'No' ;
17493 +      END;
17494 +    END;
17495 +  END;
17496 +
17497 +*****  RESIDUALS R_ *************;
17498 +IF  F_Contributed_To_Accident  NE 'YES'
17499 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17500 +        R_Contributed_To_AccidentYes  = .;
17501 +        R_Contributed_To_AccidentNo  = .;
17502 + END;
17503 + ELSE DO;
17504 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17505 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17506 +       SELECT( F_Contributed_To_Accident  );
17507 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17508 +        R_Contributed_To_AccidentYes  +1;
17509 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17510 +        R_Contributed_To_AccidentNo  +1;
17511 +       END;
17512 + END;
17513 +
17514 +****************************************************************;
17515 +******          END OF DECISION TREE SCORING CODE         ******;
17516 +****************************************************************;
17517 +
17518 +drop _LEAF_;
17519 +*------------------------------------------------------------*;
17520 +* EndGrp: EndGroup;
17521 +* User: Divya;
17522 +* Date: 23NOV16: 03:23;
17523 +* Bagging: Loop=2;
17524 +*------------------------------------------------------------*;
17525 +*------------------------------------------------------------*;
17526 +* Bagging: accumulate probabilities for iteration: 2;
17527 +*------------------------------------------------------------*;
17528 +P_Contributed_To_AccidentYes = _BagVar1*(1/2) + P_Contributed_To_AccidentYes*(1/2);
17529 +P_Contributed_To_AccidentNo = _BagVar2*(1/2) + P_Contributed_To_AccidentNo*(1/2);
17530 +*------------------------------------------------------------*;
17531 +* Bagging: Saving Probabilities for Next Iteration;
17532 +*------------------------------------------------------------*;
17533 +_BagVar1 = P_Contributed_To_AccidentYes;
17534 +_BagVar2 = P_Contributed_To_AccidentNo;
17535 +*------------------------------------------------------------*;
17536 +* Grp: StartGroup;
17537 +* User: Divya;
17538 +* Date: 23NOV16: 03:24;
17539 +* Bagging: Loop=3;
17540 +*------------------------------------------------------------*;
17541 +*------------------------------------------------------------*;
17542 +* Tree5: DecisionTree;
17543 +* User: Divya;
17544 +* Date: 23NOV16: 03:24;
17545 +* Bagging: Loop=3;
17546 +*------------------------------------------------------------*;
17547 +****************************************************************;
17548 +******             DECISION TREE SCORING CODE             ******;
17549 +****************************************************************;
17550 +
17551 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17552 +LENGTH F_Contributed_To_Accident  $    3;
17553 +LENGTH I_Contributed_To_Accident  $    3;
17554 +LENGTH U_Contributed_To_Accident  $    3;
17555 +LENGTH _WARN_  $    4;
17556 +
17557 +******              LABELS FOR NEW VARIABLES              ******;
17558 +label _NODE_ = 'Node' ;
17559 +label _LEAF_ = 'Leaf' ;
17560 +label P_Contributed_To_AccidentYes =
17561 +'Predicted: Contributed_To_Accident=Yes' ;
17562 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17563 +label Q_Contributed_To_AccidentYes =
17564 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17565 +label Q_Contributed_To_AccidentNo =
17566 +'Unadjusted P: Contributed_To_Accident=No' ;
17567 +label V_Contributed_To_AccidentYes =
17568 +'Validated: Contributed_To_Accident=Yes' ;
17569 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17570 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17571 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17572 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17573 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17574 +label U_Contributed_To_Accident =
17575 +'Unnormalized Into: Contributed_To_Accident' ;
17576 +label _WARN_ = 'Warnings' ;
17577 +
17578 +
17579 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17580 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17581 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17582 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17583 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17584 +
17585 +
17586 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17587 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17588 +
17589 +******             ASSIGN OBSERVATION TO NODE             ******;
17590 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17591 + %DMNORMIP( _ARBFMT_12);
17592 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17593 +  _NODE_  =                    3;
17594 +  _LEAF_  =                    4;
17595 +  P_Contributed_To_AccidentYes  =     0.97902097902097;
17596 +  P_Contributed_To_AccidentNo  =     0.02097902097902;
17597 +  Q_Contributed_To_AccidentYes  =     0.97902097902097;
17598 +  Q_Contributed_To_AccidentNo  =     0.02097902097902;
17599 +  V_Contributed_To_AccidentYes  =                    0;
17600 +  V_Contributed_To_AccidentNo  =                    0;
17601 +  I_Contributed_To_Accident  = 'YES' ;
17602 +  U_Contributed_To_Accident  = 'Yes' ;
17603 +  END;
17604 +ELSE DO;
17605 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17606 +   %DMNORMIP( _ARBFMT_12);
17607 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17608 +    _NODE_  =                    5;
17609 +    _LEAF_  =                    3;
17610 +    P_Contributed_To_AccidentYes  =     0.94409937888198;
17611 +    P_Contributed_To_AccidentNo  =     0.05590062111801;
17612 +    Q_Contributed_To_AccidentYes  =     0.94409937888198;
17613 +    Q_Contributed_To_AccidentNo  =     0.05590062111801;
17614 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
17615 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
17616 +    I_Contributed_To_Accident  = 'YES' ;
17617 +    U_Contributed_To_Accident  = 'Yes' ;
17618 +    END;
17619 +  ELSE DO;
17620 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17621 +     %DMNORMIP( _ARBFMT_12);
17622 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17623 +      _NODE_  =                    7;
17624 +      _LEAF_  =                    2;
17625 +      P_Contributed_To_AccidentYes  =     0.18407960199004;
17626 +      P_Contributed_To_AccidentNo  =     0.81592039800995;
17627 +      Q_Contributed_To_AccidentYes  =     0.18407960199004;
17628 +      Q_Contributed_To_AccidentNo  =     0.81592039800995;
17629 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17630 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17631 +      I_Contributed_To_Accident  = 'NO' ;
17632 +      U_Contributed_To_Accident  = 'No' ;
17633 +      END;
17634 +    ELSE DO;
17635 +      _NODE_  =                    6;
17636 +      _LEAF_  =                    1;
17637 +      P_Contributed_To_AccidentYes  =     0.35091277890466;
17638 +      P_Contributed_To_AccidentNo  =     0.64908722109533;
17639 +      Q_Contributed_To_AccidentYes  =     0.35091277890466;
17640 +      Q_Contributed_To_AccidentNo  =     0.64908722109533;
17641 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17642 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17643 +      I_Contributed_To_Accident  = 'NO' ;
17644 +      U_Contributed_To_Accident  = 'No' ;
17645 +      END;
17646 +    END;
17647 +  END;
17648 +
17649 +*****  RESIDUALS R_ *************;
17650 +IF  F_Contributed_To_Accident  NE 'YES'
17651 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17652 +        R_Contributed_To_AccidentYes  = .;
17653 +        R_Contributed_To_AccidentNo  = .;
17654 + END;
17655 + ELSE DO;
17656 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17657 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17658 +       SELECT( F_Contributed_To_Accident  );
17659 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17660 +        R_Contributed_To_AccidentYes  +1;
17661 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17662 +        R_Contributed_To_AccidentNo  +1;
17663 +       END;
17664 + END;
17665 +
17666 +****************************************************************;
17667 +******          END OF DECISION TREE SCORING CODE         ******;
17668 +****************************************************************;
17669 +
17670 +drop _LEAF_;
17671 +*------------------------------------------------------------*;
17672 +* EndGrp: EndGroup;
17673 +* User: Divya;
17674 +* Date: 23NOV16: 03:24;
17675 +* Bagging: Loop=3;
17676 +*------------------------------------------------------------*;
17677 +*------------------------------------------------------------*;
17678 +* Bagging: accumulate probabilities for iteration: 3;
17679 +*------------------------------------------------------------*;
17680 +P_Contributed_To_AccidentYes = _BagVar1*(2/3) + P_Contributed_To_AccidentYes*(1/3);
17681 +P_Contributed_To_AccidentNo = _BagVar2*(2/3) + P_Contributed_To_AccidentNo*(1/3);
17682 +*------------------------------------------------------------*;
17683 +* Bagging: Saving Probabilities for Next Iteration;
17684 +*------------------------------------------------------------*;
17685 +_BagVar1 = P_Contributed_To_AccidentYes;
17686 +_BagVar2 = P_Contributed_To_AccidentNo;
17687 +*------------------------------------------------------------*;
17688 +* Grp: StartGroup;
17689 +* User: Divya;
17690 +* Date: 23NOV16: 03:24;
17691 +* Bagging: Loop=4;
17692 +*------------------------------------------------------------*;
17693 +*------------------------------------------------------------*;
17694 +* Tree5: DecisionTree;
17695 +* User: Divya;
17696 +* Date: 23NOV16: 03:24;
17697 +* Bagging: Loop=4;
17698 +*------------------------------------------------------------*;
17699 +****************************************************************;
17700 +******             DECISION TREE SCORING CODE             ******;
17701 +****************************************************************;
17702 +
17703 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17704 +LENGTH F_Contributed_To_Accident  $    3;
17705 +LENGTH I_Contributed_To_Accident  $    3;
17706 +LENGTH U_Contributed_To_Accident  $    3;
17707 +LENGTH _WARN_  $    4;
17708 +
17709 +******              LABELS FOR NEW VARIABLES              ******;
17710 +label _NODE_ = 'Node' ;
17711 +label _LEAF_ = 'Leaf' ;
17712 +label P_Contributed_To_AccidentYes =
17713 +'Predicted: Contributed_To_Accident=Yes' ;
17714 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17715 +label Q_Contributed_To_AccidentYes =
17716 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17717 +label Q_Contributed_To_AccidentNo =
17718 +'Unadjusted P: Contributed_To_Accident=No' ;
17719 +label V_Contributed_To_AccidentYes =
17720 +'Validated: Contributed_To_Accident=Yes' ;
17721 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17722 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17723 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17724 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17725 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17726 +label U_Contributed_To_Accident =
17727 +'Unnormalized Into: Contributed_To_Accident' ;
17728 +label _WARN_ = 'Warnings' ;
17729 +
17730 +
17731 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17732 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17733 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17734 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17735 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17736 +
17737 +
17738 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17739 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17740 +
17741 +******             ASSIGN OBSERVATION TO NODE             ******;
17742 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17743 + %DMNORMIP( _ARBFMT_12);
17744 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17745 +  _NODE_  =                    3;
17746 +  _LEAF_  =                    4;
17747 +  P_Contributed_To_AccidentYes  =     0.93491124260355;
17748 +  P_Contributed_To_AccidentNo  =     0.06508875739644;
17749 +  Q_Contributed_To_AccidentYes  =     0.93491124260355;
17750 +  Q_Contributed_To_AccidentNo  =     0.06508875739644;
17751 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
17752 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
17753 +  I_Contributed_To_Accident  = 'YES' ;
17754 +  U_Contributed_To_Accident  = 'Yes' ;
17755 +  END;
17756 +ELSE DO;
17757 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17758 +   %DMNORMIP( _ARBFMT_12);
17759 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17760 +    _NODE_  =                    5;
17761 +    _LEAF_  =                    3;
17762 +    P_Contributed_To_AccidentYes  =     0.94776119402985;
17763 +    P_Contributed_To_AccidentNo  =     0.05223880597014;
17764 +    Q_Contributed_To_AccidentYes  =     0.94776119402985;
17765 +    Q_Contributed_To_AccidentNo  =     0.05223880597014;
17766 +    V_Contributed_To_AccidentYes  =                    0;
17767 +    V_Contributed_To_AccidentNo  =                    0;
17768 +    I_Contributed_To_Accident  = 'YES' ;
17769 +    U_Contributed_To_Accident  = 'Yes' ;
17770 +    END;
17771 +  ELSE DO;
17772 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17773 +     %DMNORMIP( _ARBFMT_12);
17774 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17775 +      _NODE_  =                    7;
17776 +      _LEAF_  =                    2;
17777 +      P_Contributed_To_AccidentYes  =     0.13333333333333;
17778 +      P_Contributed_To_AccidentNo  =     0.86666666666666;
17779 +      Q_Contributed_To_AccidentYes  =     0.13333333333333;
17780 +      Q_Contributed_To_AccidentNo  =     0.86666666666666;
17781 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17782 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17783 +      I_Contributed_To_Accident  = 'NO' ;
17784 +      U_Contributed_To_Accident  = 'No' ;
17785 +      END;
17786 +    ELSE DO;
17787 +      _NODE_  =                    6;
17788 +      _LEAF_  =                    1;
17789 +      P_Contributed_To_AccidentYes  =     0.37358490566037;
17790 +      P_Contributed_To_AccidentNo  =     0.62641509433962;
17791 +      Q_Contributed_To_AccidentYes  =     0.37358490566037;
17792 +      Q_Contributed_To_AccidentNo  =     0.62641509433962;
17793 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17794 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17795 +      I_Contributed_To_Accident  = 'NO' ;
17796 +      U_Contributed_To_Accident  = 'No' ;
17797 +      END;
17798 +    END;
17799 +  END;
17800 +
17801 +*****  RESIDUALS R_ *************;
17802 +IF  F_Contributed_To_Accident  NE 'YES'
17803 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17804 +        R_Contributed_To_AccidentYes  = .;
17805 +        R_Contributed_To_AccidentNo  = .;
17806 + END;
17807 + ELSE DO;
17808 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17809 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17810 +       SELECT( F_Contributed_To_Accident  );
17811 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17812 +        R_Contributed_To_AccidentYes  +1;
17813 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17814 +        R_Contributed_To_AccidentNo  +1;
17815 +       END;
17816 + END;
17817 +
17818 +****************************************************************;
17819 +******          END OF DECISION TREE SCORING CODE         ******;
17820 +****************************************************************;
17821 +
17822 +drop _LEAF_;
17823 +*------------------------------------------------------------*;
17824 +* EndGrp: EndGroup;
17825 +* User: Divya;
17826 +* Date: 23NOV16: 03:24;
17827 +* Bagging: Loop=4;
17828 +*------------------------------------------------------------*;
17829 +*------------------------------------------------------------*;
17830 +* Bagging: accumulate probabilities for iteration: 4;
17831 +*------------------------------------------------------------*;
17832 +P_Contributed_To_AccidentYes = _BagVar1*(3/4) + P_Contributed_To_AccidentYes*(1/4);
17833 +P_Contributed_To_AccidentNo = _BagVar2*(3/4) + P_Contributed_To_AccidentNo*(1/4);
17834 +*------------------------------------------------------------*;
17835 +* Bagging: Saving Probabilities for Next Iteration;
17836 +*------------------------------------------------------------*;
17837 +_BagVar1 = P_Contributed_To_AccidentYes;
17838 +_BagVar2 = P_Contributed_To_AccidentNo;
17839 +*------------------------------------------------------------*;
17840 +* Grp: StartGroup;
17841 +* User: Divya;
17842 +* Date: 23NOV16: 03:25;
17843 +* Bagging: Loop=5;
17844 +*------------------------------------------------------------*;
17845 +*------------------------------------------------------------*;
17846 +* Tree5: DecisionTree;
17847 +* User: Divya;
17848 +* Date: 23NOV16: 03:25;
17849 +* Bagging: Loop=5;
17850 +*------------------------------------------------------------*;
17851 +****************************************************************;
17852 +******             DECISION TREE SCORING CODE             ******;
17853 +****************************************************************;
17854 +
17855 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17856 +LENGTH F_Contributed_To_Accident  $    3;
17857 +LENGTH I_Contributed_To_Accident  $    3;
17858 +LENGTH U_Contributed_To_Accident  $    3;
17859 +LENGTH _WARN_  $    4;
17860 +
17861 +******              LABELS FOR NEW VARIABLES              ******;
17862 +label _NODE_ = 'Node' ;
17863 +label _LEAF_ = 'Leaf' ;
17864 +label P_Contributed_To_AccidentYes =
17865 +'Predicted: Contributed_To_Accident=Yes' ;
17866 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17867 +label Q_Contributed_To_AccidentYes =
17868 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17869 +label Q_Contributed_To_AccidentNo =
17870 +'Unadjusted P: Contributed_To_Accident=No' ;
17871 +label V_Contributed_To_AccidentYes =
17872 +'Validated: Contributed_To_Accident=Yes' ;
17873 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17874 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17875 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17876 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17877 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17878 +label U_Contributed_To_Accident =
17879 +'Unnormalized Into: Contributed_To_Accident' ;
17880 +label _WARN_ = 'Warnings' ;
17881 +
17882 +
17883 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17884 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17885 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17886 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17887 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17888 +
17889 +
17890 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17891 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17892 +
17893 +******             ASSIGN OBSERVATION TO NODE             ******;
17894 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17895 + %DMNORMIP( _ARBFMT_12);
17896 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17897 +  _NODE_  =                    3;
17898 +  _LEAF_  =                    4;
17899 +  P_Contributed_To_AccidentYes  =      0.9217877094972;
17900 +  P_Contributed_To_AccidentNo  =     0.07821229050279;
17901 +  Q_Contributed_To_AccidentYes  =      0.9217877094972;
17902 +  Q_Contributed_To_AccidentNo  =     0.07821229050279;
17903 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
17904 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
17905 +  I_Contributed_To_Accident  = 'YES' ;
17906 +  U_Contributed_To_Accident  = 'Yes' ;
17907 +  END;
17908 +ELSE DO;
17909 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17910 +   %DMNORMIP( _ARBFMT_12);
17911 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17912 +    _NODE_  =                    5;
17913 +    _LEAF_  =                    3;
17914 +    P_Contributed_To_AccidentYes  =                    1;
17915 +    P_Contributed_To_AccidentNo  =                    0;
17916 +    Q_Contributed_To_AccidentYes  =                    1;
17917 +    Q_Contributed_To_AccidentNo  =                    0;
17918 +    V_Contributed_To_AccidentYes  =                    0;
17919 +    V_Contributed_To_AccidentNo  =                    0;
17920 +    I_Contributed_To_Accident  = 'YES' ;
17921 +    U_Contributed_To_Accident  = 'Yes' ;
17922 +    END;
17923 +  ELSE DO;
17924 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17925 +     %DMNORMIP( _ARBFMT_12);
17926 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17927 +      _NODE_  =                    7;
17928 +      _LEAF_  =                    2;
17929 +      P_Contributed_To_AccidentYes  =     0.13089005235602;
17930 +      P_Contributed_To_AccidentNo  =     0.86910994764397;
17931 +      Q_Contributed_To_AccidentYes  =     0.13089005235602;
17932 +      Q_Contributed_To_AccidentNo  =     0.86910994764397;
17933 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17934 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17935 +      I_Contributed_To_Accident  = 'NO' ;
17936 +      U_Contributed_To_Accident  = 'No' ;
17937 +      END;
17938 +    ELSE DO;
17939 +      _NODE_  =                    6;
17940 +      _LEAF_  =                    1;
17941 +      P_Contributed_To_AccidentYes  =          0.322265625;
17942 +      P_Contributed_To_AccidentNo  =          0.677734375;
17943 +      Q_Contributed_To_AccidentYes  =          0.322265625;
17944 +      Q_Contributed_To_AccidentNo  =          0.677734375;
17945 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17946 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17947 +      I_Contributed_To_Accident  = 'NO' ;
17948 +      U_Contributed_To_Accident  = 'No' ;
17949 +      END;
17950 +    END;
17951 +  END;
17952 +
17953 +*****  RESIDUALS R_ *************;
17954 +IF  F_Contributed_To_Accident  NE 'YES'
17955 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17956 +        R_Contributed_To_AccidentYes  = .;
17957 +        R_Contributed_To_AccidentNo  = .;
17958 + END;
17959 + ELSE DO;
17960 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17961 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17962 +       SELECT( F_Contributed_To_Accident  );
17963 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17964 +        R_Contributed_To_AccidentYes  +1;
17965 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17966 +        R_Contributed_To_AccidentNo  +1;
17967 +       END;
17968 + END;
17969 +
17970 +****************************************************************;
17971 +******          END OF DECISION TREE SCORING CODE         ******;
17972 +****************************************************************;
17973 +
17974 +drop _LEAF_;
17975 +*------------------------------------------------------------*;
17976 +* EndGrp: EndGroup;
17977 +* User: Divya;
17978 +* Date: 23NOV16: 03:25;
17979 +* Bagging: Loop=5;
17980 +*------------------------------------------------------------*;
17981 +*------------------------------------------------------------*;
17982 +* Bagging: accumulate probabilities for iteration: 5;
17983 +*------------------------------------------------------------*;
17984 +P_Contributed_To_AccidentYes = _BagVar1*(4/5) + P_Contributed_To_AccidentYes*(1/5);
17985 +P_Contributed_To_AccidentNo = _BagVar2*(4/5) + P_Contributed_To_AccidentNo*(1/5);
17986 +*------------------------------------------------------------*;
17987 +* Bagging: Saving Probabilities for Next Iteration;
17988 +*------------------------------------------------------------*;
17989 +_BagVar1 = P_Contributed_To_AccidentYes;
17990 +_BagVar2 = P_Contributed_To_AccidentNo;
17991 +*------------------------------------------------------------*;
17992 +* Grp: StartGroup;
17993 +* User: Divya;
17994 +* Date: 23NOV16: 03:25;
17995 +* Bagging: Loop=6;
17996 +*------------------------------------------------------------*;
17997 +*------------------------------------------------------------*;
17998 +* Tree5: DecisionTree;
17999 +* User: Divya;
18000 +* Date: 23NOV16: 03:25;
18001 +* Bagging: Loop=6;
18002 +*------------------------------------------------------------*;
18003 +****************************************************************;
18004 +******             DECISION TREE SCORING CODE             ******;
18005 +****************************************************************;
18006 +
18007 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18008 +LENGTH F_Contributed_To_Accident  $    3;
18009 +LENGTH I_Contributed_To_Accident  $    3;
18010 +LENGTH U_Contributed_To_Accident  $    3;
18011 +LENGTH _WARN_  $    4;
18012 +
18013 +******              LABELS FOR NEW VARIABLES              ******;
18014 +label _NODE_ = 'Node' ;
18015 +label _LEAF_ = 'Leaf' ;
18016 +label P_Contributed_To_AccidentYes =
18017 +'Predicted: Contributed_To_Accident=Yes' ;
18018 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18019 +label Q_Contributed_To_AccidentYes =
18020 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18021 +label Q_Contributed_To_AccidentNo =
18022 +'Unadjusted P: Contributed_To_Accident=No' ;
18023 +label V_Contributed_To_AccidentYes =
18024 +'Validated: Contributed_To_Accident=Yes' ;
18025 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18026 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18027 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18028 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18029 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18030 +label U_Contributed_To_Accident =
18031 +'Unnormalized Into: Contributed_To_Accident' ;
18032 +label _WARN_ = 'Warnings' ;
18033 +
18034 +
18035 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18036 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18037 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18038 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18039 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18040 +
18041 +
18042 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18043 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18044 +
18045 +******             ASSIGN OBSERVATION TO NODE             ******;
18046 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
18047 + %DMNORMIP( _ARBFMT_12);
18048 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18049 +  _NODE_  =                    3;
18050 +  _LEAF_  =                    4;
18051 +  P_Contributed_To_AccidentYes  =     0.94943820224719;
18052 +  P_Contributed_To_AccidentNo  =      0.0505617977528;
18053 +  Q_Contributed_To_AccidentYes  =     0.94943820224719;
18054 +  Q_Contributed_To_AccidentNo  =      0.0505617977528;
18055 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
18056 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
18057 +  I_Contributed_To_Accident  = 'YES' ;
18058 +  U_Contributed_To_Accident  = 'Yes' ;
18059 +  END;
18060 +ELSE DO;
18061 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18062 +   %DMNORMIP( _ARBFMT_12);
18063 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
18064 +    _NODE_  =                    5;
18065 +    _LEAF_  =                    3;
18066 +    P_Contributed_To_AccidentYes  =                0.952;
18067 +    P_Contributed_To_AccidentNo  =                0.048;
18068 +    Q_Contributed_To_AccidentYes  =                0.952;
18069 +    Q_Contributed_To_AccidentNo  =                0.048;
18070 +    V_Contributed_To_AccidentYes  =                    0;
18071 +    V_Contributed_To_AccidentNo  =                    0;
18072 +    I_Contributed_To_Accident  = 'YES' ;
18073 +    U_Contributed_To_Accident  = 'Yes' ;
18074 +    END;
18075 +  ELSE DO;
18076 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
18077 +     %DMNORMIP( _ARBFMT_12);
18078 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
18079 +      _NODE_  =                    7;
18080 +      _LEAF_  =                    2;
18081 +      P_Contributed_To_AccidentYes  =     0.13775510204081;
18082 +      P_Contributed_To_AccidentNo  =     0.86224489795918;
18083 +      Q_Contributed_To_AccidentYes  =     0.13775510204081;
18084 +      Q_Contributed_To_AccidentNo  =     0.86224489795918;
18085 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
18086 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
18087 +      I_Contributed_To_Accident  = 'NO' ;
18088 +      U_Contributed_To_Accident  = 'No' ;
18089 +      END;
18090 +    ELSE DO;
18091 +      _NODE_  =                    6;
18092 +      _LEAF_  =                    1;
18093 +      P_Contributed_To_AccidentYes  =     0.34068136272545;
18094 +      P_Contributed_To_AccidentNo  =     0.65931863727454;
18095 +      Q_Contributed_To_AccidentYes  =     0.34068136272545;
18096 +      Q_Contributed_To_AccidentNo  =     0.65931863727454;
18097 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
18098 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
18099 +      I_Contributed_To_Accident  = 'NO' ;
18100 +      U_Contributed_To_Accident  = 'No' ;
18101 +      END;
18102 +    END;
18103 +  END;
18104 +
18105 +*****  RESIDUALS R_ *************;
18106 +IF  F_Contributed_To_Accident  NE 'YES'
18107 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
18108 +        R_Contributed_To_AccidentYes  = .;
18109 +        R_Contributed_To_AccidentNo  = .;
18110 + END;
18111 + ELSE DO;
18112 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
18113 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
18114 +       SELECT( F_Contributed_To_Accident  );
18115 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
18116 +        R_Contributed_To_AccidentYes  +1;
18117 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
18118 +        R_Contributed_To_AccidentNo  +1;
18119 +       END;
18120 + END;
18121 +
18122 +****************************************************************;
18123 +******          END OF DECISION TREE SCORING CODE         ******;
18124 +****************************************************************;
18125 +
18126 +drop _LEAF_;
18127 +*------------------------------------------------------------*;
18128 +* EndGrp: EndGroup;
18129 +* User: Divya;
18130 +* Date: 23NOV16: 03:25;
18131 +* Bagging: Loop=6;
18132 +*------------------------------------------------------------*;
18133 +*------------------------------------------------------------*;
18134 +* Bagging: accumulate probabilities for iteration: 6;
18135 +*------------------------------------------------------------*;
18136 +P_Contributed_To_AccidentYes = _BagVar1*(5/6) + P_Contributed_To_AccidentYes*(1/6);
18137 +P_Contributed_To_AccidentNo = _BagVar2*(5/6) + P_Contributed_To_AccidentNo*(1/6);
18138 +*------------------------------------------------------------*;
18139 +* Bagging: Saving Probabilities for Next Iteration;
18140 +*------------------------------------------------------------*;
18141 +_BagVar1 = P_Contributed_To_AccidentYes;
18142 +_BagVar2 = P_Contributed_To_AccidentNo;
18143 +*------------------------------------------------------------*;
18144 +* Grp: StartGroup;
18145 +* User: Divya;
18146 +* Date: 23NOV16: 03:25;
18147 +* Bagging: Loop=7;
18148 +*------------------------------------------------------------*;
18149 +*------------------------------------------------------------*;
18150 +* Tree5: DecisionTree;
18151 +* User: Divya;
18152 +* Date: 23NOV16: 03:25;
18153 +* Bagging: Loop=7;
18154 +*------------------------------------------------------------*;
18155 +****************************************************************;
18156 +******             DECISION TREE SCORING CODE             ******;
18157 +****************************************************************;
18158 +
18159 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18160 +LENGTH F_Contributed_To_Accident  $    3;
18161 +LENGTH I_Contributed_To_Accident  $    3;
18162 +LENGTH U_Contributed_To_Accident  $    3;
18163 +LENGTH _WARN_  $    4;
18164 +
18165 +******              LABELS FOR NEW VARIABLES              ******;
18166 +label _NODE_ = 'Node' ;
18167 +label _LEAF_ = 'Leaf' ;
18168 +label P_Contributed_To_AccidentYes =
18169 +'Predicted: Contributed_To_Accident=Yes' ;
18170 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18171 +label Q_Contributed_To_AccidentYes =
18172 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18173 +label Q_Contributed_To_AccidentNo =
18174 +'Unadjusted P: Contributed_To_Accident=No' ;
18175 +label V_Contributed_To_AccidentYes =
18176 +'Validated: Contributed_To_Accident=Yes' ;
18177 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18178 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18179 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18180 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18181 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18182 +label U_Contributed_To_Accident =
18183 +'Unnormalized Into: Contributed_To_Accident' ;
18184 +label _WARN_ = 'Warnings' ;
18185 +
18186 +
18187 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18188 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18189 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18190 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18191 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18192 +
18193 +
18194 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18195 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18196 +
18197 +******             ASSIGN OBSERVATION TO NODE             ******;
18198 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
18199 + %DMNORMIP( _ARBFMT_12);
18200 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18201 +  _NODE_  =                    3;
18202 +  _LEAF_  =                    4;
18203 +  P_Contributed_To_AccidentYes  =     0.96534653465346;
18204 +  P_Contributed_To_AccidentNo  =     0.03465346534653;
18205 +  Q_Contributed_To_AccidentYes  =     0.96534653465346;
18206 +  Q_Contributed_To_AccidentNo  =     0.03465346534653;
18207 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
18208 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
18209 +  I_Contributed_To_Accident  = 'YES' ;
18210 +  U_Contributed_To_Accident  = 'Yes' ;
18211 +  END;
18212 +ELSE DO;
18213 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18214 +   %DMNORMIP( _ARBFMT_12);
18215 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
18216 +    _NODE_  =                    5;
18217 +    _LEAF_  =                    3;
18218 +    P_Contributed_To_AccidentYes  =     0.97872340425531;
18219 +    P_Contributed_To_AccidentNo  =     0.02127659574468;
18220 +    Q_Contributed_To_AccidentYes  =     0.97872340425531;
18221 +    Q_Contributed_To_AccidentNo  =     0.02127659574468;
18222 +    V_Contributed_To_AccidentYes  =                    0;
18223 +    V_Contributed_To_AccidentNo  =                    0;
18224 +    I_Contributed_To_Accident  = 'YES' ;
18225 +    U_Contributed_To_Accident  = 'Yes' ;
18226 +    END;
18227 +  ELSE DO;
18228 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
18229 +     %DMNORMIP( _ARBFMT_12);
18230 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
18231 +      _NODE_  =                    7;
18232 +      _LEAF_  =                    2;
18233 +      P_Contributed_To_AccidentYes  =     0.16216216216216;
18234 +      P_Contributed_To_AccidentNo  =     0.83783783783783;
18235 +      Q_Contributed_To_AccidentYes  =     0.16216216216216;
18236 +      Q_Contributed_To_AccidentNo  =     0.83783783783783;
18237 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
18238 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
18239 +      I_Contributed_To_Accident  = 'NO' ;
18240 +      U_Contributed_To_Accident  = 'No' ;
18241 +      END;
18242 +    ELSE DO;
18243 +      _NODE_  =                    6;
18244 +      _LEAF_  =                    1;
18245 +      P_Contributed_To_AccidentYes  =     0.36382978723404;
18246 +      P_Contributed_To_AccidentNo  =     0.63617021276595;
18247 +      Q_Contributed_To_AccidentYes  =     0.36382978723404;
18248 +      Q_Contributed_To_AccidentNo  =     0.63617021276595;
18249 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
18250 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
18251 +      I_Contributed_To_Accident  = 'NO' ;
18252 +      U_Contributed_To_Accident  = 'No' ;
18253 +      END;
18254 +    END;
18255 +  END;
18256 +
18257 +*****  RESIDUALS R_ *************;
18258 +IF  F_Contributed_To_Accident  NE 'YES'
18259 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
18260 +        R_Contributed_To_AccidentYes  = .;
18261 +        R_Contributed_To_AccidentNo  = .;
18262 + END;
18263 + ELSE DO;
18264 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
18265 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
18266 +       SELECT( F_Contributed_To_Accident  );
18267 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
18268 +        R_Contributed_To_AccidentYes  +1;
18269 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
18270 +        R_Contributed_To_AccidentNo  +1;
18271 +       END;
18272 + END;
18273 +
18274 +****************************************************************;
18275 +******          END OF DECISION TREE SCORING CODE         ******;
18276 +****************************************************************;
18277 +
18278 +drop _LEAF_;
18279 +*------------------------------------------------------------*;
18280 +* EndGrp: EndGroup;
18281 +* User: Divya;
18282 +* Date: 23NOV16: 03:25;
18283 +* Bagging: Loop=7;
18284 +*------------------------------------------------------------*;
18285 +*------------------------------------------------------------*;
18286 +* Bagging: accumulate probabilities for iteration: 7;
18287 +*------------------------------------------------------------*;
18288 +P_Contributed_To_AccidentYes = _BagVar1*(6/7) + P_Contributed_To_AccidentYes*(1/7);
18289 +P_Contributed_To_AccidentNo = _BagVar2*(6/7) + P_Contributed_To_AccidentNo*(1/7);
18290 +*------------------------------------------------------------*;
18291 +* Bagging: Saving Probabilities for Next Iteration;
18292 +*------------------------------------------------------------*;
18293 +_BagVar1 = P_Contributed_To_AccidentYes;
18294 +_BagVar2 = P_Contributed_To_AccidentNo;
18295 +*------------------------------------------------------------*;
18296 +* Grp: StartGroup;
18297 +* User: Divya;
18298 +* Date: 23NOV16: 03:26;
18299 +* Bagging: Loop=8;
18300 +*------------------------------------------------------------*;
18301 +*------------------------------------------------------------*;
18302 +* Tree5: DecisionTree;
18303 +* User: Divya;
18304 +* Date: 23NOV16: 03:26;
18305 +* Bagging: Loop=8;
18306 +*------------------------------------------------------------*;
18307 +****************************************************************;
18308 +******             DECISION TREE SCORING CODE             ******;
18309 +****************************************************************;
18310 +
18311 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18312 +LENGTH F_Contributed_To_Accident  $    3;
18313 +LENGTH I_Contributed_To_Accident  $    3;
18314 +LENGTH U_Contributed_To_Accident  $    3;
18315 +LENGTH _WARN_  $    4;
18316 +
18317 +******              LABELS FOR NEW VARIABLES              ******;
18318 +label _NODE_ = 'Node' ;
18319 +label _LEAF_ = 'Leaf' ;
18320 +label P_Contributed_To_AccidentYes =
18321 +'Predicted: Contributed_To_Accident=Yes' ;
18322 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18323 +label Q_Contributed_To_AccidentYes =
18324 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18325 +label Q_Contributed_To_AccidentNo =
18326 +'Unadjusted P: Contributed_To_Accident=No' ;
18327 +label V_Contributed_To_AccidentYes =
18328 +'Validated: Contributed_To_Accident=Yes' ;
18329 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18330 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18331 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18332 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18333 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18334 +label U_Contributed_To_Accident =
18335 +'Unnormalized Into: Contributed_To_Accident' ;
18336 +label _WARN_ = 'Warnings' ;
18337 +
18338 +
18339 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18340 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18341 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18342 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18343 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18344 +
18345 +
18346 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18347 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18348 +
18349 +******             ASSIGN OBSERVATION TO NODE             ******;
18350 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
18351 + %DMNORMIP( _ARBFMT_12);
18352 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18353 +  _NODE_  =                    3;
18354 +  _LEAF_  =                    4;
18355 +  P_Contributed_To_AccidentYes  =     0.96511627906976;
18356 +  P_Contributed_To_AccidentNo  =     0.03488372093023;
18357 +  Q_Contributed_To_AccidentYes  =     0.96511627906976;
18358 +  Q_Contributed_To_AccidentNo  =     0.03488372093023;
18359 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
18360 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
18361 +  I_Contributed_To_Accident  = 'YES' ;
18362 +  U_Contributed_To_Accident  = 'Yes' ;
18363 +  END;
18364 +ELSE DO;
18365 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18366 +   %DMNORMIP( _ARBFMT_12);
18367 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
18368 +    _NODE_  =                    5;
18369 +    _LEAF_  =                    3;
18370 +    P_Contributed_To_AccidentYes  =     0.97826086956521;
18371 +    P_Contributed_To_AccidentNo  =     0.02173913043478;
18372 +    Q_Contributed_To_AccidentYes  =     0.97826086956521;
18373 +    Q_Contributed_To_AccidentNo  =     0.02173913043478;
18374 +    V_Contributed_To_AccidentYes  =                    0;
18375 +    V_Contributed_To_AccidentNo  =                    0;
18376 +    I_Contributed_To_Accident  = 'YES' ;
18377 +    U_Contributed_To_Accident  = 'Yes' ;
18378 +    END;
18379 +  ELSE DO;
18380 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
18381 +     %DMNORMIP( _ARBFMT_12);
18382 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
18383 +      _NODE_  =                    9;
18384 +      _LEAF_  =                    2;
18385 +      P_Contributed_To_AccidentYes  =     0.18539325842696;
18386 +      P_Contributed_To_AccidentNo  =     0.81460674157303;
18387 +      Q_Contributed_To_AccidentYes  =     0.18539325842696;
18388 +      Q_Contributed_To_AccidentNo  =     0.81460674157303;
18389 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
18390 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
18391 +      I_Contributed_To_Accident  = 'NO' ;
18392 +      U_Contributed_To_Accident  = 'No' ;
18393 +      END;
18394 +    ELSE DO;
18395 +      _NODE_  =                    8;
18396 +      _LEAF_  =                    1;
18397 +      P_Contributed_To_AccidentYes  =     0.32941176470588;
18398 +      P_Contributed_To_AccidentNo  =     0.67058823529411;
18399 +      Q_Contributed_To_AccidentYes  =     0.32941176470588;
18400 +      Q_Contributed_To_AccidentNo  =     0.67058823529411;
18401 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
18402 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
18403 +      I_Contributed_To_Accident  = 'NO' ;
18404 +      U_Contributed_To_Accident  = 'No' ;
18405 +      END;
18406 +    END;
18407 +  END;
18408 +
18409 +*****  RESIDUALS R_ *************;
18410 +IF  F_Contributed_To_Accident  NE 'YES'
18411 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
18412 +        R_Contributed_To_AccidentYes  = .;
18413 +        R_Contributed_To_AccidentNo  = .;
18414 + END;
18415 + ELSE DO;
18416 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
18417 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
18418 +       SELECT( F_Contributed_To_Accident  );
18419 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
18420 +        R_Contributed_To_AccidentYes  +1;
18421 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
18422 +        R_Contributed_To_AccidentNo  +1;
18423 +       END;
18424 + END;
18425 +
18426 +****************************************************************;
18427 +******          END OF DECISION TREE SCORING CODE         ******;
18428 +****************************************************************;
18429 +
18430 +drop _LEAF_;
18431 +*------------------------------------------------------------*;
18432 +* EndGrp: EndGroup;
18433 +* User: Divya;
18434 +* Date: 23NOV16: 03:26;
18435 +* Bagging: Loop=8;
18436 +*------------------------------------------------------------*;
18437 +*------------------------------------------------------------*;
18438 +* Bagging: accumulate probabilities for iteration: 8;
18439 +*------------------------------------------------------------*;
18440 +P_Contributed_To_AccidentYes = _BagVar1*(7/8) + P_Contributed_To_AccidentYes*(1/8);
18441 +P_Contributed_To_AccidentNo = _BagVar2*(7/8) + P_Contributed_To_AccidentNo*(1/8);
18442 +*------------------------------------------------------------*;
18443 +* Bagging: Saving Probabilities for Next Iteration;
18444 +*------------------------------------------------------------*;
18445 +_BagVar1 = P_Contributed_To_AccidentYes;
18446 +_BagVar2 = P_Contributed_To_AccidentNo;
18447 +*------------------------------------------------------------*;
18448 +* Grp: StartGroup;
18449 +* User: Divya;
18450 +* Date: 23NOV16: 03:26;
18451 +* Bagging: Loop=9;
18452 +*------------------------------------------------------------*;
18453 +*------------------------------------------------------------*;
18454 +* Tree5: DecisionTree;
18455 +* User: Divya;
18456 +* Date: 23NOV16: 03:26;
18457 +* Bagging: Loop=9;
18458 +*------------------------------------------------------------*;
18459 +****************************************************************;
18460 +******             DECISION TREE SCORING CODE             ******;
18461 +****************************************************************;
18462 +
18463 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18464 +LENGTH F_Contributed_To_Accident  $    3;
18465 +LENGTH I_Contributed_To_Accident  $    3;
18466 +LENGTH U_Contributed_To_Accident  $    3;
18467 +LENGTH _WARN_  $    4;
18468 +
18469 +******              LABELS FOR NEW VARIABLES              ******;
18470 +label _NODE_ = 'Node' ;
18471 +label _LEAF_ = 'Leaf' ;
18472 +label P_Contributed_To_AccidentYes =
18473 +'Predicted: Contributed_To_Accident=Yes' ;
18474 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18475 +label Q_Contributed_To_AccidentYes =
18476 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18477 +label Q_Contributed_To_AccidentNo =
18478 +'Unadjusted P: Contributed_To_Accident=No' ;
18479 +label V_Contributed_To_AccidentYes =
18480 +'Validated: Contributed_To_Accident=Yes' ;
18481 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18482 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18483 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18484 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18485 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18486 +label U_Contributed_To_Accident =
18487 +'Unnormalized Into: Contributed_To_Accident' ;
18488 +label _WARN_ = 'Warnings' ;
18489 +
18490 +
18491 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18492 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18493 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18494 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18495 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18496 +
18497 +
18498 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18499 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18500 +
18501 +******             ASSIGN OBSERVATION TO NODE             ******;
18502 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
18503 + %DMNORMIP( _ARBFMT_12);
18504 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18505 +  _NODE_  =                    3;
18506 +  _LEAF_  =                    4;
18507 +  P_Contributed_To_AccidentYes  =     0.96174863387978;
18508 +  P_Contributed_To_AccidentNo  =     0.03825136612021;
18509 +  Q_Contributed_To_AccidentYes  =     0.96174863387978;
18510 +  Q_Contributed_To_AccidentNo  =     0.03825136612021;
18511 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
18512 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
18513 +  I_Contributed_To_Accident  = 'YES' ;
18514 +  U_Contributed_To_Accident  = 'Yes' ;
18515 +  END;
18516 +ELSE DO;
18517 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18518 +   %DMNORMIP( _ARBFMT_12);
18519 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
18520 +    _NODE_  =                    5;
18521 +    _LEAF_  =                    3;
18522 +    P_Contributed_To_AccidentYes  =     0.97391304347826;
18523 +    P_Contributed_To_AccidentNo  =     0.02608695652173;
18524 +    Q_Contributed_To_AccidentYes  =     0.97391304347826;
18525 +    Q_Contributed_To_AccidentNo  =     0.02608695652173;
18526 +    V_Contributed_To_AccidentYes  =                    0;
18527 +    V_Contributed_To_AccidentNo  =                    0;
18528 +    I_Contributed_To_Accident  = 'YES' ;
18529 +    U_Contributed_To_Accident  = 'Yes' ;
18530 +    END;
18531 +  ELSE DO;
18532 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
18533 +     %DMNORMIP( _ARBFMT_12);
18534 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
18535 +      _NODE_  =                    7;
18536 +      _LEAF_  =                    2;
18537 +      P_Contributed_To_AccidentYes  =     0.15463917525773;
18538 +      P_Contributed_To_AccidentNo  =     0.84536082474226;
18539 +      Q_Contributed_To_AccidentYes  =     0.15463917525773;
18540 +      Q_Contributed_To_AccidentNo  =     0.84536082474226;
18541 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
18542 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
18543 +      I_Contributed_To_Accident  = 'NO' ;
18544 +      U_Contributed_To_Accident  = 'No' ;
18545 +      END;
18546 +    ELSE DO;
18547 +      _NODE_  =                    6;
18548 +      _LEAF_  =                    1;
18549 +      P_Contributed_To_AccidentYes  =     0.35770750988142;
18550 +      P_Contributed_To_AccidentNo  =     0.64229249011857;
18551 +      Q_Contributed_To_AccidentYes  =     0.35770750988142;
18552 +      Q_Contributed_To_AccidentNo  =     0.64229249011857;
18553 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
18554 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
18555 +      I_Contributed_To_Accident  = 'NO' ;
18556 +      U_Contributed_To_Accident  = 'No' ;
18557 +      END;
18558 +    END;
18559 +  END;
18560 +
18561 +*****  RESIDUALS R_ *************;
18562 +IF  F_Contributed_To_Accident  NE 'YES'
18563 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
18564 +        R_Contributed_To_AccidentYes  = .;
18565 +        R_Contributed_To_AccidentNo  = .;
18566 + END;
18567 + ELSE DO;
18568 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
18569 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
18570 +       SELECT( F_Contributed_To_Accident  );
18571 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
18572 +        R_Contributed_To_AccidentYes  +1;
18573 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
18574 +        R_Contributed_To_AccidentNo  +1;
18575 +       END;
18576 + END;
18577 +
18578 +****************************************************************;
18579 +******          END OF DECISION TREE SCORING CODE         ******;
18580 +****************************************************************;
18581 +
18582 +drop _LEAF_;
18583 +*------------------------------------------------------------*;
18584 +* EndGrp: EndGroup;
18585 +* User: Divya;
18586 +* Date: 23NOV16: 03:26;
18587 +* Bagging: Loop=9;
18588 +*------------------------------------------------------------*;
18589 +*------------------------------------------------------------*;
18590 +* Bagging: accumulate probabilities for iteration: 9;
18591 +*------------------------------------------------------------*;
18592 +P_Contributed_To_AccidentYes = _BagVar1*(8/9) + P_Contributed_To_AccidentYes*(1/9);
18593 +P_Contributed_To_AccidentNo = _BagVar2*(8/9) + P_Contributed_To_AccidentNo*(1/9);
18594 +*------------------------------------------------------------*;
18595 +* Bagging: Saving Probabilities for Next Iteration;
18596 +*------------------------------------------------------------*;
18597 +_BagVar1 = P_Contributed_To_AccidentYes;
18598 +_BagVar2 = P_Contributed_To_AccidentNo;
18599 +*------------------------------------------------------------*;
18600 +* Grp: StartGroup;
18601 +* User: Divya;
18602 +* Date: 23NOV16: 03:27;
18603 +* Bagging: Loop=10;
18604 +*------------------------------------------------------------*;
18605 +*------------------------------------------------------------*;
18606 +* Tree5: DecisionTree;
18607 +* User: Divya;
18608 +* Date: 23NOV16: 03:27;
18609 +* Bagging: Loop=10;
18610 +*------------------------------------------------------------*;
18611 +****************************************************************;
18612 +******             DECISION TREE SCORING CODE             ******;
18613 +****************************************************************;
18614 +
18615 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18616 +LENGTH F_Contributed_To_Accident  $    3;
18617 +LENGTH I_Contributed_To_Accident  $    3;
18618 +LENGTH U_Contributed_To_Accident  $    3;
18619 +LENGTH _WARN_  $    4;
18620 +
18621 +******              LABELS FOR NEW VARIABLES              ******;
18622 +label _NODE_ = 'Node' ;
18623 +label _LEAF_ = 'Leaf' ;
18624 +label P_Contributed_To_AccidentYes =
18625 +'Predicted: Contributed_To_Accident=Yes' ;
18626 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18627 +label Q_Contributed_To_AccidentYes =
18628 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18629 +label Q_Contributed_To_AccidentNo =
18630 +'Unadjusted P: Contributed_To_Accident=No' ;
18631 +label V_Contributed_To_AccidentYes =
18632 +'Validated: Contributed_To_Accident=Yes' ;
18633 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18634 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18635 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18636 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18637 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18638 +label U_Contributed_To_Accident =
18639 +'Unnormalized Into: Contributed_To_Accident' ;
18640 +label _WARN_ = 'Warnings' ;
18641 +
18642 +
18643 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18644 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18645 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18646 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18647 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18648 +
18649 +
18650 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18651 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18652 +
18653 +******             ASSIGN OBSERVATION TO NODE             ******;
18654 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
18655 + %DMNORMIP( _ARBFMT_12);
18656 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18657 +  _NODE_  =                    3;
18658 +  _LEAF_  =                    4;
18659 +  P_Contributed_To_AccidentYes  =                 0.92;
18660 +  P_Contributed_To_AccidentNo  =                 0.08;
18661 +  Q_Contributed_To_AccidentYes  =                 0.92;
18662 +  Q_Contributed_To_AccidentNo  =                 0.08;
18663 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
18664 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
18665 +  I_Contributed_To_Accident  = 'YES' ;
18666 +  U_Contributed_To_Accident  = 'Yes' ;
18667 +  END;
18668 +ELSE DO;
18669 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18670 +   %DMNORMIP( _ARBFMT_12);
18671 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
18672 +    _NODE_  =                    5;
18673 +    _LEAF_  =                    3;
18674 +    P_Contributed_To_AccidentYes  =     0.96638655462184;
18675 +    P_Contributed_To_AccidentNo  =     0.03361344537815;
18676 +    Q_Contributed_To_AccidentYes  =     0.96638655462184;
18677 +    Q_Contributed_To_AccidentNo  =     0.03361344537815;
18678 +    V_Contributed_To_AccidentYes  =                    0;
18679 +    V_Contributed_To_AccidentNo  =                    0;
18680 +    I_Contributed_To_Accident  = 'YES' ;
18681 +    U_Contributed_To_Accident  = 'Yes' ;
18682 +    END;
18683 +  ELSE DO;
18684 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
18685 +     %DMNORMIP( _ARBFMT_12);
18686 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
18687 +      _NODE_  =                    7;
18688 +      _LEAF_  =                    2;
18689 +      P_Contributed_To_AccidentYes  =     0.18357487922705;
18690 +      P_Contributed_To_AccidentNo  =     0.81642512077294;
18691 +      Q_Contributed_To_AccidentYes  =     0.18357487922705;
18692 +      Q_Contributed_To_AccidentNo  =     0.81642512077294;
18693 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
18694 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
18695 +      I_Contributed_To_Accident  = 'NO' ;
18696 +      U_Contributed_To_Accident  = 'No' ;
18697 +      END;
18698 +    ELSE DO;
18699 +      _NODE_  =                    6;
18700 +      _LEAF_  =                    1;
18701 +      P_Contributed_To_AccidentYes  =     0.36228813559322;
18702 +      P_Contributed_To_AccidentNo  =     0.63771186440677;
18703 +      Q_Contributed_To_AccidentYes  =     0.36228813559322;
18704 +      Q_Contributed_To_AccidentNo  =     0.63771186440677;
18705 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
18706 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
18707 +      I_Contributed_To_Accident  = 'NO' ;
18708 +      U_Contributed_To_Accident  = 'No' ;
18709 +      END;
18710 +    END;
18711 +  END;
18712 +
18713 +*****  RESIDUALS R_ *************;
18714 +IF  F_Contributed_To_Accident  NE 'YES'
18715 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
18716 +        R_Contributed_To_AccidentYes  = .;
18717 +        R_Contributed_To_AccidentNo  = .;
18718 + END;
18719 + ELSE DO;
18720 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
18721 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
18722 +       SELECT( F_Contributed_To_Accident  );
18723 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
18724 +        R_Contributed_To_AccidentYes  +1;
18725 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
18726 +        R_Contributed_To_AccidentNo  +1;
18727 +       END;
18728 + END;
18729 +
18730 +****************************************************************;
18731 +******          END OF DECISION TREE SCORING CODE         ******;
18732 +****************************************************************;
18733 +
18734 +drop _LEAF_;
18735 +*------------------------------------------------------------*;
18736 +* EndGrp: EndGroup;
18737 +* User: Divya;
18738 +* Date: 23NOV16: 03:27;
18739 +* Bagging: Loop=10;
18740 +*------------------------------------------------------------*;
18741 +*------------------------------------------------------------*;
18742 +* Bagging: accumulate final probabilities;
18743 +*------------------------------------------------------------*;
18744 +P_Contributed_To_AccidentYes = _BagVar1*(9/10) + P_Contributed_To_AccidentYes*(1/10);
18745 +P_Contributed_To_AccidentNo = _BagVar2*(9/10) + P_Contributed_To_AccidentNo*(1/10);
18746 +*------------------------------------------------------------*;
18747 +*Computing Residual Vars: Contributed_To_Accident;
18748 +*------------------------------------------------------------*;
18749 +Length R_Contributed_To_AccidentYes 8;
18750 +Label R_Contributed_To_AccidentYes='Residual: Contributed_To_Accident=Yes';
18751 +Length R_Contributed_To_AccidentNo 8;
18752 +Label R_Contributed_To_AccidentNo='Residual: Contributed_To_Accident=No';
18753 +if
18754 + F_Contributed_To_Accident ne 'YES'
18755 +and F_Contributed_To_Accident ne 'NO'
18756 + then do;
18757 +R_Contributed_To_AccidentYes=.;
18758 +R_Contributed_To_AccidentNo=.;
18759 +end;
18760 +else do;
18761 +R_Contributed_To_AccidentYes= - P_Contributed_To_AccidentYes;
18762 +R_Contributed_To_AccidentNo= - P_Contributed_To_AccidentNo;
18763 +select(F_Contributed_To_Accident);
18764 +when('YES')R_Contributed_To_AccidentYes= R_Contributed_To_AccidentYes+1;
18765 +when('NO')R_Contributed_To_AccidentNo= R_Contributed_To_AccidentNo+1;
18766 +otherwise;
18767 +end;
18768 +end;
NOTE: %INCLUDE (level 1) ending.
 
NOTE: DATA STEP view saved on file EMWS1.ENDGRP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.STAT2_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
 
NOTE: %INCLUDE (level 1) file EMFLOW is file D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas.
18769 +*------------------------------------------------------------*;
18770 +* EndGrp: ;
18771 +* User: Divya;
18772 +* Date: 23NOV16: 03:23;
18773 +*------------------------------------------------------------* ;
18774 +* Ensemble Code;
18775 +*------------------------------------------------------------* ;
18776 +* Bagging: Loop=1;
18777 +* Temporary Variables;
18778 +drop _BagVar1;
18779 +_BagVar1 = 0;
18780 +drop _BagVar2;
18781 +_BagVar2 = 0;
18782 +*------------------------------------------------------------*;
18783 +* Grp: StartGroup;
18784 +* User: Divya;
18785 +* Date: 23NOV16: 03:23;
18786 +* Bagging: Loop=1;
18787 +*------------------------------------------------------------*;
18788 +*------------------------------------------------------------*;
18789 +* Tree5: DecisionTree;
18790 +* User: Divya;
18791 +* Date: 23NOV16: 03:23;
18792 +* Bagging: Loop=1;
18793 +*------------------------------------------------------------*;
18794 +****************************************************************;
18795 +******             DECISION TREE SCORING CODE             ******;
18796 +****************************************************************;
18797 +
18798 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18799 +LENGTH F_Contributed_To_Accident  $    3;
18800 +LENGTH I_Contributed_To_Accident  $    3;
18801 +LENGTH U_Contributed_To_Accident  $    3;
18802 +LENGTH _WARN_  $    4;
18803 +
18804 +******              LABELS FOR NEW VARIABLES              ******;
18805 +label _NODE_ = 'Node' ;
18806 +label _LEAF_ = 'Leaf' ;
18807 +label P_Contributed_To_AccidentYes =
18808 +'Predicted: Contributed_To_Accident=Yes' ;
18809 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18810 +label Q_Contributed_To_AccidentYes =
18811 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18812 +label Q_Contributed_To_AccidentNo =
18813 +'Unadjusted P: Contributed_To_Accident=No' ;
18814 +label V_Contributed_To_AccidentYes =
18815 +'Validated: Contributed_To_Accident=Yes' ;
18816 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18817 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18818 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18819 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18820 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18821 +label U_Contributed_To_Accident =
18822 +'Unnormalized Into: Contributed_To_Accident' ;
18823 +label _WARN_ = 'Warnings' ;
18824 +
18825 +
18826 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18827 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18828 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18829 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18830 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18831 +
18832 +
18833 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18834 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18835 +
18836 +******             ASSIGN OBSERVATION TO NODE             ******;
18837 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
18838 + %DMNORMIP( _ARBFMT_12);
18839 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18840 +  _NODE_  =                    3;
18841 +  _LEAF_  =                    4;
18842 +  P_Contributed_To_AccidentYes  =     0.96969696969696;
18843 +  P_Contributed_To_AccidentNo  =     0.03030303030303;
18844 +  Q_Contributed_To_AccidentYes  =     0.96969696969696;
18845 +  Q_Contributed_To_AccidentNo  =     0.03030303030303;
18846 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
18847 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
18848 +  I_Contributed_To_Accident  = 'YES' ;
18849 +  U_Contributed_To_Accident  = 'Yes' ;
18850 +  END;
18851 +ELSE DO;
18852 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18853 +   %DMNORMIP( _ARBFMT_12);
18854 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
18855 +    _NODE_  =                    5;
18856 +    _LEAF_  =                    3;
18857 +    P_Contributed_To_AccidentYes  =      0.9763779527559;
18858 +    P_Contributed_To_AccidentNo  =     0.02362204724409;
18859 +    Q_Contributed_To_AccidentYes  =      0.9763779527559;
18860 +    Q_Contributed_To_AccidentNo  =     0.02362204724409;
18861 +    V_Contributed_To_AccidentYes  =                    0;
18862 +    V_Contributed_To_AccidentNo  =                    0;
18863 +    I_Contributed_To_Accident  = 'YES' ;
18864 +    U_Contributed_To_Accident  = 'Yes' ;
18865 +    END;
18866 +  ELSE DO;
18867 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
18868 +     %DMNORMIP( _ARBFMT_12);
18869 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
18870 +      _NODE_  =                    7;
18871 +      _LEAF_  =                    2;
18872 +      P_Contributed_To_AccidentYes  =     0.18579234972677;
18873 +      P_Contributed_To_AccidentNo  =     0.81420765027322;
18874 +      Q_Contributed_To_AccidentYes  =     0.18579234972677;
18875 +      Q_Contributed_To_AccidentNo  =     0.81420765027322;
18876 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
18877 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
18878 +      I_Contributed_To_Accident  = 'NO' ;
18879 +      U_Contributed_To_Accident  = 'No' ;
18880 +      END;
18881 +    ELSE DO;
18882 +      _NODE_  =                    6;
18883 +      _LEAF_  =                    1;
18884 +      P_Contributed_To_AccidentYes  =     0.38775510204081;
18885 +      P_Contributed_To_AccidentNo  =     0.61224489795918;
18886 +      Q_Contributed_To_AccidentYes  =     0.38775510204081;
18887 +      Q_Contributed_To_AccidentNo  =     0.61224489795918;
18888 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
18889 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
18890 +      I_Contributed_To_Accident  = 'NO' ;
18891 +      U_Contributed_To_Accident  = 'No' ;
18892 +      END;
18893 +    END;
18894 +  END;
18895 +
18896 +*****  RESIDUALS R_ *************;
18897 +IF  F_Contributed_To_Accident  NE 'YES'
18898 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
18899 +        R_Contributed_To_AccidentYes  = .;
18900 +        R_Contributed_To_AccidentNo  = .;
18901 + END;
18902 + ELSE DO;
18903 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
18904 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
18905 +       SELECT( F_Contributed_To_Accident  );
18906 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
18907 +        R_Contributed_To_AccidentYes  +1;
18908 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
18909 +        R_Contributed_To_AccidentNo  +1;
18910 +       END;
18911 + END;
18912 +
18913 +****************************************************************;
18914 +******          END OF DECISION TREE SCORING CODE         ******;
18915 +****************************************************************;
18916 +
18917 +drop _LEAF_;
18918 +*------------------------------------------------------------*;
18919 +* EndGrp: EndGroup;
18920 +* User: Divya;
18921 +* Date: 23NOV16: 03:23;
18922 +* Bagging: Loop=1;
18923 +*------------------------------------------------------------*;
18924 +*------------------------------------------------------------*;
18925 +* Bagging: Saving Probabilities for Next Iteration;
18926 +*------------------------------------------------------------*;
18927 +_BagVar1 = P_Contributed_To_AccidentYes;
18928 +_BagVar2 = P_Contributed_To_AccidentNo;
18929 +*------------------------------------------------------------*;
18930 +* Grp: StartGroup;
18931 +* User: Divya;
18932 +* Date: 23NOV16: 03:23;
18933 +* Bagging: Loop=2;
18934 +*------------------------------------------------------------*;
18935 +*------------------------------------------------------------*;
18936 +* Tree5: DecisionTree;
18937 +* User: Divya;
18938 +* Date: 23NOV16: 03:23;
18939 +* Bagging: Loop=2;
18940 +*------------------------------------------------------------*;
18941 +****************************************************************;
18942 +******             DECISION TREE SCORING CODE             ******;
18943 +****************************************************************;
18944 +
18945 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18946 +LENGTH F_Contributed_To_Accident  $    3;
18947 +LENGTH I_Contributed_To_Accident  $    3;
18948 +LENGTH U_Contributed_To_Accident  $    3;
18949 +LENGTH _WARN_  $    4;
18950 +
18951 +******              LABELS FOR NEW VARIABLES              ******;
18952 +label _NODE_ = 'Node' ;
18953 +label _LEAF_ = 'Leaf' ;
18954 +label P_Contributed_To_AccidentYes =
18955 +'Predicted: Contributed_To_Accident=Yes' ;
18956 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
18957 +label Q_Contributed_To_AccidentYes =
18958 +'Unadjusted P: Contributed_To_Accident=Yes' ;
18959 +label Q_Contributed_To_AccidentNo =
18960 +'Unadjusted P: Contributed_To_Accident=No' ;
18961 +label V_Contributed_To_AccidentYes =
18962 +'Validated: Contributed_To_Accident=Yes' ;
18963 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
18964 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
18965 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
18966 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
18967 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
18968 +label U_Contributed_To_Accident =
18969 +'Unnormalized Into: Contributed_To_Accident' ;
18970 +label _WARN_ = 'Warnings' ;
18971 +
18972 +
18973 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18974 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
18975 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
18976 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
18977 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
18978 +
18979 +
18980 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
18981 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
18982 +
18983 +******             ASSIGN OBSERVATION TO NODE             ******;
18984 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
18985 + %DMNORMIP( _ARBFMT_12);
18986 +IF _ARBFMT_12 IN ('3' ) THEN DO;
18987 +  _NODE_  =                    3;
18988 +  _LEAF_  =                    4;
18989 +  P_Contributed_To_AccidentYes  =     0.98561151079136;
18990 +  P_Contributed_To_AccidentNo  =     0.01438848920863;
18991 +  Q_Contributed_To_AccidentYes  =     0.98561151079136;
18992 +  Q_Contributed_To_AccidentNo  =     0.01438848920863;
18993 +  V_Contributed_To_AccidentYes  =                    0;
18994 +  V_Contributed_To_AccidentNo  =                    0;
18995 +  I_Contributed_To_Accident  = 'YES' ;
18996 +  U_Contributed_To_Accident  = 'Yes' ;
18997 +  END;
18998 +ELSE DO;
18999 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19000 +   %DMNORMIP( _ARBFMT_12);
19001 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19002 +    _NODE_  =                    5;
19003 +    _LEAF_  =                    3;
19004 +    P_Contributed_To_AccidentYes  =     0.93421052631578;
19005 +    P_Contributed_To_AccidentNo  =     0.06578947368421;
19006 +    Q_Contributed_To_AccidentYes  =     0.93421052631578;
19007 +    Q_Contributed_To_AccidentNo  =     0.06578947368421;
19008 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
19009 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
19010 +    I_Contributed_To_Accident  = 'YES' ;
19011 +    U_Contributed_To_Accident  = 'Yes' ;
19012 +    END;
19013 +  ELSE DO;
19014 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19015 +     %DMNORMIP( _ARBFMT_12);
19016 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19017 +      _NODE_  =                    7;
19018 +      _LEAF_  =                    2;
19019 +      P_Contributed_To_AccidentYes  =     0.15028901734104;
19020 +      P_Contributed_To_AccidentNo  =     0.84971098265895;
19021 +      Q_Contributed_To_AccidentYes  =     0.15028901734104;
19022 +      Q_Contributed_To_AccidentNo  =     0.84971098265895;
19023 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19024 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19025 +      I_Contributed_To_Accident  = 'NO' ;
19026 +      U_Contributed_To_Accident  = 'No' ;
19027 +      END;
19028 +    ELSE DO;
19029 +      _NODE_  =                    6;
19030 +      _LEAF_  =                    1;
19031 +      P_Contributed_To_AccidentYes  =     0.34456928838951;
19032 +      P_Contributed_To_AccidentNo  =     0.65543071161048;
19033 +      Q_Contributed_To_AccidentYes  =     0.34456928838951;
19034 +      Q_Contributed_To_AccidentNo  =     0.65543071161048;
19035 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19036 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19037 +      I_Contributed_To_Accident  = 'NO' ;
19038 +      U_Contributed_To_Accident  = 'No' ;
19039 +      END;
19040 +    END;
19041 +  END;
19042 +
19043 +*****  RESIDUALS R_ *************;
19044 +IF  F_Contributed_To_Accident  NE 'YES'
19045 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19046 +        R_Contributed_To_AccidentYes  = .;
19047 +        R_Contributed_To_AccidentNo  = .;
19048 + END;
19049 + ELSE DO;
19050 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19051 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19052 +       SELECT( F_Contributed_To_Accident  );
19053 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19054 +        R_Contributed_To_AccidentYes  +1;
19055 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19056 +        R_Contributed_To_AccidentNo  +1;
19057 +       END;
19058 + END;
19059 +
19060 +****************************************************************;
19061 +******          END OF DECISION TREE SCORING CODE         ******;
19062 +****************************************************************;
19063 +
19064 +drop _LEAF_;
19065 +*------------------------------------------------------------*;
19066 +* EndGrp: EndGroup;
19067 +* User: Divya;
19068 +* Date: 23NOV16: 03:23;
19069 +* Bagging: Loop=2;
19070 +*------------------------------------------------------------*;
19071 +*------------------------------------------------------------*;
19072 +* Bagging: accumulate probabilities for iteration: 2;
19073 +*------------------------------------------------------------*;
19074 +P_Contributed_To_AccidentYes = _BagVar1*(1/2) + P_Contributed_To_AccidentYes*(1/2);
19075 +P_Contributed_To_AccidentNo = _BagVar2*(1/2) + P_Contributed_To_AccidentNo*(1/2);
19076 +*------------------------------------------------------------*;
19077 +* Bagging: Saving Probabilities for Next Iteration;
19078 +*------------------------------------------------------------*;
19079 +_BagVar1 = P_Contributed_To_AccidentYes;
19080 +_BagVar2 = P_Contributed_To_AccidentNo;
19081 +*------------------------------------------------------------*;
19082 +* Grp: StartGroup;
19083 +* User: Divya;
19084 +* Date: 23NOV16: 03:24;
19085 +* Bagging: Loop=3;
19086 +*------------------------------------------------------------*;
19087 +*------------------------------------------------------------*;
19088 +* Tree5: DecisionTree;
19089 +* User: Divya;
19090 +* Date: 23NOV16: 03:24;
19091 +* Bagging: Loop=3;
19092 +*------------------------------------------------------------*;
19093 +****************************************************************;
19094 +******             DECISION TREE SCORING CODE             ******;
19095 +****************************************************************;
19096 +
19097 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
19098 +LENGTH F_Contributed_To_Accident  $    3;
19099 +LENGTH I_Contributed_To_Accident  $    3;
19100 +LENGTH U_Contributed_To_Accident  $    3;
19101 +LENGTH _WARN_  $    4;
19102 +
19103 +******              LABELS FOR NEW VARIABLES              ******;
19104 +label _NODE_ = 'Node' ;
19105 +label _LEAF_ = 'Leaf' ;
19106 +label P_Contributed_To_AccidentYes =
19107 +'Predicted: Contributed_To_Accident=Yes' ;
19108 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
19109 +label Q_Contributed_To_AccidentYes =
19110 +'Unadjusted P: Contributed_To_Accident=Yes' ;
19111 +label Q_Contributed_To_AccidentNo =
19112 +'Unadjusted P: Contributed_To_Accident=No' ;
19113 +label V_Contributed_To_AccidentYes =
19114 +'Validated: Contributed_To_Accident=Yes' ;
19115 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
19116 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
19117 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
19118 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
19119 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
19120 +label U_Contributed_To_Accident =
19121 +'Unnormalized Into: Contributed_To_Accident' ;
19122 +label _WARN_ = 'Warnings' ;
19123 +
19124 +
19125 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
19126 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
19127 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
19128 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
19129 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
19130 +
19131 +
19132 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
19133 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
19134 +
19135 +******             ASSIGN OBSERVATION TO NODE             ******;
19136 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
19137 + %DMNORMIP( _ARBFMT_12);
19138 +IF _ARBFMT_12 IN ('3' ) THEN DO;
19139 +  _NODE_  =                    3;
19140 +  _LEAF_  =                    4;
19141 +  P_Contributed_To_AccidentYes  =     0.97902097902097;
19142 +  P_Contributed_To_AccidentNo  =     0.02097902097902;
19143 +  Q_Contributed_To_AccidentYes  =     0.97902097902097;
19144 +  Q_Contributed_To_AccidentNo  =     0.02097902097902;
19145 +  V_Contributed_To_AccidentYes  =                    0;
19146 +  V_Contributed_To_AccidentNo  =                    0;
19147 +  I_Contributed_To_Accident  = 'YES' ;
19148 +  U_Contributed_To_Accident  = 'Yes' ;
19149 +  END;
19150 +ELSE DO;
19151 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19152 +   %DMNORMIP( _ARBFMT_12);
19153 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19154 +    _NODE_  =                    5;
19155 +    _LEAF_  =                    3;
19156 +    P_Contributed_To_AccidentYes  =     0.94409937888198;
19157 +    P_Contributed_To_AccidentNo  =     0.05590062111801;
19158 +    Q_Contributed_To_AccidentYes  =     0.94409937888198;
19159 +    Q_Contributed_To_AccidentNo  =     0.05590062111801;
19160 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
19161 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
19162 +    I_Contributed_To_Accident  = 'YES' ;
19163 +    U_Contributed_To_Accident  = 'Yes' ;
19164 +    END;
19165 +  ELSE DO;
19166 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19167 +     %DMNORMIP( _ARBFMT_12);
19168 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19169 +      _NODE_  =                    7;
19170 +      _LEAF_  =                    2;
19171 +      P_Contributed_To_AccidentYes  =     0.18407960199004;
19172 +      P_Contributed_To_AccidentNo  =     0.81592039800995;
19173 +      Q_Contributed_To_AccidentYes  =     0.18407960199004;
19174 +      Q_Contributed_To_AccidentNo  =     0.81592039800995;
19175 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19176 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19177 +      I_Contributed_To_Accident  = 'NO' ;
19178 +      U_Contributed_To_Accident  = 'No' ;
19179 +      END;
19180 +    ELSE DO;
19181 +      _NODE_  =                    6;
19182 +      _LEAF_  =                    1;
19183 +      P_Contributed_To_AccidentYes  =     0.35091277890466;
19184 +      P_Contributed_To_AccidentNo  =     0.64908722109533;
19185 +      Q_Contributed_To_AccidentYes  =     0.35091277890466;
19186 +      Q_Contributed_To_AccidentNo  =     0.64908722109533;
19187 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19188 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19189 +      I_Contributed_To_Accident  = 'NO' ;
19190 +      U_Contributed_To_Accident  = 'No' ;
19191 +      END;
19192 +    END;
19193 +  END;
19194 +
19195 +*****  RESIDUALS R_ *************;
19196 +IF  F_Contributed_To_Accident  NE 'YES'
19197 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19198 +        R_Contributed_To_AccidentYes  = .;
19199 +        R_Contributed_To_AccidentNo  = .;
19200 + END;
19201 + ELSE DO;
19202 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19203 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19204 +       SELECT( F_Contributed_To_Accident  );
19205 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19206 +        R_Contributed_To_AccidentYes  +1;
19207 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19208 +        R_Contributed_To_AccidentNo  +1;
19209 +       END;
19210 + END;
19211 +
19212 +****************************************************************;
19213 +******          END OF DECISION TREE SCORING CODE         ******;
19214 +****************************************************************;
19215 +
19216 +drop _LEAF_;
19217 +*------------------------------------------------------------*;
19218 +* EndGrp: EndGroup;
19219 +* User: Divya;
19220 +* Date: 23NOV16: 03:24;
19221 +* Bagging: Loop=3;
19222 +*------------------------------------------------------------*;
19223 +*------------------------------------------------------------*;
19224 +* Bagging: accumulate probabilities for iteration: 3;
19225 +*------------------------------------------------------------*;
19226 +P_Contributed_To_AccidentYes = _BagVar1*(2/3) + P_Contributed_To_AccidentYes*(1/3);
19227 +P_Contributed_To_AccidentNo = _BagVar2*(2/3) + P_Contributed_To_AccidentNo*(1/3);
19228 +*------------------------------------------------------------*;
19229 +* Bagging: Saving Probabilities for Next Iteration;
19230 +*------------------------------------------------------------*;
19231 +_BagVar1 = P_Contributed_To_AccidentYes;
19232 +_BagVar2 = P_Contributed_To_AccidentNo;
19233 +*------------------------------------------------------------*;
19234 +* Grp: StartGroup;
19235 +* User: Divya;
19236 +* Date: 23NOV16: 03:24;
19237 +* Bagging: Loop=4;
19238 +*------------------------------------------------------------*;
19239 +*------------------------------------------------------------*;
19240 +* Tree5: DecisionTree;
19241 +* User: Divya;
19242 +* Date: 23NOV16: 03:24;
19243 +* Bagging: Loop=4;
19244 +*------------------------------------------------------------*;
19245 +****************************************************************;
19246 +******             DECISION TREE SCORING CODE             ******;
19247 +****************************************************************;
19248 +
19249 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
19250 +LENGTH F_Contributed_To_Accident  $    3;
19251 +LENGTH I_Contributed_To_Accident  $    3;
19252 +LENGTH U_Contributed_To_Accident  $    3;
19253 +LENGTH _WARN_  $    4;
19254 +
19255 +******              LABELS FOR NEW VARIABLES              ******;
19256 +label _NODE_ = 'Node' ;
19257 +label _LEAF_ = 'Leaf' ;
19258 +label P_Contributed_To_AccidentYes =
19259 +'Predicted: Contributed_To_Accident=Yes' ;
19260 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
19261 +label Q_Contributed_To_AccidentYes =
19262 +'Unadjusted P: Contributed_To_Accident=Yes' ;
19263 +label Q_Contributed_To_AccidentNo =
19264 +'Unadjusted P: Contributed_To_Accident=No' ;
19265 +label V_Contributed_To_AccidentYes =
19266 +'Validated: Contributed_To_Accident=Yes' ;
19267 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
19268 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
19269 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
19270 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
19271 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
19272 +label U_Contributed_To_Accident =
19273 +'Unnormalized Into: Contributed_To_Accident' ;
19274 +label _WARN_ = 'Warnings' ;
19275 +
19276 +
19277 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
19278 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
19279 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
19280 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
19281 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
19282 +
19283 +
19284 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
19285 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
19286 +
19287 +******             ASSIGN OBSERVATION TO NODE             ******;
19288 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19289 + %DMNORMIP( _ARBFMT_12);
19290 +IF _ARBFMT_12 IN ('3' ) THEN DO;
19291 +  _NODE_  =                    3;
19292 +  _LEAF_  =                    4;
19293 +  P_Contributed_To_AccidentYes  =     0.93491124260355;
19294 +  P_Contributed_To_AccidentNo  =     0.06508875739644;
19295 +  Q_Contributed_To_AccidentYes  =     0.93491124260355;
19296 +  Q_Contributed_To_AccidentNo  =     0.06508875739644;
19297 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
19298 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
19299 +  I_Contributed_To_Accident  = 'YES' ;
19300 +  U_Contributed_To_Accident  = 'Yes' ;
19301 +  END;
19302 +ELSE DO;
19303 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
19304 +   %DMNORMIP( _ARBFMT_12);
19305 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19306 +    _NODE_  =                    5;
19307 +    _LEAF_  =                    3;
19308 +    P_Contributed_To_AccidentYes  =     0.94776119402985;
19309 +    P_Contributed_To_AccidentNo  =     0.05223880597014;
19310 +    Q_Contributed_To_AccidentYes  =     0.94776119402985;
19311 +    Q_Contributed_To_AccidentNo  =     0.05223880597014;
19312 +    V_Contributed_To_AccidentYes  =                    0;
19313 +    V_Contributed_To_AccidentNo  =                    0;
19314 +    I_Contributed_To_Accident  = 'YES' ;
19315 +    U_Contributed_To_Accident  = 'Yes' ;
19316 +    END;
19317 +  ELSE DO;
19318 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19319 +     %DMNORMIP( _ARBFMT_12);
19320 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19321 +      _NODE_  =                    7;
19322 +      _LEAF_  =                    2;
19323 +      P_Contributed_To_AccidentYes  =     0.13333333333333;
19324 +      P_Contributed_To_AccidentNo  =     0.86666666666666;
19325 +      Q_Contributed_To_AccidentYes  =     0.13333333333333;
19326 +      Q_Contributed_To_AccidentNo  =     0.86666666666666;
19327 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19328 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19329 +      I_Contributed_To_Accident  = 'NO' ;
19330 +      U_Contributed_To_Accident  = 'No' ;
19331 +      END;
19332 +    ELSE DO;
19333 +      _NODE_  =                    6;
19334 +      _LEAF_  =                    1;
19335 +      P_Contributed_To_AccidentYes  =     0.37358490566037;
19336 +      P_Contributed_To_AccidentNo  =     0.62641509433962;
19337 +      Q_Contributed_To_AccidentYes  =     0.37358490566037;
19338 +      Q_Contributed_To_AccidentNo  =     0.62641509433962;
19339 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19340 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19341 +      I_Contributed_To_Accident  = 'NO' ;
19342 +      U_Contributed_To_Accident  = 'No' ;
19343 +      END;
19344 +    END;
19345 +  END;
19346 +
19347 +*****  RESIDUALS R_ *************;
19348 +IF  F_Contributed_To_Accident  NE 'YES'
19349 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19350 +        R_Contributed_To_AccidentYes  = .;
19351 +        R_Contributed_To_AccidentNo  = .;
19352 + END;
19353 + ELSE DO;
19354 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19355 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19356 +       SELECT( F_Contributed_To_Accident  );
19357 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19358 +        R_Contributed_To_AccidentYes  +1;
19359 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19360 +        R_Contributed_To_AccidentNo  +1;
19361 +       END;
19362 + END;
19363 +
19364 +****************************************************************;
19365 +******          END OF DECISION TREE SCORING CODE         ******;
19366 +****************************************************************;
19367 +
19368 +drop _LEAF_;
19369 +*------------------------------------------------------------*;
19370 +* EndGrp: EndGroup;
19371 +* User: Divya;
19372 +* Date: 23NOV16: 03:24;
19373 +* Bagging: Loop=4;
19374 +*------------------------------------------------------------*;
19375 +*------------------------------------------------------------*;
19376 +* Bagging: accumulate probabilities for iteration: 4;
19377 +*------------------------------------------------------------*;
19378 +P_Contributed_To_AccidentYes = _BagVar1*(3/4) + P_Contributed_To_AccidentYes*(1/4);
19379 +P_Contributed_To_AccidentNo = _BagVar2*(3/4) + P_Contributed_To_AccidentNo*(1/4);
19380 +*------------------------------------------------------------*;
19381 +* Bagging: Saving Probabilities for Next Iteration;
19382 +*------------------------------------------------------------*;
19383 +_BagVar1 = P_Contributed_To_AccidentYes;
19384 +_BagVar2 = P_Contributed_To_AccidentNo;
19385 +*------------------------------------------------------------*;
19386 +* Grp: StartGroup;
19387 +* User: Divya;
19388 +* Date: 23NOV16: 03:25;
19389 +* Bagging: Loop=5;
19390 +*------------------------------------------------------------*;
19391 +*------------------------------------------------------------*;
19392 +* Tree5: DecisionTree;
19393 +* User: Divya;
19394 +* Date: 23NOV16: 03:25;
19395 +* Bagging: Loop=5;
19396 +*------------------------------------------------------------*;
19397 +****************************************************************;
19398 +******             DECISION TREE SCORING CODE             ******;
19399 +****************************************************************;
19400 +
19401 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
19402 +LENGTH F_Contributed_To_Accident  $    3;
19403 +LENGTH I_Contributed_To_Accident  $    3;
19404 +LENGTH U_Contributed_To_Accident  $    3;
19405 +LENGTH _WARN_  $    4;
19406 +
19407 +******              LABELS FOR NEW VARIABLES              ******;
19408 +label _NODE_ = 'Node' ;
19409 +label _LEAF_ = 'Leaf' ;
19410 +label P_Contributed_To_AccidentYes =
19411 +'Predicted: Contributed_To_Accident=Yes' ;
19412 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
19413 +label Q_Contributed_To_AccidentYes =
19414 +'Unadjusted P: Contributed_To_Accident=Yes' ;
19415 +label Q_Contributed_To_AccidentNo =
19416 +'Unadjusted P: Contributed_To_Accident=No' ;
19417 +label V_Contributed_To_AccidentYes =
19418 +'Validated: Contributed_To_Accident=Yes' ;
19419 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
19420 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
19421 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
19422 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
19423 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
19424 +label U_Contributed_To_Accident =
19425 +'Unnormalized Into: Contributed_To_Accident' ;
19426 +label _WARN_ = 'Warnings' ;
19427 +
19428 +
19429 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
19430 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
19431 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
19432 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
19433 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
19434 +
19435 +
19436 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
19437 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
19438 +
19439 +******             ASSIGN OBSERVATION TO NODE             ******;
19440 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19441 + %DMNORMIP( _ARBFMT_12);
19442 +IF _ARBFMT_12 IN ('3' ) THEN DO;
19443 +  _NODE_  =                    3;
19444 +  _LEAF_  =                    4;
19445 +  P_Contributed_To_AccidentYes  =      0.9217877094972;
19446 +  P_Contributed_To_AccidentNo  =     0.07821229050279;
19447 +  Q_Contributed_To_AccidentYes  =      0.9217877094972;
19448 +  Q_Contributed_To_AccidentNo  =     0.07821229050279;
19449 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
19450 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
19451 +  I_Contributed_To_Accident  = 'YES' ;
19452 +  U_Contributed_To_Accident  = 'Yes' ;
19453 +  END;
19454 +ELSE DO;
19455 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
19456 +   %DMNORMIP( _ARBFMT_12);
19457 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19458 +    _NODE_  =                    5;
19459 +    _LEAF_  =                    3;
19460 +    P_Contributed_To_AccidentYes  =                    1;
19461 +    P_Contributed_To_AccidentNo  =                    0;
19462 +    Q_Contributed_To_AccidentYes  =                    1;
19463 +    Q_Contributed_To_AccidentNo  =                    0;
19464 +    V_Contributed_To_AccidentYes  =                    0;
19465 +    V_Contributed_To_AccidentNo  =                    0;
19466 +    I_Contributed_To_Accident  = 'YES' ;
19467 +    U_Contributed_To_Accident  = 'Yes' ;
19468 +    END;
19469 +  ELSE DO;
19470 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19471 +     %DMNORMIP( _ARBFMT_12);
19472 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19473 +      _NODE_  =                    7;
19474 +      _LEAF_  =                    2;
19475 +      P_Contributed_To_AccidentYes  =     0.13089005235602;
19476 +      P_Contributed_To_AccidentNo  =     0.86910994764397;
19477 +      Q_Contributed_To_AccidentYes  =     0.13089005235602;
19478 +      Q_Contributed_To_AccidentNo  =     0.86910994764397;
19479 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19480 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19481 +      I_Contributed_To_Accident  = 'NO' ;
19482 +      U_Contributed_To_Accident  = 'No' ;
19483 +      END;
19484 +    ELSE DO;
19485 +      _NODE_  =                    6;
19486 +      _LEAF_  =                    1;
19487 +      P_Contributed_To_AccidentYes  =          0.322265625;
19488 +      P_Contributed_To_AccidentNo  =          0.677734375;
19489 +      Q_Contributed_To_AccidentYes  =          0.322265625;
19490 +      Q_Contributed_To_AccidentNo  =          0.677734375;
19491 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19492 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19493 +      I_Contributed_To_Accident  = 'NO' ;
19494 +      U_Contributed_To_Accident  = 'No' ;
19495 +      END;
19496 +    END;
19497 +  END;
19498 +
19499 +*****  RESIDUALS R_ *************;
19500 +IF  F_Contributed_To_Accident  NE 'YES'
19501 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19502 +        R_Contributed_To_AccidentYes  = .;
19503 +        R_Contributed_To_AccidentNo  = .;
19504 + END;
19505 + ELSE DO;
19506 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19507 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19508 +       SELECT( F_Contributed_To_Accident  );
19509 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19510 +        R_Contributed_To_AccidentYes  +1;
19511 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19512 +        R_Contributed_To_AccidentNo  +1;
19513 +       END;
19514 + END;
19515 +
19516 +****************************************************************;
19517 +******          END OF DECISION TREE SCORING CODE         ******;
19518 +****************************************************************;
19519 +
19520 +drop _LEAF_;
19521 +*------------------------------------------------------------*;
19522 +* EndGrp: EndGroup;
19523 +* User: Divya;
19524 +* Date: 23NOV16: 03:25;
19525 +* Bagging: Loop=5;
19526 +*------------------------------------------------------------*;
19527 +*------------------------------------------------------------*;
19528 +* Bagging: accumulate probabilities for iteration: 5;
19529 +*------------------------------------------------------------*;
19530 +P_Contributed_To_AccidentYes = _BagVar1*(4/5) + P_Contributed_To_AccidentYes*(1/5);
19531 +P_Contributed_To_AccidentNo = _BagVar2*(4/5) + P_Contributed_To_AccidentNo*(1/5);
19532 +*------------------------------------------------------------*;
19533 +* Bagging: Saving Probabilities for Next Iteration;
19534 +*------------------------------------------------------------*;
19535 +_BagVar1 = P_Contributed_To_AccidentYes;
19536 +_BagVar2 = P_Contributed_To_AccidentNo;
19537 +*------------------------------------------------------------*;
19538 +* Grp: StartGroup;
19539 +* User: Divya;
19540 +* Date: 23NOV16: 03:25;
19541 +* Bagging: Loop=6;
19542 +*------------------------------------------------------------*;
19543 +*------------------------------------------------------------*;
19544 +* Tree5: DecisionTree;
19545 +* User: Divya;
19546 +* Date: 23NOV16: 03:25;
19547 +* Bagging: Loop=6;
19548 +*------------------------------------------------------------*;
19549 +****************************************************************;
19550 +******             DECISION TREE SCORING CODE             ******;
19551 +****************************************************************;
19552 +
19553 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
19554 +LENGTH F_Contributed_To_Accident  $    3;
19555 +LENGTH I_Contributed_To_Accident  $    3;
19556 +LENGTH U_Contributed_To_Accident  $    3;
19557 +LENGTH _WARN_  $    4;
19558 +
19559 +******              LABELS FOR NEW VARIABLES              ******;
19560 +label _NODE_ = 'Node' ;
19561 +label _LEAF_ = 'Leaf' ;
19562 +label P_Contributed_To_AccidentYes =
19563 +'Predicted: Contributed_To_Accident=Yes' ;
19564 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
19565 +label Q_Contributed_To_AccidentYes =
19566 +'Unadjusted P: Contributed_To_Accident=Yes' ;
19567 +label Q_Contributed_To_AccidentNo =
19568 +'Unadjusted P: Contributed_To_Accident=No' ;
19569 +label V_Contributed_To_AccidentYes =
19570 +'Validated: Contributed_To_Accident=Yes' ;
19571 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
19572 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
19573 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
19574 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
19575 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
19576 +label U_Contributed_To_Accident =
19577 +'Unnormalized Into: Contributed_To_Accident' ;
19578 +label _WARN_ = 'Warnings' ;
19579 +
19580 +
19581 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
19582 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
19583 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
19584 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
19585 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
19586 +
19587 +
19588 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
19589 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
19590 +
19591 +******             ASSIGN OBSERVATION TO NODE             ******;
19592 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19593 + %DMNORMIP( _ARBFMT_12);
19594 +IF _ARBFMT_12 IN ('3' ) THEN DO;
19595 +  _NODE_  =                    3;
19596 +  _LEAF_  =                    4;
19597 +  P_Contributed_To_AccidentYes  =     0.94943820224719;
19598 +  P_Contributed_To_AccidentNo  =      0.0505617977528;
19599 +  Q_Contributed_To_AccidentYes  =     0.94943820224719;
19600 +  Q_Contributed_To_AccidentNo  =      0.0505617977528;
19601 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
19602 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
19603 +  I_Contributed_To_Accident  = 'YES' ;
19604 +  U_Contributed_To_Accident  = 'Yes' ;
19605 +  END;
19606 +ELSE DO;
19607 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
19608 +   %DMNORMIP( _ARBFMT_12);
19609 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19610 +    _NODE_  =                    5;
19611 +    _LEAF_  =                    3;
19612 +    P_Contributed_To_AccidentYes  =                0.952;
19613 +    P_Contributed_To_AccidentNo  =                0.048;
19614 +    Q_Contributed_To_AccidentYes  =                0.952;
19615 +    Q_Contributed_To_AccidentNo  =                0.048;
19616 +    V_Contributed_To_AccidentYes  =                    0;
19617 +    V_Contributed_To_AccidentNo  =                    0;
19618 +    I_Contributed_To_Accident  = 'YES' ;
19619 +    U_Contributed_To_Accident  = 'Yes' ;
19620 +    END;
19621 +  ELSE DO;
19622 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19623 +     %DMNORMIP( _ARBFMT_12);
19624 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19625 +      _NODE_  =                    7;
19626 +      _LEAF_  =                    2;
19627 +      P_Contributed_To_AccidentYes  =     0.13775510204081;
19628 +      P_Contributed_To_AccidentNo  =     0.86224489795918;
19629 +      Q_Contributed_To_AccidentYes  =     0.13775510204081;
19630 +      Q_Contributed_To_AccidentNo  =     0.86224489795918;
19631 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19632 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19633 +      I_Contributed_To_Accident  = 'NO' ;
19634 +      U_Contributed_To_Accident  = 'No' ;
19635 +      END;
19636 +    ELSE DO;
19637 +      _NODE_  =                    6;
19638 +      _LEAF_  =                    1;
19639 +      P_Contributed_To_AccidentYes  =     0.34068136272545;
19640 +      P_Contributed_To_AccidentNo  =     0.65931863727454;
19641 +      Q_Contributed_To_AccidentYes  =     0.34068136272545;
19642 +      Q_Contributed_To_AccidentNo  =     0.65931863727454;
19643 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19644 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19645 +      I_Contributed_To_Accident  = 'NO' ;
19646 +      U_Contributed_To_Accident  = 'No' ;
19647 +      END;
19648 +    END;
19649 +  END;
19650 +
19651 +*****  RESIDUALS R_ *************;
19652 +IF  F_Contributed_To_Accident  NE 'YES'
19653 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19654 +        R_Contributed_To_AccidentYes  = .;
19655 +        R_Contributed_To_AccidentNo  = .;
19656 + END;
19657 + ELSE DO;
19658 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19659 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19660 +       SELECT( F_Contributed_To_Accident  );
19661 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19662 +        R_Contributed_To_AccidentYes  +1;
19663 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19664 +        R_Contributed_To_AccidentNo  +1;
19665 +       END;
19666 + END;
19667 +
19668 +****************************************************************;
19669 +******          END OF DECISION TREE SCORING CODE         ******;
19670 +****************************************************************;
19671 +
19672 +drop _LEAF_;
19673 +*------------------------------------------------------------*;
19674 +* EndGrp: EndGroup;
19675 +* User: Divya;
19676 +* Date: 23NOV16: 03:25;
19677 +* Bagging: Loop=6;
19678 +*------------------------------------------------------------*;
19679 +*------------------------------------------------------------*;
19680 +* Bagging: accumulate probabilities for iteration: 6;
19681 +*------------------------------------------------------------*;
19682 +P_Contributed_To_AccidentYes = _BagVar1*(5/6) + P_Contributed_To_AccidentYes*(1/6);
19683 +P_Contributed_To_AccidentNo = _BagVar2*(5/6) + P_Contributed_To_AccidentNo*(1/6);
19684 +*------------------------------------------------------------*;
19685 +* Bagging: Saving Probabilities for Next Iteration;
19686 +*------------------------------------------------------------*;
19687 +_BagVar1 = P_Contributed_To_AccidentYes;
19688 +_BagVar2 = P_Contributed_To_AccidentNo;
19689 +*------------------------------------------------------------*;
19690 +* Grp: StartGroup;
19691 +* User: Divya;
19692 +* Date: 23NOV16: 03:25;
19693 +* Bagging: Loop=7;
19694 +*------------------------------------------------------------*;
19695 +*------------------------------------------------------------*;
19696 +* Tree5: DecisionTree;
19697 +* User: Divya;
19698 +* Date: 23NOV16: 03:25;
19699 +* Bagging: Loop=7;
19700 +*------------------------------------------------------------*;
19701 +****************************************************************;
19702 +******             DECISION TREE SCORING CODE             ******;
19703 +****************************************************************;
19704 +
19705 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
19706 +LENGTH F_Contributed_To_Accident  $    3;
19707 +LENGTH I_Contributed_To_Accident  $    3;
19708 +LENGTH U_Contributed_To_Accident  $    3;
19709 +LENGTH _WARN_  $    4;
19710 +
19711 +******              LABELS FOR NEW VARIABLES              ******;
19712 +label _NODE_ = 'Node' ;
19713 +label _LEAF_ = 'Leaf' ;
19714 +label P_Contributed_To_AccidentYes =
19715 +'Predicted: Contributed_To_Accident=Yes' ;
19716 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
19717 +label Q_Contributed_To_AccidentYes =
19718 +'Unadjusted P: Contributed_To_Accident=Yes' ;
19719 +label Q_Contributed_To_AccidentNo =
19720 +'Unadjusted P: Contributed_To_Accident=No' ;
19721 +label V_Contributed_To_AccidentYes =
19722 +'Validated: Contributed_To_Accident=Yes' ;
19723 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
19724 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
19725 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
19726 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
19727 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
19728 +label U_Contributed_To_Accident =
19729 +'Unnormalized Into: Contributed_To_Accident' ;
19730 +label _WARN_ = 'Warnings' ;
19731 +
19732 +
19733 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
19734 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
19735 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
19736 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
19737 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
19738 +
19739 +
19740 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
19741 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
19742 +
19743 +******             ASSIGN OBSERVATION TO NODE             ******;
19744 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19745 + %DMNORMIP( _ARBFMT_12);
19746 +IF _ARBFMT_12 IN ('3' ) THEN DO;
19747 +  _NODE_  =                    3;
19748 +  _LEAF_  =                    4;
19749 +  P_Contributed_To_AccidentYes  =     0.96534653465346;
19750 +  P_Contributed_To_AccidentNo  =     0.03465346534653;
19751 +  Q_Contributed_To_AccidentYes  =     0.96534653465346;
19752 +  Q_Contributed_To_AccidentNo  =     0.03465346534653;
19753 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
19754 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
19755 +  I_Contributed_To_Accident  = 'YES' ;
19756 +  U_Contributed_To_Accident  = 'Yes' ;
19757 +  END;
19758 +ELSE DO;
19759 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
19760 +   %DMNORMIP( _ARBFMT_12);
19761 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19762 +    _NODE_  =                    5;
19763 +    _LEAF_  =                    3;
19764 +    P_Contributed_To_AccidentYes  =     0.97872340425531;
19765 +    P_Contributed_To_AccidentNo  =     0.02127659574468;
19766 +    Q_Contributed_To_AccidentYes  =     0.97872340425531;
19767 +    Q_Contributed_To_AccidentNo  =     0.02127659574468;
19768 +    V_Contributed_To_AccidentYes  =                    0;
19769 +    V_Contributed_To_AccidentNo  =                    0;
19770 +    I_Contributed_To_Accident  = 'YES' ;
19771 +    U_Contributed_To_Accident  = 'Yes' ;
19772 +    END;
19773 +  ELSE DO;
19774 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19775 +     %DMNORMIP( _ARBFMT_12);
19776 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19777 +      _NODE_  =                    7;
19778 +      _LEAF_  =                    2;
19779 +      P_Contributed_To_AccidentYes  =     0.16216216216216;
19780 +      P_Contributed_To_AccidentNo  =     0.83783783783783;
19781 +      Q_Contributed_To_AccidentYes  =     0.16216216216216;
19782 +      Q_Contributed_To_AccidentNo  =     0.83783783783783;
19783 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19784 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19785 +      I_Contributed_To_Accident  = 'NO' ;
19786 +      U_Contributed_To_Accident  = 'No' ;
19787 +      END;
19788 +    ELSE DO;
19789 +      _NODE_  =                    6;
19790 +      _LEAF_  =                    1;
19791 +      P_Contributed_To_AccidentYes  =     0.36382978723404;
19792 +      P_Contributed_To_AccidentNo  =     0.63617021276595;
19793 +      Q_Contributed_To_AccidentYes  =     0.36382978723404;
19794 +      Q_Contributed_To_AccidentNo  =     0.63617021276595;
19795 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19796 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19797 +      I_Contributed_To_Accident  = 'NO' ;
19798 +      U_Contributed_To_Accident  = 'No' ;
19799 +      END;
19800 +    END;
19801 +  END;
19802 +
19803 +*****  RESIDUALS R_ *************;
19804 +IF  F_Contributed_To_Accident  NE 'YES'
19805 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19806 +        R_Contributed_To_AccidentYes  = .;
19807 +        R_Contributed_To_AccidentNo  = .;
19808 + END;
19809 + ELSE DO;
19810 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19811 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19812 +       SELECT( F_Contributed_To_Accident  );
19813 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19814 +        R_Contributed_To_AccidentYes  +1;
19815 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19816 +        R_Contributed_To_AccidentNo  +1;
19817 +       END;
19818 + END;
19819 +
19820 +****************************************************************;
19821 +******          END OF DECISION TREE SCORING CODE         ******;
19822 +****************************************************************;
19823 +
19824 +drop _LEAF_;
19825 +*------------------------------------------------------------*;
19826 +* EndGrp: EndGroup;
19827 +* User: Divya;
19828 +* Date: 23NOV16: 03:25;
19829 +* Bagging: Loop=7;
19830 +*------------------------------------------------------------*;
19831 +*------------------------------------------------------------*;
19832 +* Bagging: accumulate probabilities for iteration: 7;
19833 +*------------------------------------------------------------*;
19834 +P_Contributed_To_AccidentYes = _BagVar1*(6/7) + P_Contributed_To_AccidentYes*(1/7);
19835 +P_Contributed_To_AccidentNo = _BagVar2*(6/7) + P_Contributed_To_AccidentNo*(1/7);
19836 +*------------------------------------------------------------*;
19837 +* Bagging: Saving Probabilities for Next Iteration;
19838 +*------------------------------------------------------------*;
19839 +_BagVar1 = P_Contributed_To_AccidentYes;
19840 +_BagVar2 = P_Contributed_To_AccidentNo;
19841 +*------------------------------------------------------------*;
19842 +* Grp: StartGroup;
19843 +* User: Divya;
19844 +* Date: 23NOV16: 03:26;
19845 +* Bagging: Loop=8;
19846 +*------------------------------------------------------------*;
19847 +*------------------------------------------------------------*;
19848 +* Tree5: DecisionTree;
19849 +* User: Divya;
19850 +* Date: 23NOV16: 03:26;
19851 +* Bagging: Loop=8;
19852 +*------------------------------------------------------------*;
19853 +****************************************************************;
19854 +******             DECISION TREE SCORING CODE             ******;
19855 +****************************************************************;
19856 +
19857 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
19858 +LENGTH F_Contributed_To_Accident  $    3;
19859 +LENGTH I_Contributed_To_Accident  $    3;
19860 +LENGTH U_Contributed_To_Accident  $    3;
19861 +LENGTH _WARN_  $    4;
19862 +
19863 +******              LABELS FOR NEW VARIABLES              ******;
19864 +label _NODE_ = 'Node' ;
19865 +label _LEAF_ = 'Leaf' ;
19866 +label P_Contributed_To_AccidentYes =
19867 +'Predicted: Contributed_To_Accident=Yes' ;
19868 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
19869 +label Q_Contributed_To_AccidentYes =
19870 +'Unadjusted P: Contributed_To_Accident=Yes' ;
19871 +label Q_Contributed_To_AccidentNo =
19872 +'Unadjusted P: Contributed_To_Accident=No' ;
19873 +label V_Contributed_To_AccidentYes =
19874 +'Validated: Contributed_To_Accident=Yes' ;
19875 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
19876 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
19877 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
19878 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
19879 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
19880 +label U_Contributed_To_Accident =
19881 +'Unnormalized Into: Contributed_To_Accident' ;
19882 +label _WARN_ = 'Warnings' ;
19883 +
19884 +
19885 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
19886 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
19887 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
19888 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
19889 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
19890 +
19891 +
19892 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
19893 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
19894 +
19895 +******             ASSIGN OBSERVATION TO NODE             ******;
19896 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
19897 + %DMNORMIP( _ARBFMT_12);
19898 +IF _ARBFMT_12 IN ('3' ) THEN DO;
19899 +  _NODE_  =                    3;
19900 +  _LEAF_  =                    4;
19901 +  P_Contributed_To_AccidentYes  =     0.96511627906976;
19902 +  P_Contributed_To_AccidentNo  =     0.03488372093023;
19903 +  Q_Contributed_To_AccidentYes  =     0.96511627906976;
19904 +  Q_Contributed_To_AccidentNo  =     0.03488372093023;
19905 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
19906 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
19907 +  I_Contributed_To_Accident  = 'YES' ;
19908 +  U_Contributed_To_Accident  = 'Yes' ;
19909 +  END;
19910 +ELSE DO;
19911 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
19912 +   %DMNORMIP( _ARBFMT_12);
19913 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
19914 +    _NODE_  =                    5;
19915 +    _LEAF_  =                    3;
19916 +    P_Contributed_To_AccidentYes  =     0.97826086956521;
19917 +    P_Contributed_To_AccidentNo  =     0.02173913043478;
19918 +    Q_Contributed_To_AccidentYes  =     0.97826086956521;
19919 +    Q_Contributed_To_AccidentNo  =     0.02173913043478;
19920 +    V_Contributed_To_AccidentYes  =                    0;
19921 +    V_Contributed_To_AccidentNo  =                    0;
19922 +    I_Contributed_To_Accident  = 'YES' ;
19923 +    U_Contributed_To_Accident  = 'Yes' ;
19924 +    END;
19925 +  ELSE DO;
19926 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
19927 +     %DMNORMIP( _ARBFMT_12);
19928 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
19929 +      _NODE_  =                    9;
19930 +      _LEAF_  =                    2;
19931 +      P_Contributed_To_AccidentYes  =     0.18539325842696;
19932 +      P_Contributed_To_AccidentNo  =     0.81460674157303;
19933 +      Q_Contributed_To_AccidentYes  =     0.18539325842696;
19934 +      Q_Contributed_To_AccidentNo  =     0.81460674157303;
19935 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
19936 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
19937 +      I_Contributed_To_Accident  = 'NO' ;
19938 +      U_Contributed_To_Accident  = 'No' ;
19939 +      END;
19940 +    ELSE DO;
19941 +      _NODE_  =                    8;
19942 +      _LEAF_  =                    1;
19943 +      P_Contributed_To_AccidentYes  =     0.32941176470588;
19944 +      P_Contributed_To_AccidentNo  =     0.67058823529411;
19945 +      Q_Contributed_To_AccidentYes  =     0.32941176470588;
19946 +      Q_Contributed_To_AccidentNo  =     0.67058823529411;
19947 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
19948 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
19949 +      I_Contributed_To_Accident  = 'NO' ;
19950 +      U_Contributed_To_Accident  = 'No' ;
19951 +      END;
19952 +    END;
19953 +  END;
19954 +
19955 +*****  RESIDUALS R_ *************;
19956 +IF  F_Contributed_To_Accident  NE 'YES'
19957 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
19958 +        R_Contributed_To_AccidentYes  = .;
19959 +        R_Contributed_To_AccidentNo  = .;
19960 + END;
19961 + ELSE DO;
19962 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
19963 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
19964 +       SELECT( F_Contributed_To_Accident  );
19965 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
19966 +        R_Contributed_To_AccidentYes  +1;
19967 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
19968 +        R_Contributed_To_AccidentNo  +1;
19969 +       END;
19970 + END;
19971 +
19972 +****************************************************************;
19973 +******          END OF DECISION TREE SCORING CODE         ******;
19974 +****************************************************************;
19975 +
19976 +drop _LEAF_;
19977 +*------------------------------------------------------------*;
19978 +* EndGrp: EndGroup;
19979 +* User: Divya;
19980 +* Date: 23NOV16: 03:26;
19981 +* Bagging: Loop=8;
19982 +*------------------------------------------------------------*;
19983 +*------------------------------------------------------------*;
19984 +* Bagging: accumulate probabilities for iteration: 8;
19985 +*------------------------------------------------------------*;
19986 +P_Contributed_To_AccidentYes = _BagVar1*(7/8) + P_Contributed_To_AccidentYes*(1/8);
19987 +P_Contributed_To_AccidentNo = _BagVar2*(7/8) + P_Contributed_To_AccidentNo*(1/8);
19988 +*------------------------------------------------------------*;
19989 +* Bagging: Saving Probabilities for Next Iteration;
19990 +*------------------------------------------------------------*;
19991 +_BagVar1 = P_Contributed_To_AccidentYes;
19992 +_BagVar2 = P_Contributed_To_AccidentNo;
19993 +*------------------------------------------------------------*;
19994 +* Grp: StartGroup;
19995 +* User: Divya;
19996 +* Date: 23NOV16: 03:26;
19997 +* Bagging: Loop=9;
19998 +*------------------------------------------------------------*;
19999 +*------------------------------------------------------------*;
20000 +* Tree5: DecisionTree;
20001 +* User: Divya;
20002 +* Date: 23NOV16: 03:26;
20003 +* Bagging: Loop=9;
20004 +*------------------------------------------------------------*;
20005 +****************************************************************;
20006 +******             DECISION TREE SCORING CODE             ******;
20007 +****************************************************************;
20008 +
20009 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
20010 +LENGTH F_Contributed_To_Accident  $    3;
20011 +LENGTH I_Contributed_To_Accident  $    3;
20012 +LENGTH U_Contributed_To_Accident  $    3;
20013 +LENGTH _WARN_  $    4;
20014 +
20015 +******              LABELS FOR NEW VARIABLES              ******;
20016 +label _NODE_ = 'Node' ;
20017 +label _LEAF_ = 'Leaf' ;
20018 +label P_Contributed_To_AccidentYes =
20019 +'Predicted: Contributed_To_Accident=Yes' ;
20020 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
20021 +label Q_Contributed_To_AccidentYes =
20022 +'Unadjusted P: Contributed_To_Accident=Yes' ;
20023 +label Q_Contributed_To_AccidentNo =
20024 +'Unadjusted P: Contributed_To_Accident=No' ;
20025 +label V_Contributed_To_AccidentYes =
20026 +'Validated: Contributed_To_Accident=Yes' ;
20027 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
20028 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
20029 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
20030 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
20031 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
20032 +label U_Contributed_To_Accident =
20033 +'Unnormalized Into: Contributed_To_Accident' ;
20034 +label _WARN_ = 'Warnings' ;
20035 +
20036 +
20037 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
20038 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
20039 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
20040 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
20041 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
20042 +
20043 +
20044 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
20045 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
20046 +
20047 +******             ASSIGN OBSERVATION TO NODE             ******;
20048 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
20049 + %DMNORMIP( _ARBFMT_12);
20050 +IF _ARBFMT_12 IN ('3' ) THEN DO;
20051 +  _NODE_  =                    3;
20052 +  _LEAF_  =                    4;
20053 +  P_Contributed_To_AccidentYes  =     0.96174863387978;
20054 +  P_Contributed_To_AccidentNo  =     0.03825136612021;
20055 +  Q_Contributed_To_AccidentYes  =     0.96174863387978;
20056 +  Q_Contributed_To_AccidentNo  =     0.03825136612021;
20057 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
20058 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
20059 +  I_Contributed_To_Accident  = 'YES' ;
20060 +  U_Contributed_To_Accident  = 'Yes' ;
20061 +  END;
20062 +ELSE DO;
20063 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
20064 +   %DMNORMIP( _ARBFMT_12);
20065 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
20066 +    _NODE_  =                    5;
20067 +    _LEAF_  =                    3;
20068 +    P_Contributed_To_AccidentYes  =     0.97391304347826;
20069 +    P_Contributed_To_AccidentNo  =     0.02608695652173;
20070 +    Q_Contributed_To_AccidentYes  =     0.97391304347826;
20071 +    Q_Contributed_To_AccidentNo  =     0.02608695652173;
20072 +    V_Contributed_To_AccidentYes  =                    0;
20073 +    V_Contributed_To_AccidentNo  =                    0;
20074 +    I_Contributed_To_Accident  = 'YES' ;
20075 +    U_Contributed_To_Accident  = 'Yes' ;
20076 +    END;
20077 +  ELSE DO;
20078 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
20079 +     %DMNORMIP( _ARBFMT_12);
20080 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
20081 +      _NODE_  =                    7;
20082 +      _LEAF_  =                    2;
20083 +      P_Contributed_To_AccidentYes  =     0.15463917525773;
20084 +      P_Contributed_To_AccidentNo  =     0.84536082474226;
20085 +      Q_Contributed_To_AccidentYes  =     0.15463917525773;
20086 +      Q_Contributed_To_AccidentNo  =     0.84536082474226;
20087 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
20088 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
20089 +      I_Contributed_To_Accident  = 'NO' ;
20090 +      U_Contributed_To_Accident  = 'No' ;
20091 +      END;
20092 +    ELSE DO;
20093 +      _NODE_  =                    6;
20094 +      _LEAF_  =                    1;
20095 +      P_Contributed_To_AccidentYes  =     0.35770750988142;
20096 +      P_Contributed_To_AccidentNo  =     0.64229249011857;
20097 +      Q_Contributed_To_AccidentYes  =     0.35770750988142;
20098 +      Q_Contributed_To_AccidentNo  =     0.64229249011857;
20099 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
20100 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
20101 +      I_Contributed_To_Accident  = 'NO' ;
20102 +      U_Contributed_To_Accident  = 'No' ;
20103 +      END;
20104 +    END;
20105 +  END;
20106 +
20107 +*****  RESIDUALS R_ *************;
20108 +IF  F_Contributed_To_Accident  NE 'YES'
20109 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
20110 +        R_Contributed_To_AccidentYes  = .;
20111 +        R_Contributed_To_AccidentNo  = .;
20112 + END;
20113 + ELSE DO;
20114 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
20115 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
20116 +       SELECT( F_Contributed_To_Accident  );
20117 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
20118 +        R_Contributed_To_AccidentYes  +1;
20119 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
20120 +        R_Contributed_To_AccidentNo  +1;
20121 +       END;
20122 + END;
20123 +
20124 +****************************************************************;
20125 +******          END OF DECISION TREE SCORING CODE         ******;
20126 +****************************************************************;
20127 +
20128 +drop _LEAF_;
20129 +*------------------------------------------------------------*;
20130 +* EndGrp: EndGroup;
20131 +* User: Divya;
20132 +* Date: 23NOV16: 03:26;
20133 +* Bagging: Loop=9;
20134 +*------------------------------------------------------------*;
20135 +*------------------------------------------------------------*;
20136 +* Bagging: accumulate probabilities for iteration: 9;
20137 +*------------------------------------------------------------*;
20138 +P_Contributed_To_AccidentYes = _BagVar1*(8/9) + P_Contributed_To_AccidentYes*(1/9);
20139 +P_Contributed_To_AccidentNo = _BagVar2*(8/9) + P_Contributed_To_AccidentNo*(1/9);
20140 +*------------------------------------------------------------*;
20141 +* Bagging: Saving Probabilities for Next Iteration;
20142 +*------------------------------------------------------------*;
20143 +_BagVar1 = P_Contributed_To_AccidentYes;
20144 +_BagVar2 = P_Contributed_To_AccidentNo;
20145 +*------------------------------------------------------------*;
20146 +* Grp: StartGroup;
20147 +* User: Divya;
20148 +* Date: 23NOV16: 03:27;
20149 +* Bagging: Loop=10;
20150 +*------------------------------------------------------------*;
20151 +*------------------------------------------------------------*;
20152 +* Tree5: DecisionTree;
20153 +* User: Divya;
20154 +* Date: 23NOV16: 03:27;
20155 +* Bagging: Loop=10;
20156 +*------------------------------------------------------------*;
20157 +****************************************************************;
20158 +******             DECISION TREE SCORING CODE             ******;
20159 +****************************************************************;
20160 +
20161 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
20162 +LENGTH F_Contributed_To_Accident  $    3;
20163 +LENGTH I_Contributed_To_Accident  $    3;
20164 +LENGTH U_Contributed_To_Accident  $    3;
20165 +LENGTH _WARN_  $    4;
20166 +
20167 +******              LABELS FOR NEW VARIABLES              ******;
20168 +label _NODE_ = 'Node' ;
20169 +label _LEAF_ = 'Leaf' ;
20170 +label P_Contributed_To_AccidentYes =
20171 +'Predicted: Contributed_To_Accident=Yes' ;
20172 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
20173 +label Q_Contributed_To_AccidentYes =
20174 +'Unadjusted P: Contributed_To_Accident=Yes' ;
20175 +label Q_Contributed_To_AccidentNo =
20176 +'Unadjusted P: Contributed_To_Accident=No' ;
20177 +label V_Contributed_To_AccidentYes =
20178 +'Validated: Contributed_To_Accident=Yes' ;
20179 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
20180 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
20181 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
20182 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
20183 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
20184 +label U_Contributed_To_Accident =
20185 +'Unnormalized Into: Contributed_To_Accident' ;
20186 +label _WARN_ = 'Warnings' ;
20187 +
20188 +
20189 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
20190 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
20191 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
20192 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
20193 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
20194 +
20195 +
20196 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
20197 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
20198 +
20199 +******             ASSIGN OBSERVATION TO NODE             ******;
20200 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
20201 + %DMNORMIP( _ARBFMT_12);
20202 +IF _ARBFMT_12 IN ('3' ) THEN DO;
20203 +  _NODE_  =                    3;
20204 +  _LEAF_  =                    4;
20205 +  P_Contributed_To_AccidentYes  =                 0.92;
20206 +  P_Contributed_To_AccidentNo  =                 0.08;
20207 +  Q_Contributed_To_AccidentYes  =                 0.92;
20208 +  Q_Contributed_To_AccidentNo  =                 0.08;
20209 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
20210 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
20211 +  I_Contributed_To_Accident  = 'YES' ;
20212 +  U_Contributed_To_Accident  = 'Yes' ;
20213 +  END;
20214 +ELSE DO;
20215 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
20216 +   %DMNORMIP( _ARBFMT_12);
20217 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
20218 +    _NODE_  =                    5;
20219 +    _LEAF_  =                    3;
20220 +    P_Contributed_To_AccidentYes  =     0.96638655462184;
20221 +    P_Contributed_To_AccidentNo  =     0.03361344537815;
20222 +    Q_Contributed_To_AccidentYes  =     0.96638655462184;
20223 +    Q_Contributed_To_AccidentNo  =     0.03361344537815;
20224 +    V_Contributed_To_AccidentYes  =                    0;
20225 +    V_Contributed_To_AccidentNo  =                    0;
20226 +    I_Contributed_To_Accident  = 'YES' ;
20227 +    U_Contributed_To_Accident  = 'Yes' ;
20228 +    END;
20229 +  ELSE DO;
20230 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
20231 +     %DMNORMIP( _ARBFMT_12);
20232 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
20233 +      _NODE_  =                    7;
20234 +      _LEAF_  =                    2;
20235 +      P_Contributed_To_AccidentYes  =     0.18357487922705;
20236 +      P_Contributed_To_AccidentNo  =     0.81642512077294;
20237 +      Q_Contributed_To_AccidentYes  =     0.18357487922705;
20238 +      Q_Contributed_To_AccidentNo  =     0.81642512077294;
20239 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
20240 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
20241 +      I_Contributed_To_Accident  = 'NO' ;
20242 +      U_Contributed_To_Accident  = 'No' ;
20243 +      END;
20244 +    ELSE DO;
20245 +      _NODE_  =                    6;
20246 +      _LEAF_  =                    1;
20247 +      P_Contributed_To_AccidentYes  =     0.36228813559322;
20248 +      P_Contributed_To_AccidentNo  =     0.63771186440677;
20249 +      Q_Contributed_To_AccidentYes  =     0.36228813559322;
20250 +      Q_Contributed_To_AccidentNo  =     0.63771186440677;
20251 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
20252 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
20253 +      I_Contributed_To_Accident  = 'NO' ;
20254 +      U_Contributed_To_Accident  = 'No' ;
20255 +      END;
20256 +    END;
20257 +  END;
20258 +
20259 +*****  RESIDUALS R_ *************;
20260 +IF  F_Contributed_To_Accident  NE 'YES'
20261 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
20262 +        R_Contributed_To_AccidentYes  = .;
20263 +        R_Contributed_To_AccidentNo  = .;
20264 + END;
20265 + ELSE DO;
20266 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
20267 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
20268 +       SELECT( F_Contributed_To_Accident  );
20269 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
20270 +        R_Contributed_To_AccidentYes  +1;
20271 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
20272 +        R_Contributed_To_AccidentNo  +1;
20273 +       END;
20274 + END;
20275 +
20276 +****************************************************************;
20277 +******          END OF DECISION TREE SCORING CODE         ******;
20278 +****************************************************************;
20279 +
20280 +drop _LEAF_;
20281 +*------------------------------------------------------------*;
20282 +* EndGrp: EndGroup;
20283 +* User: Divya;
20284 +* Date: 23NOV16: 03:27;
20285 +* Bagging: Loop=10;
20286 +*------------------------------------------------------------*;
20287 +*------------------------------------------------------------*;
20288 +* Bagging: accumulate final probabilities;
20289 +*------------------------------------------------------------*;
20290 +P_Contributed_To_AccidentYes = _BagVar1*(9/10) + P_Contributed_To_AccidentYes*(1/10);
20291 +P_Contributed_To_AccidentNo = _BagVar2*(9/10) + P_Contributed_To_AccidentNo*(1/10);
20292 +*------------------------------------------------------------*;
20293 +*Computing Residual Vars: Contributed_To_Accident;
20294 +*------------------------------------------------------------*;
20295 +Length R_Contributed_To_AccidentYes 8;
20296 +Label R_Contributed_To_AccidentYes='Residual: Contributed_To_Accident=Yes';
20297 +Length R_Contributed_To_AccidentNo 8;
20298 +Label R_Contributed_To_AccidentNo='Residual: Contributed_To_Accident=No';
20299 +if
20300 + F_Contributed_To_Accident ne 'YES'
20301 +and F_Contributed_To_Accident ne 'NO'
20302 + then do;
20303 +R_Contributed_To_AccidentYes=.;
20304 +R_Contributed_To_AccidentNo=.;
20305 +end;
20306 +else do;
20307 +R_Contributed_To_AccidentYes= - P_Contributed_To_AccidentYes;
20308 +R_Contributed_To_AccidentNo= - P_Contributed_To_AccidentNo;
20309 +select(F_Contributed_To_Accident);
20310 +when('YES')R_Contributed_To_AccidentYes= R_Contributed_To_AccidentYes+1;
20311 +when('NO')R_Contributed_To_AccidentNo= R_Contributed_To_AccidentNo+1;
20312 +otherwise;
20313 +end;
20314 +end;
NOTE: %INCLUDE (level 1) ending.
 
NOTE: DATA STEP view saved on file EMWS1.ENDGRP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.STAT2_VALIDATE.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
 
 
NOTE: Fileref EMFLOW has been deassigned.
20315  *------------------------------------------------------------*;
20316  * End POSTLOOP: EndGrp;
20317  *------------------------------------------------------------*;
20318
 
20319  filename x "D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas" MOD;
20320  %makeClassificationVars(target=Contributed_To_Accident, data=EMWS1.EndGrp_TRAIN, decmeta=EMWS1.Tree5_Contributed_To_A_DM, publish=N, fref=X);
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_ in ('FROM', 'INTO');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 0 observations read from the data set SASHELP.VFORMAT.
      WHERE UPCASE(fmtname)='$3';
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
 
 
 
NOTE: The file X is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=65827,
      Last Modified=23Nov2016:03:27:37,
      Create Time=23Nov2016:03:27:37
 
NOTE: 22 records were written to the file X.
      The minimum record length was 4.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
20321  filename x;
NOTE: Fileref X has been deassigned.
 
20322  filename x "D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMPUBLISHSCORE.sas" MOD;
20323  %makeClassificationVars(target=Contributed_To_Accident, data=EMWS1.EndGrp_TRAIN, decmeta=EMWS1.Tree5_Contributed_To_A_DM, publish=Y, fref=X);
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_ in ('FROM', 'INTO');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 0 observations read from the data set SASHELP.VFORMAT.
      WHERE UPCASE(fmtname)='$3';
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
 
 
 
NOTE: The file X is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMPUBLISHSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=54127,
      Last Modified=23Nov2016:03:27:37,
      Create Time=23Nov2016:03:27:37
 
NOTE: 22 records were written to the file X.
      The minimum record length was 4.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
20324  filename x;
NOTE: Fileref X has been deassigned.
 
20325  filename x "D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas" MOD;
20326  %makeResidualVars(target=Contributed_To_Accident, decmeta=EMWS1.Tree5_Contributed_To_A_DM, fref=X);
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_ in ('FROM', 'TARGET');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='RESIDUAL';
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: The file X is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=66559,
      Last Modified=23Nov2016:03:27:37,
      Create Time=23Nov2016:03:27:37
 
NOTE: 23 records were written to the file X.
      The minimum record length was 3.
      The maximum record length was 75.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
20327  filename x;
NOTE: Fileref X has been deassigned.
 
NOTE: There were 1 observations read from the data set EMWS1.GRP_EMLOOPINFO.
NOTE: The data set EMWS1.ENDGRP_EMLOOPINFO has 1 observations and 3 variables.
20328  proc print data=EMWS1.EndGrp_EMLOOPINFO noobs label;
20329  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_rptgroupsummary_title, NOQUOTE))";
20330  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMLOOPINFO.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
20331  title9;
 
20391  data EMWS1.EndGrp_EMOUTFIT;
20392  set WORK.OUTFITDATA;
20393  run;
 
NOTE: There were 1 observations read from the data set WORK.OUTFITDATA.
NOTE: The data set EMWS1.ENDGRP_EMOUTFIT has 1 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
20394  data EMWS1.EndGrp_EMOUTFIT;
20395  set EMWS1.EndGrp_EMOUTFIT;
20396  length TargetLabel $200;
20397  label targetLabel = "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
20398  run;
 
NOTE: Variable TargetLabel is uninitialized.
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMOUTFIT.
NOTE: The data set EMWS1.ENDGRP_EMOUTFIT has 1 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
20399  proc sort data=EMWS1.EndGrp_EMREPORTFIT nothreads;
20400  by TARGET;
20401  run;
 
NOTE: There were 9 observations read from the data set EMWS1.ENDGRP_EMREPORTFIT.
NOTE: The data set EMWS1.ENDGRP_EMREPORTFIT has 9 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
20402  %let _EMwarndup = 0;
20403  %let _EMtargetdup =;
20404  %let _EMASEtargetdup =;
20405  data _null_;
20406  set EMWS1.EndGrp_EMOUTFIT;
20407  if .<_ASE_<0.000001 then do;
20408  call symput('_EMwarndup', '1');
20409  call symput('_EMtargetdup', target);
20410  call symput('_EMASEtargetdup', put(_ASE_, best.));
20411  end;
20412  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMOUTFIT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
20413  *------------------------------------------------------------*;
20414  * EndGrp: Computing metadata for TRAIN data;
20415  *------------------------------------------------------------*;
 
NOTE: View EMWS1.ENDGRP_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.06 seconds
 
20768  data WORK.MODELTEMP_INFO;
20769  set EMWS1.EndGrp_EMINFO;
20770  where DATA='EndGrp' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
20771  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMINFO.
      WHERE (DATA='EndGrp') and KEY not in ('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
NOTE: The data set WORK.MODELTEMP_INFO has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
20772  data EMWS1.EndGrp_EMINFO;
20773  length TARGET KEY $32 DATA $43;
20774  input TARGET KEY DATA $;
20775  cards;
 
NOTE: The data set EMWS1.ENDGRP_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
20779  run;
20780  data EMWS1.EndGrp_EMINFO;
20781  set EMWS1.EndGrp_EMINFO WORK.MODELTEMP_INFO;
20782  run;
 
NOTE: There were 3 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: There were 1 observations read from the data set WORK.MODELTEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
20783  proc sort data = EMWS1.EndGrp_EMINFO NOTHREADS;
20784  by TARGET KEY;
20785  run;
 
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
20786  proc sort data = EMWS1.Tree5_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
20787  by TARGET KEY;
20788  run;
 
NOTE: There were 5 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: The data set WORK.SORTEDEMINFO has 5 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
20789  proc sort data = EMWS1.EndGrp_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
20790  by TARGET KEY;
20791  run;
 
NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set WORK.TEMP_INFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
20792  data EMWS1.EndGrp_EMINFO;
20793  merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
20794  by TARGET KEY;
20795  run;
 
NOTE: There were 5 observations read from the data set WORK.SORTEDEMINFO.
NOTE: There were 4 observations read from the data set WORK.TEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 6 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
20796  proc datasets lib=work nolist;
20797  delete TEMP_INFO SORTEDEMINFO;
20798  run;
 
NOTE: Deleting WORK.TEMP_INFO (memtype=DATA).
NOTE: Deleting WORK.SORTEDEMINFO (memtype=DATA).
20799  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
NOTE: View EMWS1.ENDGRP_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
20800  *------------------------------------------------------------*;
20801  * EndGrp: Computing metadata for VALIDATE data;
20802  *------------------------------------------------------------*;
 
NOTE: View EMWS1.ENDGRP_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
21155  data WORK.MODELTEMP_INFO;
21156  set EMWS1.EndGrp_EMINFO;
21157  where DATA='EndGrp' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
21158  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMINFO.
      WHERE (DATA='EndGrp') and KEY not in ('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
NOTE: The data set WORK.MODELTEMP_INFO has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
21159  data EMWS1.EndGrp_EMINFO;
21160  length TARGET KEY $32 DATA $43;
21161  input TARGET KEY DATA $;
21162  cards;
 
NOTE: The data set EMWS1.ENDGRP_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
21166  run;
21167  data EMWS1.EndGrp_EMINFO;
21168  set EMWS1.EndGrp_EMINFO WORK.MODELTEMP_INFO;
21169  run;
 
NOTE: There were 3 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: There were 1 observations read from the data set WORK.MODELTEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
21170  proc sort data = EMWS1.EndGrp_EMINFO NOTHREADS;
21171  by TARGET KEY;
21172  run;
 
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
21173  proc sort data = EMWS1.Tree5_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
21174  by TARGET KEY;
21175  run;
 
NOTE: There were 5 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: The data set WORK.SORTEDEMINFO has 5 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
21176  proc sort data = EMWS1.EndGrp_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
21177  by TARGET KEY;
21178  run;
 
NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set WORK.TEMP_INFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
21179  data EMWS1.EndGrp_EMINFO;
21180  merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
21181  by TARGET KEY;
21182  run;
 
NOTE: There were 5 observations read from the data set WORK.SORTEDEMINFO.
NOTE: There were 4 observations read from the data set WORK.TEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 6 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
21183  proc datasets lib=work nolist;
21184  delete TEMP_INFO SORTEDEMINFO;
21185  run;
 
NOTE: Deleting WORK.TEMP_INFO (memtype=DATA).
NOTE: Deleting WORK.SORTEDEMINFO (memtype=DATA).
21186  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: View EMWS1.ENDGRP_VALIDATE.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
PERFORMANCE  DETAILS
21591  %let EMEXCEPTIONSTRING=;
21592  *------------------------------------------------------------*;
21593  * POSTLOOPREPORT: EndGrp;
21594  *------------------------------------------------------------*;
21595  %let EM_ACTION = POSTLOOPREPORT;
21596  %let syscc = 0;
21597  %macro main;
21598     %if %upcase(&EM_ACTION) = TRAIN %then %do;
21599
21600         filename temp catalog 'sashelp.emutil.endgp_train.source';
21601         %include temp;
21602         filename temp;
21603
21604         %train;
21605
21606     %end;
21607     %else
21608        %if %upcase(&EM_ACTION) = SCORE %then %do;
21609
21610         filename temp catalog 'sashelp.emutil.endgp_score.source';
21611         %include temp;
21612         filename temp;
21613
21614         %score;
21615     %end;
21616     %else
21617     %if %upcase(&EM_ACTION) = POSTLOOP %then %do;
21618
21619         filename temp catalog 'sashelp.emutil.endgp_postloop.source';
21620         %include temp;
21621         filename temp;
21622
21623         %postloop;
21624
21625     %end;
21626
21627     %doendm:
21628  %mend main;
21629
21630  %main;
21631  *------------------------------------------------------------*;
21632  * End POSTLOOPREPORT: EndGrp;
21633  *------------------------------------------------------------*;
21634
 
21635  proc sort data=EMWS1.Tree5_CMeta_TRAIN out=WORK.SUBSETINMETA;
21636  by NAME;
21637  run;
 
NOTE: There were 4 observations read from the data set EMWS1.TREE5_CMETA_TRAIN.
NOTE: The data set WORK.SUBSETINMETA has 4 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
21638  proc sort data=EMWS1.EndGrp_VariableSet out=WORK.SUBSETVARSET(keep=NAME REPORT);
21639  by NAME;
21640  run;
 
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_VARIABLESET.
NOTE: The data set WORK.SUBSETVARSET has 4 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
21641  data WORK.ASSESS_META;
21642  merge WORK.SUBSETINMETA WORK.SUBSETVARSET;
21643  by NAME;
21644  run;
 
NOTE: There were 4 observations read from the data set WORK.SUBSETINMETA.
NOTE: There were 4 observations read from the data set WORK.SUBSETVARSET.
NOTE: The data set WORK.ASSESS_META has 4 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
21645  data EM_temp_assessMeta;
21646  set EMWS1.EndGrp_CMeta_TRAIN;
21647  where role in('DECISION', 'PREDICT', 'RESIDUAL', 'CLASSIFICATION', 'ASSESS', 'COST');
21648  run;
 
NOTE: There were 12 observations read from the data set EMWS1.ENDGRP_CMETA_TRAIN.
      WHERE role in ('ASSESS', 'CLASSIFICATION', 'COST', 'DECISION', 'PREDICT', 'RESIDUAL');
NOTE: The data set WORK.EM_TEMP_ASSESSMETA has 12 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
21649  data EM_temp_assessdata;
21650  set EMWS1.EndGrp_TRAIN(keep=
21651  F_Contributed_To_Accident
21652  I_Contributed_To_Accident
21653  P_Contributed_To_AccidentNo
21654  P_Contributed_To_AccidentYes
21655  Q_Contributed_To_AccidentNo
21656  Q_Contributed_To_AccidentYes
21657  R_Contributed_To_AccidentNo
21658  R_Contributed_To_AccidentYes
21659  U_Contributed_To_Accident
21660  V_Contributed_To_AccidentNo
21661  V_Contributed_To_AccidentYes
21662  _WARN_
21663  Contributed_To_Accident
21664  );
21665  run;
 
NOTE: Variable _WARN_ is uninitialized.
NOTE: There were 9979 observations read from the data set EMWS1.FIMPORT_DATA.
NOTE: There were 9979 observations read from the data set EMWS1.FIMPORT_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.STAT_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.VARSEL_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.BINNING_TRAIN.
NOTE: View EMWS1.ENDGRP_TRAIN.VIEW used (Total process time):
      real time           1.30 seconds
      cpu time            0.95 seconds
 
NOTE: There were 9979 observations read from the data set EMWS1.STAT2_TRAIN.
NOTE: There were 9979 observations read from the data set EMWS1.ENDGRP_TRAIN.
NOTE: The data set WORK.EM_TEMP_ASSESSDATA has 9979 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           1.30 seconds
      cpu time            0.95 seconds
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
25948  data EM_temp_assessMeta;
25949  set EMWS1.EndGrp_CMeta_VALIDATE;
25950  where role in('DECISION', 'PREDICT', 'RESIDUAL', 'CLASSIFICATION', 'ASSESS', 'COST');
25951  run;
 
NOTE: There were 12 observations read from the data set EMWS1.ENDGRP_CMETA_VALIDATE.
      WHERE role in ('ASSESS', 'CLASSIFICATION', 'COST', 'DECISION', 'PREDICT', 'RESIDUAL');
NOTE: The data set WORK.EM_TEMP_ASSESSMETA has 12 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
25952  data EM_temp_assessdata;
25953  set EMWS1.EndGrp_VALIDATE(keep=
25954  F_Contributed_To_Accident
25955  I_Contributed_To_Accident
25956  P_Contributed_To_AccidentNo
25957  P_Contributed_To_AccidentYes
25958  Q_Contributed_To_AccidentNo
25959  Q_Contributed_To_AccidentYes
25960  R_Contributed_To_AccidentNo
25961  R_Contributed_To_AccidentYes
25962  U_Contributed_To_Accident
25963  V_Contributed_To_AccidentNo
25964  V_Contributed_To_AccidentYes
25965  _WARN_
25966  Contributed_To_Accident
25967  );
25968  run;
 
NOTE: Variable _WARN_ is uninitialized.
NOTE: There were 3001 observations read from the data set EMWS1.FIMPORT2_DATA.
NOTE: There were 3001 observations read from the data set EMWS1.FIMPORT2_TRAIN.
NOTE: There were 3001 observations read from the data set EMWS1.REPL_VALIDATE.
NOTE: There were 3001 observations read from the data set EMWS1.IMPT_VALIDATE.
NOTE: There were 3001 observations read from the data set EMWS1.STAT_VALIDATE.
NOTE: There were 3001 observations read from the data set EMWS1.VARSEL_VALIDATE.
NOTE: There were 3001 observations read from the data set EMWS1.TRANS_VALIDATE.
NOTE: There were 3001 observations read from the data set EMWS1.BINNING_VALIDATE.
NOTE: View EMWS1.ENDGRP_VALIDATE.VIEW used (Total process time):
      real time           0.44 seconds
      cpu time            0.26 seconds
 
NOTE: There were 3001 observations read from the data set EMWS1.STAT2_VALIDATE.
NOTE: There were 3001 observations read from the data set EMWS1.ENDGRP_VALIDATE.
NOTE: The data set WORK.EM_TEMP_ASSESSDATA has 3001 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.44 seconds
      cpu time            0.26 seconds
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
30260  data work.EMOUTFIT;
30261  length _LOOP_ 8 _WHERE_ $200;
30262  format _LOOP_ 6.;
30263  label _LOOP_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_loop_vlabel, NOQUOTE))" _WHERE_ =
30263! "%sysfunc(sasmsg(sashelp.dmine, rpt_where_vlabel, NOQUOTE))";
30264  retain _LOOP_ 11;
30265  retain _WHERE_ "_OVERALL_";
30266  set EMWS1.EndGrp_EMOUTFIT;
30267  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMOUTFIT.
NOTE: The data set WORK.EMOUTFIT has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
30268  data EMWS1.EndGrp_EMOUTFIT_LOOP;
30269  set EMWS1.EndGrp_EMOUTFIT_LOOP work.EMOUTFIT;
30270  run;
 
NOTE: There were 10 observations read from the data set EMWS1.ENDGRP_EMOUTFIT_LOOP.
NOTE: There were 1 observations read from the data set WORK.EMOUTFIT.
NOTE: The data set EMWS1.ENDGRP_EMOUTFIT_LOOP has 11 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
30271  %let _cn = %sysfunc(getoption(CENTER));
30272  options nocenter;
30273  proc print data=EMWS1.EndGrp_EMREPORTFIT noobs label;
30274  var STAT LABEL TRAIN
30275  VALIDATE
30276  ;
30277  by TARGET TARGETLABEL;
30278  title9 ' ';
30279  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_fitstat_title  , NOQUOTE))";
30280  run;
 
NOTE: There were 9 observations read from the data set EMWS1.ENDGRP_EMREPORTFIT.
NOTE: The PROCEDURE PRINT printed page 4.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
30281  title10;
30282  options &_cn;
 
30283  proc sort data=EMWS1.EndGrp_EMCLASSIFICATION nothreads;
30284  by DATAROLE TARGET TARGETLABEL;
30285  run;
 
NOTE: There were 8 observations read from the data set EMWS1.ENDGRP_EMCLASSIFICATION.
NOTE: The data set EMWS1.ENDGRP_EMCLASSIFICATION has 8 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
30286  %let _cn = %sysfunc(getoption(CENTER));
30287  options nocenter;
30288  proc print data=EMWS1.EndGrp_EMCLASSIFICATION noobs label;
30289  var from into pct_row pct_col count percent
30290  ;
30291  by DATAROLE TARGET TARGETLABEL;
30292  label FROM = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel ,     NOQUOTE))";
30293  label INTO = "%sysfunc(sasmsg(sashelp.dmine, rpt_outcome_vlabel ,    NOQUOTE))";
30294  label PCT_ROW = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetpct_vlabel ,  NOQUOTE))";
30295  label PCT_COL = "%sysfunc(sasmsg(sashelp.dmine, rpt_outcomepct_vlabel , NOQUOTE))";
30296  label COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel ,      NOQUOTE))";
30297  label PERCENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_totalpct_vlabel ,   NOQUOTE))";
30298  where _TYPE_='PREDICTION';
30299  title9 ' ';
30300  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_classification_title    , NOQUOTE))";
30301  run;
 
NOTE: There were 8 observations read from the data set EMWS1.ENDGRP_EMCLASSIFICATION.
      WHERE _TYPE_='PREDICTION';
NOTE: The PROCEDURE PRINT printed page 5.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
30302  title9;
30303  title10;
30304  options &_cn;
 
30305  %let _cn = %sysfunc(getoption(CENTER));
30306  options nocenter;
30307  data EMWS1.EndGrp_EMEVENTREPORT;
30308  length DATAROLE TARGET $32 TARGETLABEL $200 FALSENEVENT TRUENEVENT FALSEEVENT TRUEEVENT
30308! 8;
30309  label DATAROLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel ,    NOQUOTE))"
30309! TARGET = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel ,      NOQUOTE))" TARGETLABEL
30309!  = "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))" FALSEEVENT
30310  = "%sysfunc(sasmsg(sashelp.dmine, rpt_falseevent_vlabel ,  NOQUOTE))" FALSENEVENT =
30310! "%sysfunc(sasmsg(sashelp.dmine, rpt_falsenevent_vlabel , NOQUOTE))" TRUEEVENT =
30310! "%sysfunc(sasmsg(sashelp.dmine, rpt_trueevent_vlabel ,   NOQUOTE))" TRUENEVENT =
30311     "%sysfunc(sasmsg(sashelp.dmine, rpt_truenevent_vlabel ,  NOQUOTE))";
30312  FALSEEVENT=0;
30313  FALSENEVENT=0;
30314  TRUEEVENT=0;
30315  TRUENEVENT=0;
30316  set EMWS1.EndGrp_EMEVENTREPORT;
30317  run;
 
NOTE: There were 2 observations read from the data set EMWS1.ENDGRP_EMEVENTREPORT.
NOTE: The data set EMWS1.ENDGRP_EMEVENTREPORT has 2 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
30318  proc print data=EMWS1.EndGrp_EMEVENTREPORT noobs label;
30319  title9 ' ';
30320  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_eventtable_title    , NOQUOTE))";
30321  by notsorted DATAROLE notsorted TARGET notsorted TARGETLABEL;
30322  run;
 
NOTE: There were 2 observations read from the data set EMWS1.ENDGRP_EMEVENTREPORT.
NOTE: The PROCEDURE PRINT printed page 6.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
30323  title10;
30324  options &_cn;
 
30325  proc datasets library=EMWS1 nolist;
30326  modify EndGrp_EMRANK;
30327  label target = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetvar_vlabel ,   NOQUOTE))";
30328  label datarole = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel ,    NOQUOTE))";
30329  run;
 
NOTE: MODIFY was successful for EMWS1.ENDGRP_EMRANK.DATA.
30330  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
 
 
30331  %let _cn = %sysfunc(getoption(CENTER));
30332  options nocenter;
30333  proc print data=EMWS1.EndGrp_EMRANK label noobs;
30334  var
30335  decile gain lift liftc resp respc N _meanP_;
30336  by
30337  notsorted DATAROLE
30338  notsorted TARGET
30339  notsorted TARGETLABEL
30340  ;
30341  title9 ' ';
30342  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_scoreranking_title , NOQUOTE))";
30343  run;
 
NOTE: There were 40 observations read from the data set EMWS1.ENDGRP_EMRANK.
NOTE: The PROCEDURE PRINT printed page 7.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
30344  title10;
30345  options &_cn;
 
30346  proc datasets library=EMWS1 nolist;
30347  modify EndGrp_EMSCOREDIST;
30348  label target = "%sysfunc(sasmsg(sashelp.dmine, rpt_targetvar_vlabel ,      NOQUOTE))";
30349  label datarole = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel ,    NOQUOTE))";
30350  run;
 
NOTE: MODIFY was successful for EMWS1.ENDGRP_EMSCOREDIST.DATA.
30351  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
 
30352  %let _cn = %sysfunc(getoption(CENTER));
30353  options nocenter;
30354  proc print data=EMWS1.EndGrp_EMSCOREDIST label noobs;
30355  var
30356  p_label numberOfEvents numberOfNonEvents _meanp_ percentage;
30357  by
30358  notsorted DATAROLE
30359  notsorted TARGET
30360  notsorted TARGETLABEL
30361  ;
30362  where TARGET in(
30363  "Contributed_To_Accident"
30364  );
30365  title9 ' ';
30366  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_scoredistribution_title, NOQUOTE))";
30367  run;
 
NOTE: There were 7 observations read from the data set EMWS1.ENDGRP_EMSCOREDIST.
      WHERE TARGET='Contributed_To_Accident';
NOTE: The PROCEDURE PRINT printed page 8.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
30368  title10;
30369  options &_cn;
30370  %let emexceptionstring =;
