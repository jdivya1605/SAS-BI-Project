*------------------------------------------------------------*
User:                Divya
Date:                November 23, 2016
Time:                03:24:16
Site:                70080468
Platform:            X64_8HOME
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Training Log
Date:                November 23, 2016
Time:                03:24:08
*------------------------------------------------------------*
14769  proc freq data=EMWS1.EndGrp_VariableSet noprint;
14770  table ROLE*LEVEL/out=WORK.EndGrpMETA;
14771  run;
 
NOTE: There were 18 observations read from the data set EMWS1.ENDGRP_VARIABLESET.
NOTE: The data set WORK.ENDGRPMETA has 9 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
14772  proc print data=WORK.EndGrpMETA label noobs;
14773  var ROLE LEVEL COUNT;
14774  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
14775  title9 ' ';
14776  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
14777  run;
 
NOTE: There were 9 observations read from the data set WORK.ENDGRPMETA.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14778  title10;
 
14779  %let EMNORLEN = %DMNORLEN;
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN EMWS1 Tree5_TRAIN
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN
EMWS1.Tree5_TRAIN EMWS1.Tree5_TRAIN EMWS1 Tree5_TRAIN
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _INIT >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL setMetaData >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _term >>
14808  data WORK.EndGrp_EVENT(KEEP=VARIABLE LABEL LEVEL EVENT NUMLEVELS ORDER);
14809  length ORDER $20;
14810  label VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_target_vlabel,  NOQUOTE))" EVENT = "%sysfunc(sasmsg(sashelp.dmine, assmt_event_vlabel, NOQUOTE))" NUMLEVELS = "%sysfunc(sasmsg(sashelp.dmine, rpt_numcat_vlabel, NOQUOTE))" LEVEL =
14811     "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" ORDER = "%sysfunc(sasmsg(sashelp.dmine, meta_order_vlabel, NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
14812  set EMWS1.TREE5_CONTRIBUTED_TO_A_DM( where=(_TYPE_="TARGET"));
14813  NumLevels=2;
14814  select(upcase(ORDER));
14815  when('DESC') ORDER = 'Descending';
14816  when('ASC') ORDER = 'Ascending';
14817  when('FMTDESC') ORDER = 'Formatted Descending';
14818  when('FMTASC') ORDER = 'Formatted Ascending';
14819  otherwise ORDER = 'Descending';
14820  end;
14821  output;
14822  run;
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='TARGET';
NOTE: The data set WORK.ENDGRP_EVENT has 1 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
14823  title9 ' ';
14824  proc print data=WORK.EndGrp_EVENT noobs label;
14825  var VARIABLE EVENT LEVEL NUMLEVELS ORDER LABEL;
14826  title9 ' ';
14827  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_modelEvent_title  , NOQUOTE))";
14828  run;
 
NOTE: There were 1 observations read from the data set WORK.ENDGRP_EVENT.
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14829  title10;
 
"No decisions defined for target "Contributed_To_Accident"."
14830  proc print data = EMWS1.Tree5_Contributed_To_A_DM noobs label;
14831  var _type_ variable label;
14832  where _type_ ^in('MATRIX', 'DECISION', 'TRAINPRIOR', 'DATAPRIOR', 'DECPRIOR');
14833  label _TYPE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,     NOQUOTE))" VARIABLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, NOQUOTE))";
14834  title9 ' ';
14835  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_predDecVars_title  , NOQUOTE))";
14836  run;
 
NOTE: There were 7 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _type_ not in ('DATAPRIOR', 'DECISION', 'DECPRIOR', 'MATRIX', 'TRAINPRIOR');
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
14837  title10;
 
14838  %let EMEXCEPTIONSTRING=;
PERFORMANCE  DETAILS
15286  *------------------------------------------------------------*;
15287  * EndGrp: Generation of macros and macro variables;
15288  * To see the code generated, set the EM_DEBUG macro variable to SOURCE or _ALL_;
15289  *------------------------------------------------------------*;
 
15290  %let EMEXCEPTIONSTRING=;
15291  *------------------------------------------------------------*;
15292  * TRAIN: EndGrp;
15293  *------------------------------------------------------------*;
15294  %let EM_ACTION = TRAIN;
15295  %let syscc = 0;
15296  %macro main;
15297     %if %upcase(&EM_ACTION) = TRAIN %then %do;
15298
15299         filename temp catalog 'sashelp.emutil.endgp_train.source';
15300         %include temp;
15301         filename temp;
15302
15303         %train;
15304
15305     %end;
15306     %else
15307        %if %upcase(&EM_ACTION) = SCORE %then %do;
15308
15309         filename temp catalog 'sashelp.emutil.endgp_score.source';
15310         %include temp;
15311         filename temp;
15312
15313         %score;
15314     %end;
15315     %else
15316     %if %upcase(&EM_ACTION) = POSTLOOP %then %do;
15317
15318         filename temp catalog 'sashelp.emutil.endgp_postloop.source';
15319         %include temp;
15320         filename temp;
15321
15322         %postloop;
15323
15324     %end;
15325
15326     %doendm:
15327  %mend main;
15328
15329  %main;
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMUTIL.ENDGP_TRAIN.SOURCE.
15330 +%macro copyModelDs(model=, key=);
15331 +   %let modelDs  = &em_lib..&model._&key;
15332 +   %let reportDs = &em_lib..&em_nodeid._&key;
15333 +   %if %sysfunc(exist(&modelDs)) %then %do;
15334 +       data &reportDs;
15335 +          length ModelId $16;
15336 +          retain ModelId "&model";
15337 +          set &modelDs;
15338 +       run;
15339 +   %end;
15340 +%mend copyModelDs;
15341 +
15342 +%macro traintarget(groupid=);
15343 +   %em_getname(key=emoutfit, type=DATA);
15344 +   %let targetname=;
15345 +   data _null_;
15346 +     set &em_lib..&groupid._&looptype;
15347 +     where _LOOP_ = &EMLOOPNUMBER;
15348 +     call symput('targetname', strip(_TARGET_));
15349 +   run;
15350 +   %let modelId =;
15351 +   data _null_;
15352 +      set &em_import_data_eminfo;
15353 +      where key = 'MODEL' and TARGET = "&targetname";
15354 +      call symput('modelId',   strip(data));
15355 +   run;
15356 +   %if "&modelId" ne "" %then %do;
15357 +       %copyModelDs(model=&modelid, key=EMRANK);
15358 +       %copyModelDs(model=&modelid, key=EMSCOREDIST);
15359 +       %copyModelDs(model=&modelid, key=EMOUTFIT);
15360 +       %copyModelDs(model=&modelid, key=EMCLASSIFICATION);
15361 +       %copyModelDs(model=&modelid, key=EMEVENREPORT);
15362 +       %copyModelDs(model=&modelid, key=EMRESIDUALS);
15363 +       %em_model(TARGET=&targetname, ASSESS=N, DECSCORECODE=N, FITSTATISTICS=N, CLASSIFICATION=N, RESIDUALS=N, PREDICTED=Y);
15364 +   %end;
15365 +
15366 +   %doendtgp:
15367 +%mend;
15368 +
15369 +%macro trainboost(groupid=);
15370 +
15371 +   %let boostinfoDs  = &em_lib..%sysfunc(strip(&groupid))_boostinfo;
15372 +   %let boostscoreDs = &em_lib..%sysfunc(strip(&groupid))_boostscore;
15373 +
15374 +   data _null_;
15375 +      retain index 0;
15376 +      set &boostinfoDs;
15377 +      call symput('targetname', strip(_target_));
15378 +   run;
15379 +
15380 +   %if "&em_import_data_eminfo" ne "" and %sysfunc(exist(&em_import_data_eminfo)) %then %do;
15381 +       %let decmeta = ;
15382 +       data _null_;
15383 +          set &em_import_data_eminfo;
15384 +          where (key='DECMETA' and TARGET="&targetname");
15385 +          call symput('DECMETA', strip(data));
15386 +       run;
15387 +       %if "&decmeta" eq "" %then %do;
15388 +           %let emexceptionstring = EMTOOL.NOTARGETMODELED;
15389 +           %goto doendtb;
15390 +       %end;
15391 +
15392 +       %let predictedVars=;
15393 +       data _null_;
15394 +          set &decmeta;
15395 +          if _TYPE_ = 'FROM' then call symput('FROMVAR', strip(variable));
15396 +          else
15397 +          if _TYPE_ = 'INTO' then call symput('INTOVAR', strip(variable));
15398 +          else
15399 +          if _TYPE_ = 'PREDICTED' then call symput('predictedvars', strip(symget('predictedVars'))!!' '!!strip(variable));
15400 +       run;
15401 +       %if %index(&EM_DEBUG, _ALL_) %then %do;
15402 +           %put GROUPID: &GROUPID DECMETA: &DECMETA FROMVAR: &FROMVAR INTO: &INTOVAR PREDICTED: &PREDICTEDVARS;
15403 +       %end;
15404 +   %end;
15405 +
15406 +   * ;
15407 +   * ENDGROUP &NODEID : Boosting scoring ;
15408 +   * ;
15409 +   data &em_lib..&groupid._boostscore;
15410 +      set &em_import_data;
15411 +      keep _WARN_ &targetname &fromvar &intovar &predictedvars;
15412 +      %if "%em_freq" ne "" %then %do ;
15413 +          keep %em_freq ;
15414 +      %end ;
15415 +   run;
15416 +   %em_model(TARGET=&targetname , ASSESS=N, DECSCORECODE=N, FITSTATISTICS=Y, CLASSIFICATION=N, RESIDUALS=N, PREDICTED=Y);
15417 +
15418 +   %doendtb:
15419 +
15420 +%mend trainboost;
15421 +
15422 +%macro trainbag(groupid=);
15423 +   %let baginfoDs  = &em_lib..%sysfunc(strip(&groupid))_baginfo;
15424 +   data _null_;
15425 +      retain index 0;
15426 +      set &baginfoDs;
15427 +      call symput('targetname', strip(_target_));
15428 +   run;
15429 +
15430 +   %let decmeta = ;
15431 +   data _null_;
15432 +       set &em_import_data_eminfo;
15433 +       where (key='DECMETA' and TARGET="&targetname");
15434 +       call symput('DECMETA', strip(data));
15435 +   run;
15436 +   %if "&decmeta" eq "" %then %do;
15437 +       %let emexceptionstring = EMTOOL.NOTARGETMODELED;
15438 +       %goto doendtg;
15439 +   %end;
15440 +
15441 +   %em_model(TARGET=&targetname, ASSESS=N, DECSCORECODE=N, FITSTATISTICS=Y, CLASSIFICATION=N, RESIDUALS=N, PREDICTED=Y);
15442 +
15443 +   %doendtg:
15444 +%mend trainbag;
15445 +
15446 +%macro traingroup(groupid=);
15447 +   %let targetNum = 0;
15448 +
15449 +   data _temp1;
15450 +      set &em_lib..&groupid._eminfo;
15451 +      where key='MODEL';
15452 +   run;
15453 +   data _temp2;
15454 +      set &em_import_data_eminfo;
15455 +      where key='MODEL';
15456 +   run;
15457 +   proc sort data=_temp1; by TARGET DATA;
15458 +   proc sort data=_temp2; by TARGET DATA;
15459 +   data _temp2;
15460 +      merge _temp1(in=_a) _temp2(in=_b);
15461 +      by TARGET DATA;
15462 +      if ^_a and _b then output;
15463 +   run;
15464 +   data _null_;
15465 +      retain index 0;
15466 +      set _temp2 end=eof;
15467 +      index +1;
15468 +      where key ='MODEL';
15469 +      call symput('MODELID'!!strip(put(index, best.)), strip(data));
15470 +      call symput('TARGET'!!strip(put(index, best.)), strip(target));
15471 +      if eof then
15472 +         call symput('targetnum', strip(put(index, best.)));
15473 +   run;
15474 +   proc datasets lib=work nolist;
15475 +      delete _temp1 _temp2;
15476 +   run;
15477 +   %if "&targetNum" eq "0" %then %goto doendtgp;
15478 +
15479 +   %let modelString =;
15480 +   %do i=1 %to &targetnum;
15481 +        %if ^%sysfunc(indexw(&modelString, &&modelid&i)) %then %do;
15482 +            %copyModelDs(model=&&modelid&i, key=EMRANK);
15483 +            %copyModelDs(model=&&modelid&i, key=EMSCOREDIST);
15484 +            %copyModelDs(model=&&modelid&i, key=EMOUTFIT);
15485 +            %copyModelDs(model=&&modelid&i, key=EMCLASSIFICATION);
15486 +            %copyModelDs(model=&&modelid&i, key=EMEVENREPORT);
15487 +            %copyModelDs(model=&&modelid&i, key=EMRESIDUALS);
15488 +            %let modelString = &modelString &&modelid&i;
15489 +       %end;
15490 +       %em_model(TARGET=&&target&i, ASSESS=N, DECSCORECODE=N, FITSTATISTICS=N, CLASSIFICATION=N, RESIDUALS=N, PREDICTED=Y);
15491 +   %end;
15492 +
15493 +   %doendtgp:
15494 +
15495 +%mend traingroup;
15496 +
15497 +%macro getSize(data=, nobsvar=);
15498 +
15499 +   %if %sysfunc(exist(&data, DATA)) %then %do;
15500 +       %let dsid = %sysfunc(open(&data));
15501 +       %if &dsid %then %do;
15502 +           %let &&nobsvar = %sysfunc(attrn(&dsid, NLOBS));
15503 +           %let dsid = %sysfunc(close(&dsid));
15504 +       %end;
15505 +   %end;
15506 +    %if %sysfunc(exist(&data, VIEW)) %then %do;
15507 +        proc sql;
15508 +           reset noprint;
15509 +           select count(*) into :&nobsvar from &data;
15510 +        quit;
15511 +   %end;
15512 +
15513 +%mend getsize;
15514 +
15515 +%macro train;
15516 +
15517 +   %if ^%symexist(em_import_data_eminfo) or ("&emloopmode" eq "") %then %do;
15518 +      %let EM_TOOLTYPE=UTILITY;
15519 +      %if %sysfunc(exist(&em_data_eminfo)) %then %do;
15520 +          proc delete data=&em_data_eminfo;
15521 +          run;
15522 +      %end;
15523 +      %goto doendtr;
15524 +   %end;
15525 +
15526 +   %if "&em_import_data_eminfo" eq "" or ^%sysfunc(exist(&em_import_data_eminfo)) %then %do;
15527 +       %let emexceptionstring = EMTOOL.NOTARGETMODELED;
15528 +       %goto doendtr;
15529 +   %end;
15530 +
15531 +   %let xgroupid = ;
15532 +   data _null_;
15533 +      set &em_import_data_eminfo;
15534 +      where key in('GROUPINFO', 'BOOSTINFO', 'BAGINFO', 'TARGETINFO', 'INDEXINFO');
15535 +      call symput('XGROUPID',  strip(data));
15536 +      call symput('LOOPTYPE', strip(key));
15537 +   run;
15538 +
15539 +   %if "&looptype" eq "BOOSTINFO" %then %do;
15540 +       %let nDataObs=0;
15541 +       %getSize(data=&em_import_data, nobsvar=nDataObs);
15542 +
15543 +       %let nStartObs=0;
15544 +       %getsize(data=&em_lib..&xgroupid._train, nobsvar=nStartObs);
15545 +
15546 +       %if &nDataObs ne &nStartObs %then %do;
15547 +           %let emexceptionstring = EMTOOL.BOOSTERRORNOBSCHANGED;
15548 +           %goto doendtr;
15549 +       %end;
15550 +
15551 +       %trainboost(groupid=&xgroupid);
15552 +   %end;
15553 +   %else
15554 +   %if "&looptype" eq "BAGINFO" %then %do;
15555 +       %trainbag(groupid=&xgroupid);
15556 +   %end;
15557 +   %else
15558 +   %if "&looptype" eq "GROUPINFO" %then %do;
15559 +       %traingroup(groupid=&xgroupid);
15560 +   %end;
15561 +   %else
15562 +   %if "&looptype" eq "TARGETINFO" %then %do;
15563 +       %traintarget(groupid=&xgroupid);
15564 +   %end;
15565 +
15566 +   data &em_data_eminfo;
15567 +      length TARGET KEY $32  DATA $43;
15568 +      TARGET=''; KEY='ENDGROUP'; DATA="&em_nodeid"; output;
15569 +   run;
15570 +
15571 +   %let EM_TOOLTYPE=MODEL;
15572 +
15573 +   %doendtr:
15574 +
15575 +%mend train;
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE key in ('BAGINFO', 'BOOSTINFO', 'GROUPINFO', 'INDEXINFO', 'TARGETINFO');
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 1 observations read from the data set EMWS1.GRP_BAGINFO.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE (key='DECMETA') and (TARGET='Contributed_To_Accident');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The data set WORK.EM_USER_MODEL has 1 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
 
NOTE: The data set EMWS1.ENDGRP_EMINFO has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
15576  *------------------------------------------------------------*;
15577  * End TRAIN: EndGrp;
15578  *------------------------------------------------------------*;
15579
 
15580  *------------------------------------------------------------*;
15581  * Close any missing semi colons;
15582  *------------------------------------------------------------*;
15583  ;
15584  ;
15585  ;
15586  ;
15587  quit;
15588  *------------------------------------------------------------*;
15589  * Close any unbalanced quotes;
15590  *------------------------------------------------------------*;
15591  /*; *"; *'; */
15592  ;
15593  run;
15594  quit;
15595  /* Reset EM Options */
15596  options formchar="|----|+|---+=|-/\<>*";
15597  options nocenter ls=256 ps=10000;
15598  goptions reset=all device=GIF NODISPLAY;
 
*------------------------------------------------------------*
* Score Log
Date:                November 23, 2016
Time:                03:24:11
*------------------------------------------------------------*
15700  %let EMEXCEPTIONSTRING=;
15701  *------------------------------------------------------------*;
15702  * SCORE: EndGrp;
15703  *------------------------------------------------------------*;
15704  %let EM_ACTION = SCORE;
15705  %let syscc = 0;
15706  %macro main;
15707     %if %upcase(&EM_ACTION) = TRAIN %then %do;
15708
15709         filename temp catalog 'sashelp.emutil.endgp_train.source';
15710         %include temp;
15711         filename temp;
15712
15713         %train;
15714
15715     %end;
15716     %else
15717        %if %upcase(&EM_ACTION) = SCORE %then %do;
15718
15719         filename temp catalog 'sashelp.emutil.endgp_score.source';
15720         %include temp;
15721         filename temp;
15722
15723         %score;
15724     %end;
15725     %else
15726     %if %upcase(&EM_ACTION) = POSTLOOP %then %do;
15727
15728         filename temp catalog 'sashelp.emutil.endgp_postloop.source';
15729         %include temp;
15730         filename temp;
15731
15732         %postloop;
15733
15734     %end;
15735
15736     %doendm:
15737  %mend main;
15738
15739  %main;
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMUTIL.ENDGP_SCORE.SOURCE.
15740 +%macro scoreTables(data=, out=, scoreref=, prescore=);
15742 +   %if ("&data" ne "") and (%sysfunc(exist(&data)) or %sysfunc(exist(&data, VIEW))) %then %do;
15743 +       data &out / view=&out;
15744 +          set &data
15746 +          %if "&prescore" = "Y" %then %do;
15747 +              (obs=1)
15748 +          %end;
15750 +          ;
15752 +          %inc &scoreref;
15754 +          %if "&prescore" eq "Y" %then %do;
15755 +              drop I_: R_:;
15756 +          %end;
15758 +       run;
15759 +   %end;
15761 +%mend scoretables;
15763 +%macro boostbagcode(groupid=, type=, EnsembleIndex=);
15764 +   %let infoDs = &em_lib..%sysfunc(strip(&groupid))_&type;
15765 +   data _null_;
15766 +      retain index 0;
15767 +      set &infoDs;
15768 +      call symput('targetname', strip(_target_));
15769 +      call symput('endloopnum', strip(_loop_));
15770 +   run;
15772 +   %let endgrp_decmeta=;
15773 +   %let endgrp_decdata=;
15775 +   data _null_;
15776 +      set &em_import_data_eminfo;
15777 +      where key in('MODEL', 'DECMETA', 'DECDATA') and TARGET="&targetname";
15778 +      if key='DECMETA' then call symput('ENDGRP_DECMETA', strip(data));
15779 +      else
15780 +      if key='DECDATA' then call symput('ENDGRP_DECDATA', strip(data));
15781 +      else call symput('MODELID', strip(data));
15782 +   run;
15784 +   %let headerString= Boosting;
15785 +   %let prefixString= _BoostVar;
15787 +   %if "&type" = "BAGINFO" %then %do;
15788 +        %let headerString = Bagging;
15789 +        %let prefixString= _BagVar;
15790 +   %end;
15792 +   %let targetType=;
15793 +   %let predictedVars=;
15794 +   data _null_;
15795 +      retain index;
15796 +      set &endgrp_decmeta end=eof;
15797 +      length tempvar $200;
15798 +      if _TYPE_='TARGET' then call symput('TARGETTYPE', strip(level));
15799 +      else
15800 +      if _TYPE_ = 'FROM' then call symput('FROMVAR', strip(variable));
15801 +      else
15802 +      if _TYPE_ = 'INTO' then call symput('INTOVAR', strip(variable));
15803 +      else
15804 +      if _TYPE_ = 'PREDICTED' then do;
15805 +         index+1;
15806 +         call symput('predvars'!!strip(put(index, best.)), strip(variable));
15807 +         tempvar = strip("&em_nodeid")!!'_'!!strip(variable);
15808 +         if length(tempvar)<=32 then call symput('tempvars'!!strip(put(index, best.)), strip(tempvar));
15809 +         else call symput('tempvars'!!strip(put(index, best.)), strip("&prefixString")!!strip(put(index, best.)));
15810 +      end;
15811 +      if eof then
15812 +         call symput('prednum', strip(put(index, best.)));
15813 +   run;
15815 +   %em_getname(key=LOOPFLOWCODE, type=FILE, extension=sas);
15816 +   %em_getname(key=LOOPPUBCODE,  type=FILE, extension=sas);
15818 +   filename loopflow "&em_user_loopflowcode";
15819 +   filename looppub "&em_user_looppubcode";
15821 +   filename emflow "&EM_FILE_EMFLOWSCORECODE" MOD;
15822 +   filename empub "&EM_FILE_EMPUBLISHSCORECODE";
15824 +   %if "&emloopnumber" = "1" %then %do;
15825 +       data _null_;
15826 +          rc = fdelete('loopflow');
15827 +          rc = fdelete('looppub');
15828 +       run;
15829 +       data _null_;
15830 +          file loopflow;
15831 +          put "&em_codebar;";
15832 +          put "* &em_nodeid: ;" ;
15833 +          put "* User: &sysuserid;";
15834 +          put "* Date: &sysdate: &systime;";
15835 +          put "&em_codebar ;";
15836 +          put "* Ensemble Code;";
15837 +          put "&em_codebar ;";
15838 +          put "* &headerString: Loop=1;";
15839 +          put "* Temporary Variables;";
15840 +          %do i= 1 %to &prednum;
15841 +              put "drop &&tempvars&i;";
15842 +              put "&&tempvars&i = 0;";
15843 +          %end;
15844 +       run;
15845 +       %em_copyfile(infref=loopflow, outfref=looppub);
15846 +   %end;
15848 +   %let j=&emloopnumber;
15849 +   %do i = 1 %to &loopcodenum;
15850 +       %let fsourceEntry = &em_lib..%sysfunc(strip(&&loopnode&i))_LOOP.EMFLOWCODE_&j..source;
15851 +       %let psourceEntry = &em_lib..%sysfunc(strip(&&loopnode&i))_LOOP.EMPUBLISHCODE_&j..source;
15853 +       %if (&&loopnode&i eq &em_nodeid ) or
15854 +           ( (&&loopnode&i ne &em_nodeid) and (&ensembleIndex = 0) or (&i=1 or &i>=&ensembleIndex )) %then %do;
15855 +           data _null_;
15856 +              file loopflow mod;
15857 +              put "&em_codebar;";
15858 +              put "* &&loopnode&i: &&loopdesc&i;" ;
15859 +              put "* User: &sysuserid;";
15860 +              put "* Date: &sysdate: &systime;";
15861 +              put "* &headerString: Loop=&j;";
15862 +              put "&em_codebar;";
15863 +           run;
15864 +           data _null_;
15865 +              file looppub mod;
15866 +              put "&em_codebar;";
15867 +              put "* &&loopnode&i: &&loopdesc&i;" ;
15868 +              put "* User: &sysuserid;";
15869 +              put "* Date: &sysdate: &systime;";
15870 +              put "* &headerString: Loop=&j;";
15871 +              put "&em_codebar;";
15872 +           run;
15873 +       %end;
15875 +       %if &&loopnode&i ne &em_nodeid %then %do;
15876 +           %if (&ensembleIndex = 0) or (&i=1 or &i>=&ensembleIndex ) %then %do;
15877 +               filename x catalog "&fsourceEntry";
15878 +               %em_copyfile(infref=x, outfref=loopflow, append=Y);
15879 +               filename x;
15881 +               filename y catalog "&psourceEntry";
15882 +               %em_copyfile(infref=y, outfref=looppub, append=Y);
15883 +               filename y;
15884 +           %end;
15885 +       %end;
15886 +       %else %do;
15887 +           %if "&j" ne "1" %then %do;
15888 +               %let weight = %eval(&j-1);
15889 +               data _null_;
15890 +                  file loopflow mod;
15891 +                  put "&em_codebar;";
15892 +                  %if "&j" ne "&endloopnum" %then %do;
15893 +                      put "* &headerString: accumulate probabilities for iteration: &j;";
15894 +                  %end;
15895 +                  %else %do;
15896 +                      put "* &headerString: accumulate final probabilities;";
15897 +                  %end;
15898 +                  put "&em_codebar;";
15899 +                  %do k=1 %to &prednum;
15900 +                      put "&&predvars&k = &&tempvars&k*(&weight/&j) + &&predvars&k*(1/&j);";
15901 +                  %end;
15902 +               run;
15903 +               data _null_;
15904 +                  file looppub mod;
15905 +                  put "&em_codebar;";
15906 +                  %if "&j" ne "&endloopnum" %then %do;
15907 +                      put "* &headerString: accumulate probabilities for iteration: &j;";
15908 +                  %end;
15909 +                  %else %do;
15910 +                      put "* &headerString: accumulate final probabilities;";
15911 +                  %end;
15912 +                  %do k=1 %to &prednum;
15913 +                      put "&&predvars&k = &&tempvars&k*(&weight/&j) + &&predvars&k*(1/&j);";
15914 +                  %end;
15915 +               run;
15916 +           %end;
15917 +           %if "&j" ne "&endloopnum" %then %do;
15918 +               data _null_;
15919 +                  file loopflow mod;
15920 +                  put "&em_codebar;";
15921 +                  put "* &headerString: Saving Probabilities for Next Iteration;";
15922 +                  put "&em_codebar;";
15923 +               %do k=1 %to &prednum;
15924 +                  put "&&tempvars&k = &&predvars&k;";
15925 +               %end;
15926 +               run;
15927 +               data _null_;
15928 +                  file looppub mod;
15929 +                  put "&em_codebar;";
15930 +                  put "* &headerString: Saving Probabilities for Next Iteration;";
15931 +                  put "&em_codebar;";
15932 +               %do k=1 %to &prednum;
15933 +                   put "&&tempvars&k = &&predvars&k;";
15934 +               %end;
15935 +               run;
15936 +           %end;
15938 +       %end;
15939 +   %end;
15941 +   %em_copyfile(infref=loopflow, outfref=emflow, append=N);
15942 +   %em_copyfile(infref=looppub,  outfref=empub,  append=N);
15944 +   filename loopflow;
15945 +   filename looppub;
15946 +   filename empub;
15948 +   %let groupImportDs = &em_lib..%sysfunc(strip(&groupid))_importset;
15949 +   %let gpTrain=;
15950 +   %let gpValidate=;
15951 +   %let gpTest=;
15953 +   data _null_;
15954 +      set &groupImportDs;
15955 +      select(upcase(port));
15956 +          when('DATA')     call symput('gpTrain',    strip(dataset));
15957 +          when('VALIDATE') call symput('gpValidate', strip(dataset));
15958 +          when('TEST')     call symput('gpTest',     strip(dataset));
15959 +       otherwise;
15960 +      end;
15961 +   run;
15963 +   %if "&gpTrain" ne "" %then %do;
15965 +       %scoreTables(data=&em_lib..&gpTrain,     out=&em_export_train,    scoreref=emflow, prescore=Y);
15967 +       %if &targetType ne INTERVAL %then %do;
15968 +           %makeClassificationVars(target=&targetname, data=&em_export_train, decmeta=&endgrp_decmeta, publish=N, fref=emflow);
15969 +       %end;
15971 +       %makeResidualVars(target=&targetname, decmeta=&endgrp_decmeta, fref=emflow);
15973 +       %let decflow = %sysfunc(Pathname(WORK))&em_dsep._decflow.sas;
15975 +       %em_decidecode(data=&em_export_train , decdata=&ENDGRP_DECDATA , decmeta=&ENDGRP_DECMETA ,
15976 +                                                           noresfile=, resfile=%nrbquote(&decflow));
15978 +       filename _decflow "&decflow";
15979 +       %em_copyfile(infref=_decflow, outfref=emflow, append=Y);
15980 +       filename _decflow;
15982 +   %end;
15984 +   %if "&gpTrain" ne "" %then
15985 +        %scoreTables(data=&em_lib..%sysfunc(strip(&gpTrain)),     out=&em_export_train,    scoreref=emflow);
15986 +   %if "&gpValidate" ne "" %then
15987 +       %scoreTables(data=&em_lib..%sysfunc(strip(&gpValidate)),  out=&em_export_validate, scoreref=emflow);
15988 +   %if "&gpTest" ne "" %then
15989 +       %scoreTables(data=&em_lib..%sysfunc(strip(&gpTest)),      out=&em_export_test,     scoreref=emflow);
15991 +   filename emflow;
15993 +%mend boostbagcode;
15995 +%macro score;
15997 +   filename _dec catalog "sashelp.emutil.em_decidecode.source";
15998 +   %inc _dec;
15999 +   filename _dec;
16001 +   %if ^%symexist(em_import_data_eminfo) or ("&emloopmode" eq "") %then %goto doendpl;
16003 +   %if "&em_import_data_eminfo" eq "" or ^%sysfunc(exist(&em_import_data_eminfo)) %then %do;
16004 +       %let emexceptionstring = nomodeltarget;
16005 +       %goto doendpl;
16006 +   %end;
16008 +   %LET GROUPID=;
16009 +   %let LOOPTYPE=;
16010 +   data _null_;
16011 +      set &em_import_data_eminfo;
16012 +      where key in('GROUPINFO','BOOSTINFO', 'BAGINFO', 'TARGETINFO', 'INDEXINFO');
16013 +      call symput('GROUPID',   strip(data));
16014 +      call symput('LOOPTYPE', strip(key));
16015 +   run;
16017 +   %em_getname(key=PATH, type=DATA);
16019 +   filename temp catalog 'sashelp.emutil.em_gettrainpath.source';
16020 +   %include temp;
16021 +   filename temp;
16023 +   %em_gettrainpath(NODEID=&em_nodeid, OUTPATH= score_path);
16025 +   %if &emloopnumber = 1 and %sysfunc(exist(&em_user_path)) %then %do;
16026 +       %let deleteString = &em_nodeid._path;
16027 +       proc datasets lib=&em_lib nolist;
16028 +          delete &deleteString;
16029 +       run;
16030 +       quit;
16031 +   %end;
16033 +   %if ^%sysfunc(exist(WORK.score_path)) %then %goto doendpl;
16035 +   data score_path;
16036 +      retain LOOPID &emloopnumber;
16037 +      set score_path;
16038 +   run;
16040 +   proc append base=&em_user_path  data=score_path;
16041 +   run;
16043 +   %let EnsembleIndex=0;
16044 +   data _null_;
16045 +      retain index 0 ensembleIndex 0;
16046 +      set score_Path end=eof;
16047 +      if nodelabel = "&groupid" or index then do;
16048 +         index + 1;
16049 +         call symput('loopnode'!!strip(put(index, best.)), strip(nodelabel));
16050 +         call symput('loopdesc'!!strip(put(index, best.)), strip(component));
16051 +      end;
16052 +      if component='Ensemble' then ensembleIndex = index;
16053 +      if eof then do;
16054 +         call symput('loopcodenum', strip(put(index, best.)));
16055 +         call symput('EnsembleIndex', strip(put(ensembleIndex, best.)));
16056 +      end;
16057 +   run;
16059 +   proc datasets lib=work nolist;
16060 +      delete score_Path;
16061 +   run;
16062 +   quit;
16064 +   %if ("&looptype" eq "BOOSTINFO") or ("&looptype" eq "BAGINFO") %then
16065 +       %boostbagcode(groupid=&groupid, type=&looptype, EnsembleIndex=&EnsembleIndex);
16067 +   %doendpl:
16069 +%mend score;
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.
NOTE: %INCLUDE (level 1) file _DEC is file SASHELP.EMUTIL.EM_DECIDECODE.SOURCE.
16070 +/*
16071 +       MACRO: EM_DECIDECODE
16072 +
16073 +       PURPOSE: Generate EM Decide Score Code for non-interval target.
16074 +       SUPPORT: Taiyeong Lee
16075 +
16076 +       HISTORY: 01OCT04 Initial code
16077 +       NOTE:    All parameters are optional, call %EM_DECIDECODE()
16078 +                to add the corresponding decision code
16079 +
16080 +*/
16081 +
16082 +
16083 +%macro  EM_DECIDECODE(data= , decdata= , decmeta= , noresfile=, resfile=);
16084 + %global m_data    m_decdata   m_decmeta  m_noresfile  m_resfile ;
16085 +
16086 +    %do;
16087 +    %let m_data      = &data;
16088 +    %let m_decdata   = &decdata;
16089 +    %let m_decmeta   = &decmeta;
16090 +    %let m_noresfile = &noresfile;
16091 +    %let m_resfile   = &resfile;
16092 +    dm "afa c=sashelp.emutil.decidecode.scl";
16093 +  %end;
16094 +%mend EM_DECIDECODE;
16095 +
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref _DEC has been deassigned.
 
NOTE: There were 1 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE key in ('BAGINFO', 'BOOSTINFO', 'GROUPINFO', 'INDEXINFO', 'TARGETINFO');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMUTIL.EM_GETTRAINPATH.SOURCE.
16096 +%macro EM_GETTRAINPATH(NODEID=, OUTPATH=);
16097 +   proc display c=sashelp.emcore.pathscorecode.scl;
16098 +   run;
16099 +%mend EM_GETTRAINPATH;
16100 +
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.
 
16101  data score_path;
16102  length Parent $32 nodelabel $32 description $200 tooltype $32 component $32 FlowScoreCodeFormat PublishScoreCode $16 PublishScoreCodeFormat $8 accumulatedScoreCode $1;
16103  nodelabel="FIMPORT";
16104  parent=" ";
16105  description="Extension Class";
16106  component="FileImport";
16107  tooltype="SAMPLE";
16108  FlowScoreCodeFormat="DATASTEP";
16109  PublishScoreCode="EMPUBLISHSCORECODE";
16110  PublishScoreCodeFormat="DATASTEP";
16111  accumulatedScoreCode= "N";
16112  output;
16113  nodelabel="Repl";
16114  parent="FIMPORT";
16115  description="Extension Class";
16116  component="Replace";
16117  tooltype="MODIFY";
16118  FlowScoreCodeFormat="DATASTEP";
16119  PublishScoreCode="EMPUBLISHSCORECODE";
16120  PublishScoreCodeFormat="DATASTEP";
16121  accumulatedScoreCode= "N";
16122  output;
16123  nodelabel="Impt";
16124  parent="Repl";
16125  description="Imputation";
16126  component="Impute";
16127  tooltype="MODIFY";
16128  FlowScoreCodeFormat="DATASTEP";
16129  PublishScoreCode="EMPUBLISHSCORECODE";
16130  PublishScoreCodeFormat="DATASTEP";
16131  accumulatedScoreCode= "N";
16132  output;
16133  nodelabel="Stat";
16134  parent="Impt";
16135  description="Statistics Exploration";
16136  component="StatExplore";
16137  tooltype="EXPLORE";
16138  FlowScoreCodeFormat="DATASTEP";
16139  PublishScoreCode="EMFLOWSCORECODE";
16140  PublishScoreCodeFormat="DATASTEP";
16141  accumulatedScoreCode= "N";
16142  output;
16143  nodelabel="Varsel";
16144  parent="Stat";
16145  description="Variable selection  Class";
16146  component="VariableSelection";
16147  tooltype="EXPLORE";
16148  FlowScoreCodeFormat="DATASTEP";
16149  PublishScoreCode="EMFLOWSCORECODE";
16150  PublishScoreCodeFormat="DATASTEP";
16151  accumulatedScoreCode= "N";
16152  output;
16153  nodelabel="Trans";
16154  parent="Varsel";
16155  description="Transform";
16156  component="Transform";
16157  tooltype="MODIFY";
16158  FlowScoreCodeFormat="DATASTEP";
16159  PublishScoreCode="EMPUBLISHSCORECODE";
16160  PublishScoreCodeFormat="DATASTEP";
16161  accumulatedScoreCode= "N";
16162  output;
16163  nodelabel="BINNING";
16164  parent="Trans";
16165  description="Extension Class";
16166  component="Binning";
16167  tooltype="MODIFY";
16168  FlowScoreCodeFormat="DATASTEP";
16169  PublishScoreCode="EMPUBLISHSCORECODE";
16170  PublishScoreCodeFormat="DATASTEP";
16171  accumulatedScoreCode= "N";
16172  output;
16173  nodelabel="Stat2";
16174  parent="BINNING";
16175  description="Statistics Exploration";
16176  component="StatExplore";
16177  tooltype="EXPLORE";
16178  FlowScoreCodeFormat="DATASTEP";
16179  PublishScoreCode="EMFLOWSCORECODE";
16180  PublishScoreCodeFormat="DATASTEP";
16181  accumulatedScoreCode= "N";
16182  output;
16183  nodelabel="Grp";
16184  parent="Stat2";
16185  description="Extension Class";
16186  component="StartGroup";
16187  tooltype="UTILITY";
16188  FlowScoreCodeFormat="DATASTEP";
16189  PublishScoreCode="EMPUBLISHSCORECODE";
16190  PublishScoreCodeFormat="DATASTEP";
16191  accumulatedScoreCode= "N";
16192  output;
16193  nodelabel="Tree5";
16194  parent="Grp";
16195  description="Extension Class";
16196  component="DecisionTree";
16197  tooltype="MODEL";
16198  FlowScoreCodeFormat="DATASTEP";
16199  PublishScoreCode="EMPUBLISHSCORECODE";
16200  PublishScoreCodeFormat="DATASTEP";
16201  accumulatedScoreCode= "N";
16202  output;
16203  nodelabel="EndGrp";
16204  parent="Tree5";
16205  description="Extension Class";
16206  component="EndGroup";
16207  tooltype="MODEL";
16208  FlowScoreCodeFormat="DATASTEP";
16209  PublishScoreCode="EMPUBLISHSCORECODE";
16210  PublishScoreCodeFormat="DATASTEP";
16211  accumulatedScoreCode= "N";
16212  output;
16213  run;
 
NOTE: The data set WORK.SCORE_PATH has 11 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: PROCEDURE DISPLAY used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 11 observations read from the data set WORK.SCORE_PATH.
NOTE: The data set WORK.SCORE_PATH has 11 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: Appending WORK.SCORE_PATH to EMWS1.ENDGRP_PATH.
NOTE: There were 11 observations read from the data set WORK.SCORE_PATH.
NOTE: 11 observations added.
NOTE: The data set EMWS1.ENDGRP_PATH has 33 observations and 10 variables.
NOTE: PROCEDURE APPEND used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 11 observations read from the data set WORK.SCORE_PATH.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: Deleting WORK.SCORE_PATH (memtype=DATA).
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      15:120
NOTE: There were 1 observations read from the data set EMWS1.GRP_BAGINFO.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 3 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE key in ('DECDATA', 'DECMETA', 'MODEL') and (TARGET='Contributed_To_Accident');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 13 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPFLOWCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=13054,
      Last Modified=23Nov2016:03:23:42,
      Create Time=23Nov2016:03:23:12
 
NOTE: 6 records were written to the file LOOPFLOW.
      The minimum record length was 14.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPPUBCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=10949,
      Last Modified=23Nov2016:03:23:42,
      Create Time=23Nov2016:03:23:12
 
NOTE: 6 records were written to the file LOOPPUB.
      The minimum record length was 14.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
NOTE: Fileref X has been deassigned.
NOTE: Fileref Y has been deassigned.
 
NOTE: The file LOOPFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPFLOWCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=13265,
      Last Modified=23Nov2016:03:24:10,
      Create Time=23Nov2016:03:23:12
 
NOTE: 6 records were written to the file LOOPFLOW.
      The minimum record length was 14.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPPUBCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=11160,
      Last Modified=23Nov2016:03:24:10,
      Create Time=23Nov2016:03:23:12
 
NOTE: 6 records were written to the file LOOPPUB.
      The minimum record length was 14.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPFLOWCODE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=13480,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 124 records were written to the file LOOPFLOW.
      The minimum record length was 1.
      The maximum record length was 78.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
NOTE: Fileref X has been deassigned.
 
NOTE: The file LOOPPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPPUBCODE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=11375,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 100 records were written to the file LOOPPUB.
      The minimum record length was 1.
      The maximum record length was 77.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
NOTE: Fileref Y has been deassigned.
 
NOTE: The file LOOPFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPFLOWCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=18739,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 6 records were written to the file LOOPFLOW.
      The minimum record length was 14.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPPUBCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=15614,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 6 records were written to the file LOOPPUB.
      The minimum record length was 14.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPFLOWCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=18951,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 5 records were written to the file LOOPFLOW.
      The minimum record length was 53.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file LOOPPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPPUBCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=15826,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 4 records were written to the file LOOPPUB.
      The minimum record length was 53.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: The file LOOPFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPFLOWCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=19304,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 5 records were written to the file LOOPFLOW.
      The minimum record length was 39.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: The file LOOPPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\LOOPPUBCODE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=16114,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:23:12
 
NOTE: 5 records were written to the file LOOPPUB.
      The minimum record length was 39.
      The maximum record length was 63.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: The file EMFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=0,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:24:11
 
NOTE: 464 records were written to the file EMFLOW.
      The minimum record length was 1.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: The file EMPUB is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMPUBLISHSCORE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=0,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:24:11
 
NOTE: 390 records were written to the file EMPUB.
      The minimum record length was 1.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: Fileref LOOPFLOW has been deassigned.
NOTE: Fileref LOOPPUB has been deassigned.
NOTE: Fileref EMPUB has been deassigned.
 
NOTE: There were 15 observations read from the data set EMWS1.GRP_IMPORTSET.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: %INCLUDE (level 1) file EMFLOW is file D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas.
16214 +*------------------------------------------------------------*;
16215 +* EndGrp: ;
16216 +* User: Divya;
16217 +* Date: 23NOV16: 03:23;
16218 +*------------------------------------------------------------* ;
16219 +* Ensemble Code;
16220 +*------------------------------------------------------------* ;
16221 +* Bagging: Loop=1;
16222 +* Temporary Variables;
16223 +drop _BagVar1;
16224 +_BagVar1 = 0;
16225 +drop _BagVar2;
16226 +_BagVar2 = 0;
16227 +*------------------------------------------------------------*;
16228 +* Grp: StartGroup;
16229 +* User: Divya;
16230 +* Date: 23NOV16: 03:23;
16231 +* Bagging: Loop=1;
16232 +*------------------------------------------------------------*;
16233 +*------------------------------------------------------------*;
16234 +* Tree5: DecisionTree;
16235 +* User: Divya;
16236 +* Date: 23NOV16: 03:23;
16237 +* Bagging: Loop=1;
16238 +*------------------------------------------------------------*;
16239 +****************************************************************;
16240 +******             DECISION TREE SCORING CODE             ******;
16241 +****************************************************************;
16242 +
16243 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16244 +LENGTH F_Contributed_To_Accident  $    3;
16245 +LENGTH I_Contributed_To_Accident  $    3;
16246 +LENGTH U_Contributed_To_Accident  $    3;
16247 +LENGTH _WARN_  $    4;
16248 +
16249 +******              LABELS FOR NEW VARIABLES              ******;
16250 +label _NODE_ = 'Node' ;
16251 +label _LEAF_ = 'Leaf' ;
16252 +label P_Contributed_To_AccidentYes =
16253 +'Predicted: Contributed_To_Accident=Yes' ;
16254 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16255 +label Q_Contributed_To_AccidentYes =
16256 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16257 +label Q_Contributed_To_AccidentNo =
16258 +'Unadjusted P: Contributed_To_Accident=No' ;
16259 +label V_Contributed_To_AccidentYes =
16260 +'Validated: Contributed_To_Accident=Yes' ;
16261 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16262 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16263 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16264 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16265 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16266 +label U_Contributed_To_Accident =
16267 +'Unnormalized Into: Contributed_To_Accident' ;
16268 +label _WARN_ = 'Warnings' ;
16269 +
16270 +
16271 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16272 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16273 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16274 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16275 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16276 +
16277 +
16278 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16279 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16280 +
16281 +******             ASSIGN OBSERVATION TO NODE             ******;
16282 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16283 + %DMNORMIP( _ARBFMT_12);
16284 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16285 +  _NODE_  =                    3;
16286 +  _LEAF_  =                    4;
16287 +  P_Contributed_To_AccidentYes  =     0.96969696969696;
16288 +  P_Contributed_To_AccidentNo  =     0.03030303030303;
16289 +  Q_Contributed_To_AccidentYes  =     0.96969696969696;
16290 +  Q_Contributed_To_AccidentNo  =     0.03030303030303;
16291 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16292 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16293 +  I_Contributed_To_Accident  = 'YES' ;
16294 +  U_Contributed_To_Accident  = 'Yes' ;
16295 +  END;
16296 +ELSE DO;
16297 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16298 +   %DMNORMIP( _ARBFMT_12);
16299 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16300 +    _NODE_  =                    5;
16301 +    _LEAF_  =                    3;
16302 +    P_Contributed_To_AccidentYes  =      0.9763779527559;
16303 +    P_Contributed_To_AccidentNo  =     0.02362204724409;
16304 +    Q_Contributed_To_AccidentYes  =      0.9763779527559;
16305 +    Q_Contributed_To_AccidentNo  =     0.02362204724409;
16306 +    V_Contributed_To_AccidentYes  =                    0;
16307 +    V_Contributed_To_AccidentNo  =                    0;
16308 +    I_Contributed_To_Accident  = 'YES' ;
16309 +    U_Contributed_To_Accident  = 'Yes' ;
16310 +    END;
16311 +  ELSE DO;
16312 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16313 +     %DMNORMIP( _ARBFMT_12);
16314 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16315 +      _NODE_  =                    7;
16316 +      _LEAF_  =                    2;
16317 +      P_Contributed_To_AccidentYes  =     0.18579234972677;
16318 +      P_Contributed_To_AccidentNo  =     0.81420765027322;
16319 +      Q_Contributed_To_AccidentYes  =     0.18579234972677;
16320 +      Q_Contributed_To_AccidentNo  =     0.81420765027322;
16321 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16322 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16323 +      I_Contributed_To_Accident  = 'NO' ;
16324 +      U_Contributed_To_Accident  = 'No' ;
16325 +      END;
16326 +    ELSE DO;
16327 +      _NODE_  =                    6;
16328 +      _LEAF_  =                    1;
16329 +      P_Contributed_To_AccidentYes  =     0.38775510204081;
16330 +      P_Contributed_To_AccidentNo  =     0.61224489795918;
16331 +      Q_Contributed_To_AccidentYes  =     0.38775510204081;
16332 +      Q_Contributed_To_AccidentNo  =     0.61224489795918;
16333 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16334 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16335 +      I_Contributed_To_Accident  = 'NO' ;
16336 +      U_Contributed_To_Accident  = 'No' ;
16337 +      END;
16338 +    END;
16339 +  END;
16340 +
16341 +*****  RESIDUALS R_ *************;
16342 +IF  F_Contributed_To_Accident  NE 'YES'
16343 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16344 +        R_Contributed_To_AccidentYes  = .;
16345 +        R_Contributed_To_AccidentNo  = .;
16346 + END;
16347 + ELSE DO;
16348 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16349 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16350 +       SELECT( F_Contributed_To_Accident  );
16351 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16352 +        R_Contributed_To_AccidentYes  +1;
16353 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16354 +        R_Contributed_To_AccidentNo  +1;
16355 +       END;
16356 + END;
16357 +
16358 +****************************************************************;
16359 +******          END OF DECISION TREE SCORING CODE         ******;
16360 +****************************************************************;
16361 +
16362 +drop _LEAF_;
16363 +*------------------------------------------------------------*;
16364 +* EndGrp: EndGroup;
16365 +* User: Divya;
16366 +* Date: 23NOV16: 03:23;
16367 +* Bagging: Loop=1;
16368 +*------------------------------------------------------------*;
16369 +*------------------------------------------------------------*;
16370 +* Bagging: Saving Probabilities for Next Iteration;
16371 +*------------------------------------------------------------*;
16372 +_BagVar1 = P_Contributed_To_AccidentYes;
16373 +_BagVar2 = P_Contributed_To_AccidentNo;
16374 +*------------------------------------------------------------*;
16375 +* Grp: StartGroup;
16376 +* User: Divya;
16377 +* Date: 23NOV16: 03:23;
16378 +* Bagging: Loop=2;
16379 +*------------------------------------------------------------*;
16380 +*------------------------------------------------------------*;
16381 +* Tree5: DecisionTree;
16382 +* User: Divya;
16383 +* Date: 23NOV16: 03:23;
16384 +* Bagging: Loop=2;
16385 +*------------------------------------------------------------*;
16386 +****************************************************************;
16387 +******             DECISION TREE SCORING CODE             ******;
16388 +****************************************************************;
16389 +
16390 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16391 +LENGTH F_Contributed_To_Accident  $    3;
16392 +LENGTH I_Contributed_To_Accident  $    3;
16393 +LENGTH U_Contributed_To_Accident  $    3;
16394 +LENGTH _WARN_  $    4;
16395 +
16396 +******              LABELS FOR NEW VARIABLES              ******;
16397 +label _NODE_ = 'Node' ;
16398 +label _LEAF_ = 'Leaf' ;
16399 +label P_Contributed_To_AccidentYes =
16400 +'Predicted: Contributed_To_Accident=Yes' ;
16401 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16402 +label Q_Contributed_To_AccidentYes =
16403 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16404 +label Q_Contributed_To_AccidentNo =
16405 +'Unadjusted P: Contributed_To_Accident=No' ;
16406 +label V_Contributed_To_AccidentYes =
16407 +'Validated: Contributed_To_Accident=Yes' ;
16408 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16409 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16410 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16411 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16412 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16413 +label U_Contributed_To_Accident =
16414 +'Unnormalized Into: Contributed_To_Accident' ;
16415 +label _WARN_ = 'Warnings' ;
16416 +
16417 +
16418 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16419 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16420 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16421 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16422 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16423 +
16424 +
16425 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16426 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16427 +
16428 +******             ASSIGN OBSERVATION TO NODE             ******;
16429 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16430 + %DMNORMIP( _ARBFMT_12);
16431 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16432 +  _NODE_  =                    3;
16433 +  _LEAF_  =                    4;
16434 +  P_Contributed_To_AccidentYes  =     0.98561151079136;
16435 +  P_Contributed_To_AccidentNo  =     0.01438848920863;
16436 +  Q_Contributed_To_AccidentYes  =     0.98561151079136;
16437 +  Q_Contributed_To_AccidentNo  =     0.01438848920863;
16438 +  V_Contributed_To_AccidentYes  =                    0;
16439 +  V_Contributed_To_AccidentNo  =                    0;
16440 +  I_Contributed_To_Accident  = 'YES' ;
16441 +  U_Contributed_To_Accident  = 'Yes' ;
16442 +  END;
16443 +ELSE DO;
16444 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16445 +   %DMNORMIP( _ARBFMT_12);
16446 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16447 +    _NODE_  =                    5;
16448 +    _LEAF_  =                    3;
16449 +    P_Contributed_To_AccidentYes  =     0.93421052631578;
16450 +    P_Contributed_To_AccidentNo  =     0.06578947368421;
16451 +    Q_Contributed_To_AccidentYes  =     0.93421052631578;
16452 +    Q_Contributed_To_AccidentNo  =     0.06578947368421;
16453 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
16454 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
16455 +    I_Contributed_To_Accident  = 'YES' ;
16456 +    U_Contributed_To_Accident  = 'Yes' ;
16457 +    END;
16458 +  ELSE DO;
16459 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16460 +     %DMNORMIP( _ARBFMT_12);
16461 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16462 +      _NODE_  =                    7;
16463 +      _LEAF_  =                    2;
16464 +      P_Contributed_To_AccidentYes  =     0.15028901734104;
16465 +      P_Contributed_To_AccidentNo  =     0.84971098265895;
16466 +      Q_Contributed_To_AccidentYes  =     0.15028901734104;
16467 +      Q_Contributed_To_AccidentNo  =     0.84971098265895;
16468 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16469 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16470 +      I_Contributed_To_Accident  = 'NO' ;
16471 +      U_Contributed_To_Accident  = 'No' ;
16472 +      END;
16473 +    ELSE DO;
16474 +      _NODE_  =                    6;
16475 +      _LEAF_  =                    1;
16476 +      P_Contributed_To_AccidentYes  =     0.34456928838951;
16477 +      P_Contributed_To_AccidentNo  =     0.65543071161048;
16478 +      Q_Contributed_To_AccidentYes  =     0.34456928838951;
16479 +      Q_Contributed_To_AccidentNo  =     0.65543071161048;
16480 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16481 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16482 +      I_Contributed_To_Accident  = 'NO' ;
16483 +      U_Contributed_To_Accident  = 'No' ;
16484 +      END;
16485 +    END;
16486 +  END;
16487 +
16488 +*****  RESIDUALS R_ *************;
16489 +IF  F_Contributed_To_Accident  NE 'YES'
16490 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16491 +        R_Contributed_To_AccidentYes  = .;
16492 +        R_Contributed_To_AccidentNo  = .;
16493 + END;
16494 + ELSE DO;
16495 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16496 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16497 +       SELECT( F_Contributed_To_Accident  );
16498 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16499 +        R_Contributed_To_AccidentYes  +1;
16500 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16501 +        R_Contributed_To_AccidentNo  +1;
16502 +       END;
16503 + END;
16504 +
16505 +****************************************************************;
16506 +******          END OF DECISION TREE SCORING CODE         ******;
16507 +****************************************************************;
16508 +
16509 +drop _LEAF_;
16510 +*------------------------------------------------------------*;
16511 +* EndGrp: EndGroup;
16512 +* User: Divya;
16513 +* Date: 23NOV16: 03:23;
16514 +* Bagging: Loop=2;
16515 +*------------------------------------------------------------*;
16516 +*------------------------------------------------------------*;
16517 +* Bagging: accumulate probabilities for iteration: 2;
16518 +*------------------------------------------------------------*;
16519 +P_Contributed_To_AccidentYes = _BagVar1*(1/2) + P_Contributed_To_AccidentYes*(1/2);
16520 +P_Contributed_To_AccidentNo = _BagVar2*(1/2) + P_Contributed_To_AccidentNo*(1/2);
16521 +*------------------------------------------------------------*;
16522 +* Bagging: Saving Probabilities for Next Iteration;
16523 +*------------------------------------------------------------*;
16524 +_BagVar1 = P_Contributed_To_AccidentYes;
16525 +_BagVar2 = P_Contributed_To_AccidentNo;
16526 +*------------------------------------------------------------*;
16527 +* Grp: StartGroup;
16528 +* User: Divya;
16529 +* Date: 23NOV16: 03:24;
16530 +* Bagging: Loop=3;
16531 +*------------------------------------------------------------*;
16532 +*------------------------------------------------------------*;
16533 +* Tree5: DecisionTree;
16534 +* User: Divya;
16535 +* Date: 23NOV16: 03:24;
16536 +* Bagging: Loop=3;
16537 +*------------------------------------------------------------*;
16538 +****************************************************************;
16539 +******             DECISION TREE SCORING CODE             ******;
16540 +****************************************************************;
16541 +
16542 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16543 +LENGTH F_Contributed_To_Accident  $    3;
16544 +LENGTH I_Contributed_To_Accident  $    3;
16545 +LENGTH U_Contributed_To_Accident  $    3;
16546 +LENGTH _WARN_  $    4;
16547 +
16548 +******              LABELS FOR NEW VARIABLES              ******;
16549 +label _NODE_ = 'Node' ;
16550 +label _LEAF_ = 'Leaf' ;
16551 +label P_Contributed_To_AccidentYes =
16552 +'Predicted: Contributed_To_Accident=Yes' ;
16553 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16554 +label Q_Contributed_To_AccidentYes =
16555 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16556 +label Q_Contributed_To_AccidentNo =
16557 +'Unadjusted P: Contributed_To_Accident=No' ;
16558 +label V_Contributed_To_AccidentYes =
16559 +'Validated: Contributed_To_Accident=Yes' ;
16560 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16561 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16562 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16563 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16564 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16565 +label U_Contributed_To_Accident =
16566 +'Unnormalized Into: Contributed_To_Accident' ;
16567 +label _WARN_ = 'Warnings' ;
16568 +
16569 +
16570 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16571 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16572 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16573 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16574 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16575 +
16576 +
16577 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16578 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16579 +
16580 +******             ASSIGN OBSERVATION TO NODE             ******;
16581 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16582 + %DMNORMIP( _ARBFMT_12);
16583 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16584 +  _NODE_  =                    3;
16585 +  _LEAF_  =                    4;
16586 +  P_Contributed_To_AccidentYes  =     0.97902097902097;
16587 +  P_Contributed_To_AccidentNo  =     0.02097902097902;
16588 +  Q_Contributed_To_AccidentYes  =     0.97902097902097;
16589 +  Q_Contributed_To_AccidentNo  =     0.02097902097902;
16590 +  V_Contributed_To_AccidentYes  =                    0;
16591 +  V_Contributed_To_AccidentNo  =                    0;
16592 +  I_Contributed_To_Accident  = 'YES' ;
16593 +  U_Contributed_To_Accident  = 'Yes' ;
16594 +  END;
16595 +ELSE DO;
16596 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16597 +   %DMNORMIP( _ARBFMT_12);
16598 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16599 +    _NODE_  =                    5;
16600 +    _LEAF_  =                    3;
16601 +    P_Contributed_To_AccidentYes  =     0.94409937888198;
16602 +    P_Contributed_To_AccidentNo  =     0.05590062111801;
16603 +    Q_Contributed_To_AccidentYes  =     0.94409937888198;
16604 +    Q_Contributed_To_AccidentNo  =     0.05590062111801;
16605 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
16606 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
16607 +    I_Contributed_To_Accident  = 'YES' ;
16608 +    U_Contributed_To_Accident  = 'Yes' ;
16609 +    END;
16610 +  ELSE DO;
16611 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16612 +     %DMNORMIP( _ARBFMT_12);
16613 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16614 +      _NODE_  =                    7;
16615 +      _LEAF_  =                    2;
16616 +      P_Contributed_To_AccidentYes  =     0.18407960199004;
16617 +      P_Contributed_To_AccidentNo  =     0.81592039800995;
16618 +      Q_Contributed_To_AccidentYes  =     0.18407960199004;
16619 +      Q_Contributed_To_AccidentNo  =     0.81592039800995;
16620 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16621 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16622 +      I_Contributed_To_Accident  = 'NO' ;
16623 +      U_Contributed_To_Accident  = 'No' ;
16624 +      END;
16625 +    ELSE DO;
16626 +      _NODE_  =                    6;
16627 +      _LEAF_  =                    1;
16628 +      P_Contributed_To_AccidentYes  =     0.35091277890466;
16629 +      P_Contributed_To_AccidentNo  =     0.64908722109533;
16630 +      Q_Contributed_To_AccidentYes  =     0.35091277890466;
16631 +      Q_Contributed_To_AccidentNo  =     0.64908722109533;
16632 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16633 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16634 +      I_Contributed_To_Accident  = 'NO' ;
16635 +      U_Contributed_To_Accident  = 'No' ;
16636 +      END;
16637 +    END;
16638 +  END;
16639 +
16640 +*****  RESIDUALS R_ *************;
16641 +IF  F_Contributed_To_Accident  NE 'YES'
16642 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16643 +        R_Contributed_To_AccidentYes  = .;
16644 +        R_Contributed_To_AccidentNo  = .;
16645 + END;
16646 + ELSE DO;
16647 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16648 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16649 +       SELECT( F_Contributed_To_Accident  );
16650 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16651 +        R_Contributed_To_AccidentYes  +1;
16652 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16653 +        R_Contributed_To_AccidentNo  +1;
16654 +       END;
16655 + END;
16656 +
16657 +****************************************************************;
16658 +******          END OF DECISION TREE SCORING CODE         ******;
16659 +****************************************************************;
16660 +
16661 +drop _LEAF_;
16662 +*------------------------------------------------------------*;
16663 +* EndGrp: EndGroup;
16664 +* User: Divya;
16665 +* Date: 23NOV16: 03:24;
16666 +* Bagging: Loop=3;
16667 +*------------------------------------------------------------*;
16668 +*------------------------------------------------------------*;
16669 +* Bagging: accumulate probabilities for iteration: 3;
16670 +*------------------------------------------------------------*;
16671 +P_Contributed_To_AccidentYes = _BagVar1*(2/3) + P_Contributed_To_AccidentYes*(1/3);
16672 +P_Contributed_To_AccidentNo = _BagVar2*(2/3) + P_Contributed_To_AccidentNo*(1/3);
16673 +*------------------------------------------------------------*;
16674 +* Bagging: Saving Probabilities for Next Iteration;
16675 +*------------------------------------------------------------*;
16676 +_BagVar1 = P_Contributed_To_AccidentYes;
16677 +_BagVar2 = P_Contributed_To_AccidentNo;
NOTE: %INCLUDE (level 1) ending.
 
NOTE: DATA STEP view saved on file EMWS1.ENDGRP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.STAT2_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_ in ('FROM', 'INTO');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 0 observations read from the data set SASHELP.VFORMAT.
      WHERE UPCASE(fmtname)='$3';
NOTE: DATA statement used (Total process time):
      real time           0.08 seconds
      cpu time            0.04 seconds
 
 
 
NOTE: The file EMFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=19570,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:24:11
 
NOTE: 24 records were written to the file EMFLOW.
      The minimum record length was 4.
      The maximum record length was 67.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_ in ('FROM', 'TARGET');
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DM.
      WHERE _TYPE_='RESIDUAL';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: The file EMFLOW is:
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=20409,
      Last Modified=23Nov2016:03:24:11,
      Create Time=23Nov2016:03:24:11
 
NOTE: 23 records were written to the file EMFLOW.
      The minimum record length was 3.
      The maximum record length was 75.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
16678  data EndGrp_SCORE/view=EndGrp_SCORE;
16679  set EMWS1.EndGrp_TRAIN;
16680  run;
 
NOTE: DATA STEP view saved on file WORK.ENDGRP_SCORE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.ENDGRP_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DD.
NOTE: The data set WORK.CONTRIBUTED_TO_ACCIDENT has 2 observations and 7 variables.
NOTE: There were 2 observations read from the data set EMWS1.TREE5_CONTRIBUTED_TO_A_DD.
NOTE: The data set WORK.CONTRIBUTED_TO_ACCIDENT has 2 observations and 7 variables.
16681  *------------------------------------------------------------*;
16682  * EndGrp: Create decision matrix;
16683  *------------------------------------------------------------*;
16684  data WORK.Contributed_To_Accident;
16685    length   Contributed_To_Accident          $  32
16686             COUNT                                8
16687             DATAPRIOR                            8
16688             TRAINPRIOR                           8
16689             DECPRIOR                             8
16690             DECISION1                            8
16691             DECISION2                            8
16692             ;
16693
16694    label    COUNT="Level Counts"
16695             DATAPRIOR="Data Proportions"
16696             TRAINPRIOR="Training Proportions"
16697             DECPRIOR="Decision Priors"
16698             DECISION1="YES"
16699             DECISION2="NO"
16700             ;
16701    format   COUNT 10.
16702             ;
16703  Contributed_To_Accident="YES"; COUNT=478; DATAPRIOR=0.5009519992; TRAINPRIOR=0.5058201058201; DECPRIOR=.; DECISION1=1; DECISION2=0;
16704  output;
16705  Contributed_To_Accident="NO"; COUNT=467; DATAPRIOR=0.4990480008; TRAINPRIOR=0.49417989417989; DECPRIOR=.; DECISION1=0; DECISION2=1;
16706  output;
16707  ;
16708  run;
 
NOTE: The data set WORK.CONTRIBUTED_TO_ACCIDENT has 2 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
16709  proc datasets lib=work nolist;
16710  modify Contributed_To_Accident(type=PROFIT label=Contributed_To_Accident);
16711  label DECISION1= 'YES';
16712  label DECISION2= 'NO';
16713  run;
 
NOTE: MODIFY was successful for WORK.CONTRIBUTED_TO_ACCIDENT.DATA.
16714  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
16715  *------------------------------------------------------------*;
16716  * EndGrp Generate decision score code;
16717  *------------------------------------------------------------*;
16718  run;
 
NOTE: Fileref _DECFLOW has been deassigned.
NOTE: %INCLUDE (level 1) file EMFLOW is file D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas.
16719 +*------------------------------------------------------------*;
16720 +* EndGrp: ;
16721 +* User: Divya;
16722 +* Date: 23NOV16: 03:23;
16723 +*------------------------------------------------------------* ;
16724 +* Ensemble Code;
16725 +*------------------------------------------------------------* ;
16726 +* Bagging: Loop=1;
16727 +* Temporary Variables;
16728 +drop _BagVar1;
16729 +_BagVar1 = 0;
16730 +drop _BagVar2;
16731 +_BagVar2 = 0;
16732 +*------------------------------------------------------------*;
16733 +* Grp: StartGroup;
16734 +* User: Divya;
16735 +* Date: 23NOV16: 03:23;
16736 +* Bagging: Loop=1;
16737 +*------------------------------------------------------------*;
16738 +*------------------------------------------------------------*;
16739 +* Tree5: DecisionTree;
16740 +* User: Divya;
16741 +* Date: 23NOV16: 03:23;
16742 +* Bagging: Loop=1;
16743 +*------------------------------------------------------------*;
16744 +****************************************************************;
16745 +******             DECISION TREE SCORING CODE             ******;
16746 +****************************************************************;
16747 +
16748 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16749 +LENGTH F_Contributed_To_Accident  $    3;
16750 +LENGTH I_Contributed_To_Accident  $    3;
16751 +LENGTH U_Contributed_To_Accident  $    3;
16752 +LENGTH _WARN_  $    4;
16753 +
16754 +******              LABELS FOR NEW VARIABLES              ******;
16755 +label _NODE_ = 'Node' ;
16756 +label _LEAF_ = 'Leaf' ;
16757 +label P_Contributed_To_AccidentYes =
16758 +'Predicted: Contributed_To_Accident=Yes' ;
16759 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16760 +label Q_Contributed_To_AccidentYes =
16761 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16762 +label Q_Contributed_To_AccidentNo =
16763 +'Unadjusted P: Contributed_To_Accident=No' ;
16764 +label V_Contributed_To_AccidentYes =
16765 +'Validated: Contributed_To_Accident=Yes' ;
16766 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16767 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16768 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16769 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16770 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16771 +label U_Contributed_To_Accident =
16772 +'Unnormalized Into: Contributed_To_Accident' ;
16773 +label _WARN_ = 'Warnings' ;
16774 +
16775 +
16776 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16777 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16778 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16779 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16780 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16781 +
16782 +
16783 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16784 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16785 +
16786 +******             ASSIGN OBSERVATION TO NODE             ******;
16787 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16788 + %DMNORMIP( _ARBFMT_12);
16789 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16790 +  _NODE_  =                    3;
16791 +  _LEAF_  =                    4;
16792 +  P_Contributed_To_AccidentYes  =     0.96969696969696;
16793 +  P_Contributed_To_AccidentNo  =     0.03030303030303;
16794 +  Q_Contributed_To_AccidentYes  =     0.96969696969696;
16795 +  Q_Contributed_To_AccidentNo  =     0.03030303030303;
16796 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
16797 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
16798 +  I_Contributed_To_Accident  = 'YES' ;
16799 +  U_Contributed_To_Accident  = 'Yes' ;
16800 +  END;
16801 +ELSE DO;
16802 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16803 +   %DMNORMIP( _ARBFMT_12);
16804 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16805 +    _NODE_  =                    5;
16806 +    _LEAF_  =                    3;
16807 +    P_Contributed_To_AccidentYes  =      0.9763779527559;
16808 +    P_Contributed_To_AccidentNo  =     0.02362204724409;
16809 +    Q_Contributed_To_AccidentYes  =      0.9763779527559;
16810 +    Q_Contributed_To_AccidentNo  =     0.02362204724409;
16811 +    V_Contributed_To_AccidentYes  =                    0;
16812 +    V_Contributed_To_AccidentNo  =                    0;
16813 +    I_Contributed_To_Accident  = 'YES' ;
16814 +    U_Contributed_To_Accident  = 'Yes' ;
16815 +    END;
16816 +  ELSE DO;
16817 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16818 +     %DMNORMIP( _ARBFMT_12);
16819 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16820 +      _NODE_  =                    7;
16821 +      _LEAF_  =                    2;
16822 +      P_Contributed_To_AccidentYes  =     0.18579234972677;
16823 +      P_Contributed_To_AccidentNo  =     0.81420765027322;
16824 +      Q_Contributed_To_AccidentYes  =     0.18579234972677;
16825 +      Q_Contributed_To_AccidentNo  =     0.81420765027322;
16826 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16827 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16828 +      I_Contributed_To_Accident  = 'NO' ;
16829 +      U_Contributed_To_Accident  = 'No' ;
16830 +      END;
16831 +    ELSE DO;
16832 +      _NODE_  =                    6;
16833 +      _LEAF_  =                    1;
16834 +      P_Contributed_To_AccidentYes  =     0.38775510204081;
16835 +      P_Contributed_To_AccidentNo  =     0.61224489795918;
16836 +      Q_Contributed_To_AccidentYes  =     0.38775510204081;
16837 +      Q_Contributed_To_AccidentNo  =     0.61224489795918;
16838 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16839 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16840 +      I_Contributed_To_Accident  = 'NO' ;
16841 +      U_Contributed_To_Accident  = 'No' ;
16842 +      END;
16843 +    END;
16844 +  END;
16845 +
16846 +*****  RESIDUALS R_ *************;
16847 +IF  F_Contributed_To_Accident  NE 'YES'
16848 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16849 +        R_Contributed_To_AccidentYes  = .;
16850 +        R_Contributed_To_AccidentNo  = .;
16851 + END;
16852 + ELSE DO;
16853 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
16854 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
16855 +       SELECT( F_Contributed_To_Accident  );
16856 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
16857 +        R_Contributed_To_AccidentYes  +1;
16858 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
16859 +        R_Contributed_To_AccidentNo  +1;
16860 +       END;
16861 + END;
16862 +
16863 +****************************************************************;
16864 +******          END OF DECISION TREE SCORING CODE         ******;
16865 +****************************************************************;
16866 +
16867 +drop _LEAF_;
16868 +*------------------------------------------------------------*;
16869 +* EndGrp: EndGroup;
16870 +* User: Divya;
16871 +* Date: 23NOV16: 03:23;
16872 +* Bagging: Loop=1;
16873 +*------------------------------------------------------------*;
16874 +*------------------------------------------------------------*;
16875 +* Bagging: Saving Probabilities for Next Iteration;
16876 +*------------------------------------------------------------*;
16877 +_BagVar1 = P_Contributed_To_AccidentYes;
16878 +_BagVar2 = P_Contributed_To_AccidentNo;
16879 +*------------------------------------------------------------*;
16880 +* Grp: StartGroup;
16881 +* User: Divya;
16882 +* Date: 23NOV16: 03:23;
16883 +* Bagging: Loop=2;
16884 +*------------------------------------------------------------*;
16885 +*------------------------------------------------------------*;
16886 +* Tree5: DecisionTree;
16887 +* User: Divya;
16888 +* Date: 23NOV16: 03:23;
16889 +* Bagging: Loop=2;
16890 +*------------------------------------------------------------*;
16891 +****************************************************************;
16892 +******             DECISION TREE SCORING CODE             ******;
16893 +****************************************************************;
16894 +
16895 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16896 +LENGTH F_Contributed_To_Accident  $    3;
16897 +LENGTH I_Contributed_To_Accident  $    3;
16898 +LENGTH U_Contributed_To_Accident  $    3;
16899 +LENGTH _WARN_  $    4;
16900 +
16901 +******              LABELS FOR NEW VARIABLES              ******;
16902 +label _NODE_ = 'Node' ;
16903 +label _LEAF_ = 'Leaf' ;
16904 +label P_Contributed_To_AccidentYes =
16905 +'Predicted: Contributed_To_Accident=Yes' ;
16906 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
16907 +label Q_Contributed_To_AccidentYes =
16908 +'Unadjusted P: Contributed_To_Accident=Yes' ;
16909 +label Q_Contributed_To_AccidentNo =
16910 +'Unadjusted P: Contributed_To_Accident=No' ;
16911 +label V_Contributed_To_AccidentYes =
16912 +'Validated: Contributed_To_Accident=Yes' ;
16913 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
16914 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
16915 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
16916 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
16917 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
16918 +label U_Contributed_To_Accident =
16919 +'Unnormalized Into: Contributed_To_Accident' ;
16920 +label _WARN_ = 'Warnings' ;
16921 +
16922 +
16923 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16924 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
16925 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
16926 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
16927 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
16928 +
16929 +
16930 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
16931 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
16932 +
16933 +******             ASSIGN OBSERVATION TO NODE             ******;
16934 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
16935 + %DMNORMIP( _ARBFMT_12);
16936 +IF _ARBFMT_12 IN ('3' ) THEN DO;
16937 +  _NODE_  =                    3;
16938 +  _LEAF_  =                    4;
16939 +  P_Contributed_To_AccidentYes  =     0.98561151079136;
16940 +  P_Contributed_To_AccidentNo  =     0.01438848920863;
16941 +  Q_Contributed_To_AccidentYes  =     0.98561151079136;
16942 +  Q_Contributed_To_AccidentNo  =     0.01438848920863;
16943 +  V_Contributed_To_AccidentYes  =                    0;
16944 +  V_Contributed_To_AccidentNo  =                    0;
16945 +  I_Contributed_To_Accident  = 'YES' ;
16946 +  U_Contributed_To_Accident  = 'Yes' ;
16947 +  END;
16948 +ELSE DO;
16949 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
16950 +   %DMNORMIP( _ARBFMT_12);
16951 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
16952 +    _NODE_  =                    5;
16953 +    _LEAF_  =                    3;
16954 +    P_Contributed_To_AccidentYes  =     0.93421052631578;
16955 +    P_Contributed_To_AccidentNo  =     0.06578947368421;
16956 +    Q_Contributed_To_AccidentYes  =     0.93421052631578;
16957 +    Q_Contributed_To_AccidentNo  =     0.06578947368421;
16958 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
16959 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
16960 +    I_Contributed_To_Accident  = 'YES' ;
16961 +    U_Contributed_To_Accident  = 'Yes' ;
16962 +    END;
16963 +  ELSE DO;
16964 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
16965 +     %DMNORMIP( _ARBFMT_12);
16966 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
16967 +      _NODE_  =                    7;
16968 +      _LEAF_  =                    2;
16969 +      P_Contributed_To_AccidentYes  =     0.15028901734104;
16970 +      P_Contributed_To_AccidentNo  =     0.84971098265895;
16971 +      Q_Contributed_To_AccidentYes  =     0.15028901734104;
16972 +      Q_Contributed_To_AccidentNo  =     0.84971098265895;
16973 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
16974 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
16975 +      I_Contributed_To_Accident  = 'NO' ;
16976 +      U_Contributed_To_Accident  = 'No' ;
16977 +      END;
16978 +    ELSE DO;
16979 +      _NODE_  =                    6;
16980 +      _LEAF_  =                    1;
16981 +      P_Contributed_To_AccidentYes  =     0.34456928838951;
16982 +      P_Contributed_To_AccidentNo  =     0.65543071161048;
16983 +      Q_Contributed_To_AccidentYes  =     0.34456928838951;
16984 +      Q_Contributed_To_AccidentNo  =     0.65543071161048;
16985 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
16986 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
16987 +      I_Contributed_To_Accident  = 'NO' ;
16988 +      U_Contributed_To_Accident  = 'No' ;
16989 +      END;
16990 +    END;
16991 +  END;
16992 +
16993 +*****  RESIDUALS R_ *************;
16994 +IF  F_Contributed_To_Accident  NE 'YES'
16995 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
16996 +        R_Contributed_To_AccidentYes  = .;
16997 +        R_Contributed_To_AccidentNo  = .;
16998 + END;
16999 + ELSE DO;
17000 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17001 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17002 +       SELECT( F_Contributed_To_Accident  );
17003 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17004 +        R_Contributed_To_AccidentYes  +1;
17005 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17006 +        R_Contributed_To_AccidentNo  +1;
17007 +       END;
17008 + END;
17009 +
17010 +****************************************************************;
17011 +******          END OF DECISION TREE SCORING CODE         ******;
17012 +****************************************************************;
17013 +
17014 +drop _LEAF_;
17015 +*------------------------------------------------------------*;
17016 +* EndGrp: EndGroup;
17017 +* User: Divya;
17018 +* Date: 23NOV16: 03:23;
17019 +* Bagging: Loop=2;
17020 +*------------------------------------------------------------*;
17021 +*------------------------------------------------------------*;
17022 +* Bagging: accumulate probabilities for iteration: 2;
17023 +*------------------------------------------------------------*;
17024 +P_Contributed_To_AccidentYes = _BagVar1*(1/2) + P_Contributed_To_AccidentYes*(1/2);
17025 +P_Contributed_To_AccidentNo = _BagVar2*(1/2) + P_Contributed_To_AccidentNo*(1/2);
17026 +*------------------------------------------------------------*;
17027 +* Bagging: Saving Probabilities for Next Iteration;
17028 +*------------------------------------------------------------*;
17029 +_BagVar1 = P_Contributed_To_AccidentYes;
17030 +_BagVar2 = P_Contributed_To_AccidentNo;
17031 +*------------------------------------------------------------*;
17032 +* Grp: StartGroup;
17033 +* User: Divya;
17034 +* Date: 23NOV16: 03:24;
17035 +* Bagging: Loop=3;
17036 +*------------------------------------------------------------*;
17037 +*------------------------------------------------------------*;
17038 +* Tree5: DecisionTree;
17039 +* User: Divya;
17040 +* Date: 23NOV16: 03:24;
17041 +* Bagging: Loop=3;
17042 +*------------------------------------------------------------*;
17043 +****************************************************************;
17044 +******             DECISION TREE SCORING CODE             ******;
17045 +****************************************************************;
17046 +
17047 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17048 +LENGTH F_Contributed_To_Accident  $    3;
17049 +LENGTH I_Contributed_To_Accident  $    3;
17050 +LENGTH U_Contributed_To_Accident  $    3;
17051 +LENGTH _WARN_  $    4;
17052 +
17053 +******              LABELS FOR NEW VARIABLES              ******;
17054 +label _NODE_ = 'Node' ;
17055 +label _LEAF_ = 'Leaf' ;
17056 +label P_Contributed_To_AccidentYes =
17057 +'Predicted: Contributed_To_Accident=Yes' ;
17058 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17059 +label Q_Contributed_To_AccidentYes =
17060 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17061 +label Q_Contributed_To_AccidentNo =
17062 +'Unadjusted P: Contributed_To_Accident=No' ;
17063 +label V_Contributed_To_AccidentYes =
17064 +'Validated: Contributed_To_Accident=Yes' ;
17065 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17066 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17067 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17068 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17069 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17070 +label U_Contributed_To_Accident =
17071 +'Unnormalized Into: Contributed_To_Accident' ;
17072 +label _WARN_ = 'Warnings' ;
17073 +
17074 +
17075 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17076 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17077 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17078 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17079 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17080 +
17081 +
17082 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17083 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17084 +
17085 +******             ASSIGN OBSERVATION TO NODE             ******;
17086 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17087 + %DMNORMIP( _ARBFMT_12);
17088 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17089 +  _NODE_  =                    3;
17090 +  _LEAF_  =                    4;
17091 +  P_Contributed_To_AccidentYes  =     0.97902097902097;
17092 +  P_Contributed_To_AccidentNo  =     0.02097902097902;
17093 +  Q_Contributed_To_AccidentYes  =     0.97902097902097;
17094 +  Q_Contributed_To_AccidentNo  =     0.02097902097902;
17095 +  V_Contributed_To_AccidentYes  =                    0;
17096 +  V_Contributed_To_AccidentNo  =                    0;
17097 +  I_Contributed_To_Accident  = 'YES' ;
17098 +  U_Contributed_To_Accident  = 'Yes' ;
17099 +  END;
17100 +ELSE DO;
17101 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17102 +   %DMNORMIP( _ARBFMT_12);
17103 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17104 +    _NODE_  =                    5;
17105 +    _LEAF_  =                    3;
17106 +    P_Contributed_To_AccidentYes  =     0.94409937888198;
17107 +    P_Contributed_To_AccidentNo  =     0.05590062111801;
17108 +    Q_Contributed_To_AccidentYes  =     0.94409937888198;
17109 +    Q_Contributed_To_AccidentNo  =     0.05590062111801;
17110 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
17111 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
17112 +    I_Contributed_To_Accident  = 'YES' ;
17113 +    U_Contributed_To_Accident  = 'Yes' ;
17114 +    END;
17115 +  ELSE DO;
17116 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17117 +     %DMNORMIP( _ARBFMT_12);
17118 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17119 +      _NODE_  =                    7;
17120 +      _LEAF_  =                    2;
17121 +      P_Contributed_To_AccidentYes  =     0.18407960199004;
17122 +      P_Contributed_To_AccidentNo  =     0.81592039800995;
17123 +      Q_Contributed_To_AccidentYes  =     0.18407960199004;
17124 +      Q_Contributed_To_AccidentNo  =     0.81592039800995;
17125 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17126 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17127 +      I_Contributed_To_Accident  = 'NO' ;
17128 +      U_Contributed_To_Accident  = 'No' ;
17129 +      END;
17130 +    ELSE DO;
17131 +      _NODE_  =                    6;
17132 +      _LEAF_  =                    1;
17133 +      P_Contributed_To_AccidentYes  =     0.35091277890466;
17134 +      P_Contributed_To_AccidentNo  =     0.64908722109533;
17135 +      Q_Contributed_To_AccidentYes  =     0.35091277890466;
17136 +      Q_Contributed_To_AccidentNo  =     0.64908722109533;
17137 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17138 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17139 +      I_Contributed_To_Accident  = 'NO' ;
17140 +      U_Contributed_To_Accident  = 'No' ;
17141 +      END;
17142 +    END;
17143 +  END;
17144 +
17145 +*****  RESIDUALS R_ *************;
17146 +IF  F_Contributed_To_Accident  NE 'YES'
17147 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17148 +        R_Contributed_To_AccidentYes  = .;
17149 +        R_Contributed_To_AccidentNo  = .;
17150 + END;
17151 + ELSE DO;
17152 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17153 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17154 +       SELECT( F_Contributed_To_Accident  );
17155 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17156 +        R_Contributed_To_AccidentYes  +1;
17157 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17158 +        R_Contributed_To_AccidentNo  +1;
17159 +       END;
17160 + END;
17161 +
17162 +****************************************************************;
17163 +******          END OF DECISION TREE SCORING CODE         ******;
17164 +****************************************************************;
17165 +
17166 +drop _LEAF_;
17167 +*------------------------------------------------------------*;
17168 +* EndGrp: EndGroup;
17169 +* User: Divya;
17170 +* Date: 23NOV16: 03:24;
17171 +* Bagging: Loop=3;
17172 +*------------------------------------------------------------*;
17173 +*------------------------------------------------------------*;
17174 +* Bagging: accumulate probabilities for iteration: 3;
17175 +*------------------------------------------------------------*;
17176 +P_Contributed_To_AccidentYes = _BagVar1*(2/3) + P_Contributed_To_AccidentYes*(1/3);
17177 +P_Contributed_To_AccidentNo = _BagVar2*(2/3) + P_Contributed_To_AccidentNo*(1/3);
17178 +*------------------------------------------------------------*;
17179 +* Bagging: Saving Probabilities for Next Iteration;
17180 +*------------------------------------------------------------*;
17181 +_BagVar1 = P_Contributed_To_AccidentYes;
17182 +_BagVar2 = P_Contributed_To_AccidentNo;
17183 +*------------------------------------------------------------*;
17184 +*Computing Classification Vars: Contributed_To_Accident;
17185 +*------------------------------------------------------------*;
17186 +length I_Contributed_To_Accident $3;
17187 +label  I_Contributed_To_Accident = 'Into: Contributed_To_Accident';
17188 +length _format200 $200;
17189 +drop _format200;
17190 +_format200= ' ' ;
17191 +length _p_ 8;
17192 +_p_= 0 ;
17193 +drop _p_ ;
17194 +if P_Contributed_To_AccidentYes - _p_ > 1e-8 then do ;
17195 +   _p_= P_Contributed_To_AccidentYes ;
17196 +   _format200='YES';
17197 +end;
17198 +if P_Contributed_To_AccidentNo - _p_ > 1e-8 then do ;
17199 +   _p_= P_Contributed_To_AccidentNo ;
17200 +   _format200='NO';
17201 +end;
17202 +I_Contributed_To_Accident=dmnorm(_format200,32); ;
17203 +if I_Contributed_To_Accident='YES' then
17204 +U_Contributed_To_Accident='YES';
17205 +if I_Contributed_To_Accident='NO' then
17206 +U_Contributed_To_Accident='NO';
17207 +*------------------------------------------------------------*;
17208 +*Computing Residual Vars: Contributed_To_Accident;
17209 +*------------------------------------------------------------*;
17210 +Length R_Contributed_To_AccidentYes 8;
17211 +Label R_Contributed_To_AccidentYes='Residual: Contributed_To_Accident=Yes';
17212 +Length R_Contributed_To_AccidentNo 8;
17213 +Label R_Contributed_To_AccidentNo='Residual: Contributed_To_Accident=No';
17214 +if
17215 + F_Contributed_To_Accident ne 'YES'
17216 +and F_Contributed_To_Accident ne 'NO'
17217 + then do;
17218 +R_Contributed_To_AccidentYes=.;
17219 +R_Contributed_To_AccidentNo=.;
17220 +end;
17221 +else do;
17222 +R_Contributed_To_AccidentYes= - P_Contributed_To_AccidentYes;
17223 +R_Contributed_To_AccidentNo= - P_Contributed_To_AccidentNo;
17224 +select(F_Contributed_To_Accident);
17225 +when('YES')R_Contributed_To_AccidentYes= R_Contributed_To_AccidentYes+1;
17226 +when('NO')R_Contributed_To_AccidentNo= R_Contributed_To_AccidentNo+1;
17227 +otherwise;
17228 +end;
17229 +end;
NOTE: %INCLUDE (level 1) ending.
 
NOTE: DATA STEP view saved on file EMWS1.ENDGRP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.STAT2_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.07 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.07 seconds
 
 
NOTE: %INCLUDE (level 1) file EMFLOW is file D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas.
17230 +*------------------------------------------------------------*;
17231 +* EndGrp: ;
17232 +* User: Divya;
17233 +* Date: 23NOV16: 03:23;
17234 +*------------------------------------------------------------* ;
17235 +* Ensemble Code;
17236 +*------------------------------------------------------------* ;
17237 +* Bagging: Loop=1;
17238 +* Temporary Variables;
17239 +drop _BagVar1;
17240 +_BagVar1 = 0;
17241 +drop _BagVar2;
17242 +_BagVar2 = 0;
17243 +*------------------------------------------------------------*;
17244 +* Grp: StartGroup;
17245 +* User: Divya;
17246 +* Date: 23NOV16: 03:23;
17247 +* Bagging: Loop=1;
17248 +*------------------------------------------------------------*;
17249 +*------------------------------------------------------------*;
17250 +* Tree5: DecisionTree;
17251 +* User: Divya;
17252 +* Date: 23NOV16: 03:23;
17253 +* Bagging: Loop=1;
17254 +*------------------------------------------------------------*;
17255 +****************************************************************;
17256 +******             DECISION TREE SCORING CODE             ******;
17257 +****************************************************************;
17258 +
17259 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17260 +LENGTH F_Contributed_To_Accident  $    3;
17261 +LENGTH I_Contributed_To_Accident  $    3;
17262 +LENGTH U_Contributed_To_Accident  $    3;
17263 +LENGTH _WARN_  $    4;
17264 +
17265 +******              LABELS FOR NEW VARIABLES              ******;
17266 +label _NODE_ = 'Node' ;
17267 +label _LEAF_ = 'Leaf' ;
17268 +label P_Contributed_To_AccidentYes =
17269 +'Predicted: Contributed_To_Accident=Yes' ;
17270 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17271 +label Q_Contributed_To_AccidentYes =
17272 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17273 +label Q_Contributed_To_AccidentNo =
17274 +'Unadjusted P: Contributed_To_Accident=No' ;
17275 +label V_Contributed_To_AccidentYes =
17276 +'Validated: Contributed_To_Accident=Yes' ;
17277 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17278 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17279 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17280 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17281 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17282 +label U_Contributed_To_Accident =
17283 +'Unnormalized Into: Contributed_To_Accident' ;
17284 +label _WARN_ = 'Warnings' ;
17285 +
17286 +
17287 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17288 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17289 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17290 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17291 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17292 +
17293 +
17294 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17295 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17296 +
17297 +******             ASSIGN OBSERVATION TO NODE             ******;
17298 +_ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17299 + %DMNORMIP( _ARBFMT_12);
17300 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17301 +  _NODE_  =                    3;
17302 +  _LEAF_  =                    4;
17303 +  P_Contributed_To_AccidentYes  =     0.96969696969696;
17304 +  P_Contributed_To_AccidentNo  =     0.03030303030303;
17305 +  Q_Contributed_To_AccidentYes  =     0.96969696969696;
17306 +  Q_Contributed_To_AccidentNo  =     0.03030303030303;
17307 +  V_Contributed_To_AccidentYes  =      0.2156862745098;
17308 +  V_Contributed_To_AccidentNo  =     0.78431372549019;
17309 +  I_Contributed_To_Accident  = 'YES' ;
17310 +  U_Contributed_To_Accident  = 'Yes' ;
17311 +  END;
17312 +ELSE DO;
17313 +  _ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17314 +   %DMNORMIP( _ARBFMT_12);
17315 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17316 +    _NODE_  =                    5;
17317 +    _LEAF_  =                    3;
17318 +    P_Contributed_To_AccidentYes  =      0.9763779527559;
17319 +    P_Contributed_To_AccidentNo  =     0.02362204724409;
17320 +    Q_Contributed_To_AccidentYes  =      0.9763779527559;
17321 +    Q_Contributed_To_AccidentNo  =     0.02362204724409;
17322 +    V_Contributed_To_AccidentYes  =                    0;
17323 +    V_Contributed_To_AccidentNo  =                    0;
17324 +    I_Contributed_To_Accident  = 'YES' ;
17325 +    U_Contributed_To_Accident  = 'Yes' ;
17326 +    END;
17327 +  ELSE DO;
17328 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17329 +     %DMNORMIP( _ARBFMT_12);
17330 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17331 +      _NODE_  =                    7;
17332 +      _LEAF_  =                    2;
17333 +      P_Contributed_To_AccidentYes  =     0.18579234972677;
17334 +      P_Contributed_To_AccidentNo  =     0.81420765027322;
17335 +      Q_Contributed_To_AccidentYes  =     0.18579234972677;
17336 +      Q_Contributed_To_AccidentNo  =     0.81420765027322;
17337 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17338 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17339 +      I_Contributed_To_Accident  = 'NO' ;
17340 +      U_Contributed_To_Accident  = 'No' ;
17341 +      END;
17342 +    ELSE DO;
17343 +      _NODE_  =                    6;
17344 +      _LEAF_  =                    1;
17345 +      P_Contributed_To_AccidentYes  =     0.38775510204081;
17346 +      P_Contributed_To_AccidentNo  =     0.61224489795918;
17347 +      Q_Contributed_To_AccidentYes  =     0.38775510204081;
17348 +      Q_Contributed_To_AccidentNo  =     0.61224489795918;
17349 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17350 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17351 +      I_Contributed_To_Accident  = 'NO' ;
17352 +      U_Contributed_To_Accident  = 'No' ;
17353 +      END;
17354 +    END;
17355 +  END;
17356 +
17357 +*****  RESIDUALS R_ *************;
17358 +IF  F_Contributed_To_Accident  NE 'YES'
17359 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17360 +        R_Contributed_To_AccidentYes  = .;
17361 +        R_Contributed_To_AccidentNo  = .;
17362 + END;
17363 + ELSE DO;
17364 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17365 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17366 +       SELECT( F_Contributed_To_Accident  );
17367 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17368 +        R_Contributed_To_AccidentYes  +1;
17369 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17370 +        R_Contributed_To_AccidentNo  +1;
17371 +       END;
17372 + END;
17373 +
17374 +****************************************************************;
17375 +******          END OF DECISION TREE SCORING CODE         ******;
17376 +****************************************************************;
17377 +
17378 +drop _LEAF_;
17379 +*------------------------------------------------------------*;
17380 +* EndGrp: EndGroup;
17381 +* User: Divya;
17382 +* Date: 23NOV16: 03:23;
17383 +* Bagging: Loop=1;
17384 +*------------------------------------------------------------*;
17385 +*------------------------------------------------------------*;
17386 +* Bagging: Saving Probabilities for Next Iteration;
17387 +*------------------------------------------------------------*;
17388 +_BagVar1 = P_Contributed_To_AccidentYes;
17389 +_BagVar2 = P_Contributed_To_AccidentNo;
17390 +*------------------------------------------------------------*;
17391 +* Grp: StartGroup;
17392 +* User: Divya;
17393 +* Date: 23NOV16: 03:23;
17394 +* Bagging: Loop=2;
17395 +*------------------------------------------------------------*;
17396 +*------------------------------------------------------------*;
17397 +* Tree5: DecisionTree;
17398 +* User: Divya;
17399 +* Date: 23NOV16: 03:23;
17400 +* Bagging: Loop=2;
17401 +*------------------------------------------------------------*;
17402 +****************************************************************;
17403 +******             DECISION TREE SCORING CODE             ******;
17404 +****************************************************************;
17405 +
17406 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17407 +LENGTH F_Contributed_To_Accident  $    3;
17408 +LENGTH I_Contributed_To_Accident  $    3;
17409 +LENGTH U_Contributed_To_Accident  $    3;
17410 +LENGTH _WARN_  $    4;
17411 +
17412 +******              LABELS FOR NEW VARIABLES              ******;
17413 +label _NODE_ = 'Node' ;
17414 +label _LEAF_ = 'Leaf' ;
17415 +label P_Contributed_To_AccidentYes =
17416 +'Predicted: Contributed_To_Accident=Yes' ;
17417 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17418 +label Q_Contributed_To_AccidentYes =
17419 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17420 +label Q_Contributed_To_AccidentNo =
17421 +'Unadjusted P: Contributed_To_Accident=No' ;
17422 +label V_Contributed_To_AccidentYes =
17423 +'Validated: Contributed_To_Accident=Yes' ;
17424 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17425 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17426 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17427 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17428 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17429 +label U_Contributed_To_Accident =
17430 +'Unnormalized Into: Contributed_To_Accident' ;
17431 +label _WARN_ = 'Warnings' ;
17432 +
17433 +
17434 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17435 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17436 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17437 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17438 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17439 +
17440 +
17441 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17442 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17443 +
17444 +******             ASSIGN OBSERVATION TO NODE             ******;
17445 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17446 + %DMNORMIP( _ARBFMT_12);
17447 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17448 +  _NODE_  =                    3;
17449 +  _LEAF_  =                    4;
17450 +  P_Contributed_To_AccidentYes  =     0.98561151079136;
17451 +  P_Contributed_To_AccidentNo  =     0.01438848920863;
17452 +  Q_Contributed_To_AccidentYes  =     0.98561151079136;
17453 +  Q_Contributed_To_AccidentNo  =     0.01438848920863;
17454 +  V_Contributed_To_AccidentYes  =                    0;
17455 +  V_Contributed_To_AccidentNo  =                    0;
17456 +  I_Contributed_To_Accident  = 'YES' ;
17457 +  U_Contributed_To_Accident  = 'Yes' ;
17458 +  END;
17459 +ELSE DO;
17460 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17461 +   %DMNORMIP( _ARBFMT_12);
17462 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17463 +    _NODE_  =                    5;
17464 +    _LEAF_  =                    3;
17465 +    P_Contributed_To_AccidentYes  =     0.93421052631578;
17466 +    P_Contributed_To_AccidentNo  =     0.06578947368421;
17467 +    Q_Contributed_To_AccidentYes  =     0.93421052631578;
17468 +    Q_Contributed_To_AccidentNo  =     0.06578947368421;
17469 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
17470 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
17471 +    I_Contributed_To_Accident  = 'YES' ;
17472 +    U_Contributed_To_Accident  = 'Yes' ;
17473 +    END;
17474 +  ELSE DO;
17475 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17476 +     %DMNORMIP( _ARBFMT_12);
17477 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17478 +      _NODE_  =                    7;
17479 +      _LEAF_  =                    2;
17480 +      P_Contributed_To_AccidentYes  =     0.15028901734104;
17481 +      P_Contributed_To_AccidentNo  =     0.84971098265895;
17482 +      Q_Contributed_To_AccidentYes  =     0.15028901734104;
17483 +      Q_Contributed_To_AccidentNo  =     0.84971098265895;
17484 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17485 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17486 +      I_Contributed_To_Accident  = 'NO' ;
17487 +      U_Contributed_To_Accident  = 'No' ;
17488 +      END;
17489 +    ELSE DO;
17490 +      _NODE_  =                    6;
17491 +      _LEAF_  =                    1;
17492 +      P_Contributed_To_AccidentYes  =     0.34456928838951;
17493 +      P_Contributed_To_AccidentNo  =     0.65543071161048;
17494 +      Q_Contributed_To_AccidentYes  =     0.34456928838951;
17495 +      Q_Contributed_To_AccidentNo  =     0.65543071161048;
17496 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17497 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17498 +      I_Contributed_To_Accident  = 'NO' ;
17499 +      U_Contributed_To_Accident  = 'No' ;
17500 +      END;
17501 +    END;
17502 +  END;
17503 +
17504 +*****  RESIDUALS R_ *************;
17505 +IF  F_Contributed_To_Accident  NE 'YES'
17506 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17507 +        R_Contributed_To_AccidentYes  = .;
17508 +        R_Contributed_To_AccidentNo  = .;
17509 + END;
17510 + ELSE DO;
17511 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17512 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17513 +       SELECT( F_Contributed_To_Accident  );
17514 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17515 +        R_Contributed_To_AccidentYes  +1;
17516 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17517 +        R_Contributed_To_AccidentNo  +1;
17518 +       END;
17519 + END;
17520 +
17521 +****************************************************************;
17522 +******          END OF DECISION TREE SCORING CODE         ******;
17523 +****************************************************************;
17524 +
17525 +drop _LEAF_;
17526 +*------------------------------------------------------------*;
17527 +* EndGrp: EndGroup;
17528 +* User: Divya;
17529 +* Date: 23NOV16: 03:23;
17530 +* Bagging: Loop=2;
17531 +*------------------------------------------------------------*;
17532 +*------------------------------------------------------------*;
17533 +* Bagging: accumulate probabilities for iteration: 2;
17534 +*------------------------------------------------------------*;
17535 +P_Contributed_To_AccidentYes = _BagVar1*(1/2) + P_Contributed_To_AccidentYes*(1/2);
17536 +P_Contributed_To_AccidentNo = _BagVar2*(1/2) + P_Contributed_To_AccidentNo*(1/2);
17537 +*------------------------------------------------------------*;
17538 +* Bagging: Saving Probabilities for Next Iteration;
17539 +*------------------------------------------------------------*;
17540 +_BagVar1 = P_Contributed_To_AccidentYes;
17541 +_BagVar2 = P_Contributed_To_AccidentNo;
17542 +*------------------------------------------------------------*;
17543 +* Grp: StartGroup;
17544 +* User: Divya;
17545 +* Date: 23NOV16: 03:24;
17546 +* Bagging: Loop=3;
17547 +*------------------------------------------------------------*;
17548 +*------------------------------------------------------------*;
17549 +* Tree5: DecisionTree;
17550 +* User: Divya;
17551 +* Date: 23NOV16: 03:24;
17552 +* Bagging: Loop=3;
17553 +*------------------------------------------------------------*;
17554 +****************************************************************;
17555 +******             DECISION TREE SCORING CODE             ******;
17556 +****************************************************************;
17557 +
17558 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17559 +LENGTH F_Contributed_To_Accident  $    3;
17560 +LENGTH I_Contributed_To_Accident  $    3;
17561 +LENGTH U_Contributed_To_Accident  $    3;
17562 +LENGTH _WARN_  $    4;
17563 +
17564 +******              LABELS FOR NEW VARIABLES              ******;
17565 +label _NODE_ = 'Node' ;
17566 +label _LEAF_ = 'Leaf' ;
17567 +label P_Contributed_To_AccidentYes =
17568 +'Predicted: Contributed_To_Accident=Yes' ;
17569 +label P_Contributed_To_AccidentNo = 'Predicted: Contributed_To_Accident=No' ;
17570 +label Q_Contributed_To_AccidentYes =
17571 +'Unadjusted P: Contributed_To_Accident=Yes' ;
17572 +label Q_Contributed_To_AccidentNo =
17573 +'Unadjusted P: Contributed_To_Accident=No' ;
17574 +label V_Contributed_To_AccidentYes =
17575 +'Validated: Contributed_To_Accident=Yes' ;
17576 +label V_Contributed_To_AccidentNo = 'Validated: Contributed_To_Accident=No' ;
17577 +label R_Contributed_To_AccidentYes = 'Residual: Contributed_To_Accident=Yes' ;
17578 +label R_Contributed_To_AccidentNo = 'Residual: Contributed_To_Accident=No' ;
17579 +label F_Contributed_To_Accident = 'From: Contributed_To_Accident' ;
17580 +label I_Contributed_To_Accident = 'Into: Contributed_To_Accident' ;
17581 +label U_Contributed_To_Accident =
17582 +'Unnormalized Into: Contributed_To_Accident' ;
17583 +label _WARN_ = 'Warnings' ;
17584 +
17585 +
17586 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17587 +LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
17588 +_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
17589 +LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
17590 +_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
17591 +
17592 +
17593 +_ARBFMT_3 = PUT( Contributed_To_Accident , $3.);
17594 + %DMNORMCP( _ARBFMT_3, F_Contributed_To_Accident );
17595 +
17596 +******             ASSIGN OBSERVATION TO NODE             ******;
17597 +_ARBFMT_12 = PUT( GRP_Personal_Injury , BEST12.);
17598 + %DMNORMIP( _ARBFMT_12);
17599 +IF _ARBFMT_12 IN ('3' ) THEN DO;
17600 +  _NODE_  =                    3;
17601 +  _LEAF_  =                    4;
17602 +  P_Contributed_To_AccidentYes  =     0.97902097902097;
17603 +  P_Contributed_To_AccidentNo  =     0.02097902097902;
17604 +  Q_Contributed_To_AccidentYes  =     0.97902097902097;
17605 +  Q_Contributed_To_AccidentNo  =     0.02097902097902;
17606 +  V_Contributed_To_AccidentYes  =                    0;
17607 +  V_Contributed_To_AccidentNo  =                    0;
17608 +  I_Contributed_To_Accident  = 'YES' ;
17609 +  U_Contributed_To_Accident  = 'Yes' ;
17610 +  END;
17611 +ELSE DO;
17612 +  _ARBFMT_12 = PUT( GRP_Property_Damage , BEST12.);
17613 +   %DMNORMIP( _ARBFMT_12);
17614 +  IF _ARBFMT_12 IN ('3' ) THEN DO;
17615 +    _NODE_  =                    5;
17616 +    _LEAF_  =                    3;
17617 +    P_Contributed_To_AccidentYes  =     0.94409937888198;
17618 +    P_Contributed_To_AccidentNo  =     0.05590062111801;
17619 +    Q_Contributed_To_AccidentYes  =     0.94409937888198;
17620 +    Q_Contributed_To_AccidentNo  =     0.05590062111801;
17621 +    V_Contributed_To_AccidentYes  =      0.2156862745098;
17622 +    V_Contributed_To_AccidentNo  =     0.78431372549019;
17623 +    I_Contributed_To_Accident  = 'YES' ;
17624 +    U_Contributed_To_Accident  = 'Yes' ;
17625 +    END;
17626 +  ELSE DO;
17627 +    _ARBFMT_12 = PUT( GRP_Violation_Type , BEST12.);
17628 +     %DMNORMIP( _ARBFMT_12);
17629 +    IF _ARBFMT_12 IN ('3' ,'4' ) THEN DO;
17630 +      _NODE_  =                    7;
17631 +      _LEAF_  =                    2;
17632 +      P_Contributed_To_AccidentYes  =     0.18407960199004;
17633 +      P_Contributed_To_AccidentNo  =     0.81592039800995;
17634 +      Q_Contributed_To_AccidentYes  =     0.18407960199004;
17635 +      Q_Contributed_To_AccidentNo  =     0.81592039800995;
17636 +      V_Contributed_To_AccidentYes  =     0.00302343159486;
17637 +      V_Contributed_To_AccidentNo  =     0.99697656840514;
17638 +      I_Contributed_To_Accident  = 'NO' ;
17639 +      U_Contributed_To_Accident  = 'No' ;
17640 +      END;
17641 +    ELSE DO;
17642 +      _NODE_  =                    6;
17643 +      _LEAF_  =                    1;
17644 +      P_Contributed_To_AccidentYes  =     0.35091277890466;
17645 +      P_Contributed_To_AccidentNo  =     0.64908722109533;
17646 +      Q_Contributed_To_AccidentYes  =     0.35091277890466;
17647 +      Q_Contributed_To_AccidentNo  =     0.64908722109533;
17648 +      V_Contributed_To_AccidentYes  =     0.02827289489858;
17649 +      V_Contributed_To_AccidentNo  =     0.97172710510141;
17650 +      I_Contributed_To_Accident  = 'NO' ;
17651 +      U_Contributed_To_Accident  = 'No' ;
17652 +      END;
17653 +    END;
17654 +  END;
17655 +
17656 +*****  RESIDUALS R_ *************;
17657 +IF  F_Contributed_To_Accident  NE 'YES'
17658 +AND F_Contributed_To_Accident  NE 'NO'  THEN DO;
17659 +        R_Contributed_To_AccidentYes  = .;
17660 +        R_Contributed_To_AccidentNo  = .;
17661 + END;
17662 + ELSE DO;
17663 +       R_Contributed_To_AccidentYes  =  -P_Contributed_To_AccidentYes ;
17664 +       R_Contributed_To_AccidentNo  =  -P_Contributed_To_AccidentNo ;
17665 +       SELECT( F_Contributed_To_Accident  );
17666 +          WHEN( 'YES'  ) R_Contributed_To_AccidentYes  =
17667 +        R_Contributed_To_AccidentYes  +1;
17668 +          WHEN( 'NO'  ) R_Contributed_To_AccidentNo  =
17669 +        R_Contributed_To_AccidentNo  +1;
17670 +       END;
17671 + END;
17672 +
17673 +****************************************************************;
17674 +******          END OF DECISION TREE SCORING CODE         ******;
17675 +****************************************************************;
17676 +
17677 +drop _LEAF_;
17678 +*------------------------------------------------------------*;
17679 +* EndGrp: EndGroup;
17680 +* User: Divya;
17681 +* Date: 23NOV16: 03:24;
17682 +* Bagging: Loop=3;
17683 +*------------------------------------------------------------*;
17684 +*------------------------------------------------------------*;
17685 +* Bagging: accumulate probabilities for iteration: 3;
17686 +*------------------------------------------------------------*;
17687 +P_Contributed_To_AccidentYes = _BagVar1*(2/3) + P_Contributed_To_AccidentYes*(1/3);
17688 +P_Contributed_To_AccidentNo = _BagVar2*(2/3) + P_Contributed_To_AccidentNo*(1/3);
17689 +*------------------------------------------------------------*;
17690 +* Bagging: Saving Probabilities for Next Iteration;
17691 +*------------------------------------------------------------*;
17692 +_BagVar1 = P_Contributed_To_AccidentYes;
17693 +_BagVar2 = P_Contributed_To_AccidentNo;
17694 +*------------------------------------------------------------*;
17695 +*Computing Classification Vars: Contributed_To_Accident;
17696 +*------------------------------------------------------------*;
17697 +length I_Contributed_To_Accident $3;
17698 +label  I_Contributed_To_Accident = 'Into: Contributed_To_Accident';
17699 +length _format200 $200;
17700 +drop _format200;
17701 +_format200= ' ' ;
17702 +length _p_ 8;
17703 +_p_= 0 ;
17704 +drop _p_ ;
17705 +if P_Contributed_To_AccidentYes - _p_ > 1e-8 then do ;
17706 +   _p_= P_Contributed_To_AccidentYes ;
17707 +   _format200='YES';
17708 +end;
17709 +if P_Contributed_To_AccidentNo - _p_ > 1e-8 then do ;
17710 +   _p_= P_Contributed_To_AccidentNo ;
17711 +   _format200='NO';
17712 +end;
17713 +I_Contributed_To_Accident=dmnorm(_format200,32); ;
17714 +if I_Contributed_To_Accident='YES' then
17715 +U_Contributed_To_Accident='YES';
17716 +if I_Contributed_To_Accident='NO' then
17717 +U_Contributed_To_Accident='NO';
17718 +*------------------------------------------------------------*;
17719 +*Computing Residual Vars: Contributed_To_Accident;
17720 +*------------------------------------------------------------*;
17721 +Length R_Contributed_To_AccidentYes 8;
17722 +Label R_Contributed_To_AccidentYes='Residual: Contributed_To_Accident=Yes';
17723 +Length R_Contributed_To_AccidentNo 8;
17724 +Label R_Contributed_To_AccidentNo='Residual: Contributed_To_Accident=No';
17725 +if
17726 + F_Contributed_To_Accident ne 'YES'
17727 +and F_Contributed_To_Accident ne 'NO'
17728 + then do;
17729 +R_Contributed_To_AccidentYes=.;
17730 +R_Contributed_To_AccidentNo=.;
17731 +end;
17732 +else do;
17733 +R_Contributed_To_AccidentYes= - P_Contributed_To_AccidentYes;
17734 +R_Contributed_To_AccidentNo= - P_Contributed_To_AccidentNo;
17735 +select(F_Contributed_To_Accident);
17736 +when('YES')R_Contributed_To_AccidentYes= R_Contributed_To_AccidentYes+1;
17737 +when('NO')R_Contributed_To_AccidentNo= R_Contributed_To_AccidentNo+1;
17738 +otherwise;
17739 +end;
17740 +end;
NOTE: %INCLUDE (level 1) ending.
 
NOTE: DATA STEP view saved on file EMWS1.ENDGRP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.STAT2_VALIDATE.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
NOTE: Fileref EMFLOW has been deassigned.
17741  *------------------------------------------------------------*;
17742  * End SCORE: EndGrp;
17743  *------------------------------------------------------------*;
17744
 
17805  proc append base=EMWS1.EndGrp_EMOUTFIT data=WORK.OUTFITDATA force;
17806  run;
 
NOTE: Appending WORK.OUTFITDATA to EMWS1.ENDGRP_EMOUTFIT.
NOTE: BASE data set does not exist. DATA file is being copied to BASE file.
NOTE: There were 1 observations read from the data set WORK.OUTFITDATA.
NOTE: The data set EMWS1.ENDGRP_EMOUTFIT has 1 observations and 19 variables.
NOTE: PROCEDURE APPEND used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
17807  filename emflow "D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMFLOWSCORE.sas";
17808  filename lpflow catalog "EMWS1.EndGrp_LOOP.EMFLOWCODE_3.source";
17809  %em_copyfile(infref=emflow, outfref=lpflow);
 
NOTE: The file LPFLOW is:
      Catalog Name=EMWS1.ENDGRP_LOOP.EMFLOWCODE_3.SOURCE,
      Catalog Page Size=4096,
      Number of Catalog Pages=19,
      Created=Wed, Nov 23, 2016 03:23:17 AM,
      Last Modified=Wed, Nov 23, 2016 03:23:46 AM,
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\endgrp_loop.sas7bcat,
      Release Created=9.0401M3,
      Host Created=X64_8HOME
 
NOTE: 511 records were written to the file LPFLOW.
      The minimum record length was 1.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
17810  filename lpflow;
NOTE: Fileref LPFLOW has been deassigned.
17811  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
17812  filename empub "D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\EndGrp\EMPUBLISHSCORE.sas";
17813  filename lppub catalog "EMWS1.EndGrp_LOOP.EMPUBLISHCODE_3.source";
17814  %em_copyfile(infref=empub, outfref=lppub);
 
NOTE: The file LPPUB is:
      Catalog Name=EMWS1.ENDGRP_LOOP.EMPUBLISHCODE_3.SOURCE,
      Catalog Page Size=4096,
      Number of Catalog Pages=25,
      Created=Wed, Nov 23, 2016 03:23:17 AM,
      Last Modified=Wed, Nov 23, 2016 03:24:15 AM,
      Filename=D:\ITM\SAS\Project 007 - traffic violations\SAS FInal\SAS Final\Workspaces\EMWS1\endgrp_loop.sas7bcat,
      Release Created=9.0401M3,
      Host Created=X64_8HOME
 
NOTE: 390 records were written to the file LPPUB.
      The minimum record length was 1.
      The maximum record length was 83.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
17815  filename lppub;
NOTE: Fileref LPPUB has been deassigned.
17816  filename empub;
NOTE: Fileref EMPUB has been deassigned.
 
17817  *------------------------------------------------------------*;
17818  * EndGrp: Computing metadata for TRAIN data;
17819  *------------------------------------------------------------*;
 
NOTE: View EMWS1.ENDGRP_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
18165  data WORK.MODELTEMP_INFO;
18166  set EMWS1.EndGrp_EMINFO;
18167  where DATA='EndGrp' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
18168  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMINFO.
      WHERE (DATA='EndGrp') and KEY not in ('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
NOTE: The data set WORK.MODELTEMP_INFO has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
18169  data EMWS1.EndGrp_EMINFO;
18170  length TARGET KEY $32 DATA $43;
18171  input TARGET KEY DATA $;
18172  cards;
 
NOTE: The data set EMWS1.ENDGRP_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
18176  run;
18177  data EMWS1.EndGrp_EMINFO;
18178  set EMWS1.EndGrp_EMINFO WORK.MODELTEMP_INFO;
18179  run;
 
NOTE: There were 3 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: There were 1 observations read from the data set WORK.MODELTEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
18180  proc sort data = EMWS1.EndGrp_EMINFO NOTHREADS;
18181  by TARGET KEY;
18182  run;
 
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
18183  proc sort data = EMWS1.Tree5_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
18184  by TARGET KEY;
18185  run;
 
NOTE: There were 5 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: The data set WORK.SORTEDEMINFO has 5 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
18186  proc sort data = EMWS1.EndGrp_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
18187  by TARGET KEY;
18188  run;
 
NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set WORK.TEMP_INFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
18189  data EMWS1.EndGrp_EMINFO;
18190  merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
18191  by TARGET KEY;
18192  run;
 
NOTE: There were 5 observations read from the data set WORK.SORTEDEMINFO.
NOTE: There were 4 observations read from the data set WORK.TEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 6 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
18193  proc datasets lib=work nolist;
18194  delete TEMP_INFO SORTEDEMINFO;
18195  run;
 
NOTE: Deleting WORK.TEMP_INFO (memtype=DATA).
NOTE: Deleting WORK.SORTEDEMINFO (memtype=DATA).
18196  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
NOTE: View EMWS1.ENDGRP_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
18197  *------------------------------------------------------------*;
18198  * EndGrp: Computing metadata for VALIDATE data;
18199  *------------------------------------------------------------*;
 
NOTE: View EMWS1.ENDGRP_VALIDATE.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
18547  data WORK.MODELTEMP_INFO;
18548  set EMWS1.EndGrp_EMINFO;
18549  where DATA='EndGrp' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
18550  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMINFO.
      WHERE (DATA='EndGrp') and KEY not in ('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
NOTE: The data set WORK.MODELTEMP_INFO has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
18551  data EMWS1.EndGrp_EMINFO;
18552  length TARGET KEY $32 DATA $43;
18553  input TARGET KEY DATA $;
18554  cards;
 
NOTE: The data set EMWS1.ENDGRP_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
18558  run;
18559  data EMWS1.EndGrp_EMINFO;
18560  set EMWS1.EndGrp_EMINFO WORK.MODELTEMP_INFO;
18561  run;
 
NOTE: There were 3 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: There were 1 observations read from the data set WORK.MODELTEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
18562  proc sort data = EMWS1.EndGrp_EMINFO NOTHREADS;
18563  by TARGET KEY;
18564  run;
 
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
18565  proc sort data = EMWS1.Tree5_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
18566  by TARGET KEY;
18567  run;
 
NOTE: There were 5 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: The data set WORK.SORTEDEMINFO has 5 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
18568  proc sort data = EMWS1.EndGrp_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
18569  by TARGET KEY;
18570  run;
 
NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 4 observations read from the data set EMWS1.ENDGRP_EMINFO.
NOTE: The data set WORK.TEMP_INFO has 4 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
18571  data EMWS1.EndGrp_EMINFO;
18572  merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
18573  by TARGET KEY;
18574  run;
 
NOTE: There were 5 observations read from the data set WORK.SORTEDEMINFO.
NOTE: There were 4 observations read from the data set WORK.TEMP_INFO.
NOTE: The data set EMWS1.ENDGRP_EMINFO has 6 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
18575  proc datasets lib=work nolist;
18576  delete TEMP_INFO SORTEDEMINFO;
18577  run;
 
NOTE: Deleting WORK.TEMP_INFO (memtype=DATA).
NOTE: Deleting WORK.SORTEDEMINFO (memtype=DATA).
18578  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: View EMWS1.ENDGRP_VALIDATE.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                November 23, 2016
Time:                03:24:16
*------------------------------------------------------------*
18602  data temp;
18603  length _LOOP_ 8 _WHERE_ $200;
18604  format _LOOP_ 6.;
18605  label _LOOP_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_loop_vlabel, NOQUOTE))" _WHERE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_where_vlabel, NOQUOTE))";
18606  set EMWS1.EndGrp_EMOUTFIT;
18607  _LOOP_ =3;
18608  _WHERE_ ="";
18609  run;
 
NOTE: There were 1 observations read from the data set EMWS1.ENDGRP_EMOUTFIT.
NOTE: The data set WORK.TEMP has 1 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
18610  data EMWS1.EndGrp_EMOUTFIT_LOOP;
18611  set EMWS1.EndGrp_EMOUTFIT_LOOP temp;
18612  run;
 
NOTE: There were 2 observations read from the data set EMWS1.ENDGRP_EMOUTFIT_LOOP.
NOTE: There were 1 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.ENDGRP_EMOUTFIT_LOOP has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
